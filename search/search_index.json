{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"1-ow/","title":"1 ow","text":""},{"location":"1-ow/#_1","title":"\uc624\ubc84\uc6cc\uce58 \uad6c\uc870\ub97c \uc54c\uc544\ubcf4\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-07-06</p>"},{"location":"1-ow/#_2","title":"\uc124\uce58 \ud30c\uc774\ud504\ub77c\uc778","text":"<p>\uc18c\uc2a4 asset\uc5d0\uc11c \uc2e4\ud589\uac00\ub2a5 asset\uc73c\ub85c \ubcc0\ud658\ud558\uac70\ub098, \uce90\uc2f1, \ubd84\uc0b0 \ube4c\ub4dc, \ud328\ud0a4\uc9d5 \ub4f1\uc744 \ud55c\ub2e4.</p> <pre><code>[Source Assets] \u2500\u25b6 pull --sourcepull \u2500\u25b6 SQLite \u2018local asset DB\u2019\n                 \u25b2                             \u2502\n                 \u2502 (Structured-Data Generator) \u2502\n                 \u2502                             \u25bc\n[Builder per Type] \u25c0\u2500 DataBuild --compile \u2500\u2500\u25b6 [Compiled Asset Store]\n</code></pre> <p>genrator: json \uc720\uc0ac \uc120\uc5b8(SDLang)\uc73c\ub85c \ud0c0\uc785-\uc548\uc804 C++/C# \ud074\ub798\uc2a4, \uc5d0\ub514\ud130 \ub9ac\ud50c\ub809\uc158 \ucf54\ub4dc \uc790\ub3d9\uc0dd\uc131. \uc0b0\ucd9c\ubb3c \uc704\uce58\ub294 Generated/.h/.cpp\ub85c \ucd94\uc815. <p>builer: asset \ud0c0\uc785\ubcc4(\uba54\uc2dc, \uba38\ud2f0\ub9ac\uc5bc, \uc601\uc6c5 \uc2a4\ud06c\ub9bd\ud2b8) DLL. \uc785\ub825 SHA-1 \ud574\uc2dc\uc640 CompilerID \uc870\ud569\uc73c\ub85c \uacb0\uacfc\ub97c \uce90\uc2f1\ud574, \uc774\ubbf8 \ucef4\ud30c\uc77c\ub41c \ub3d9\uc77c \uc785\ub825\uc740 \uc804\uc5ed Compiled Asset Repository\uc5d0\uc11c \uadf8\ub0e5 \ub2f9\uaca8\uc628\ub2e4. \ubd84\uc0b0 \ube4c\ub4dc\ub294 \ub0b4\ubd80 \ube4c\ub4dc\ud31c 30\ub178\ub4dc \uae30\uc900 12h -&gt; 4h \uc774\ub2e4. \uc644\uc131 \uc790\uc0b0\uc744 \uae30\ub2a5 \ub2e8\uc704 Package\ub85c \ubb36\uace0, \uc9c0\uc5ed, \ud50c\ub7ab\ud3fc\ubcc4 \uc554\ud638\ud654 \uaddc\uce59\uc744 \ubd99\uc5ec \ub7f0\ucc98\uac00 \uc628-\ub514\ub9e8\ub4dc \uc2a4\ud2b8\ub9ac\ubc0d\uc744 \ud55c\ub2e4. \uc0b0\ucd9c\ubb3c \uc704\uce58\ub294 Compiled//.bin\ub85c \ucd94\uc815."},{"location":"1-ow/#_3","title":"\uc18c\uc2a4 \ud3f4\ub354 \uad6c\uc870","text":"<pre><code>Overwatch/\n\u251c\u2500 Engine/                 # \ub7f0\ud0c0\uc784 \ucf54\uc5b4\n\u2502   \u251c\u2500 Core/               # \uba54\ubaa8\ub9ac, Job, Math, ECS Core\n\u2502   \u251c\u2500 Graphics/           # DX12/Vulkan \ub80c\ub354\ub7ec\n\u2502   \u251c\u2500 Physics/\n\u2502   \u251c\u2500 Audio/\n\u2502   \u2514\u2500 Platform/\n\u251c\u2500 Game/                   # ECS \uc2dc\uc2a4\ud15c\u00b7\ucef4\ud3ec\ub10c\ud2b8\u00b7\uc2a4\ud0b4\n\u2502   \u251c\u2500 Heroes/\n\u2502   \u2502   \u2514\u2500 Tracer/\n\u2502   \u251c\u2500 Abilities/\n\u2502   \u2514\u2500 PvE/\n\u251c\u2500 Network/                # \ud504\ub808\uc784 \uc2a4\ub0c5\uc0f7, \ub864\ubc31, \uc608\uce21\n\u251c\u2500 Tools/\n\u2502   \u251c\u2500 TED/                # \uc6d4\ub4dc\u00b7\uc2a4\ud06c\ub9bd\ud2b8 \uc5d0\ub514\ud130 GUI\n\u2502   \u251c\u2500 DataBuild/          # \uba54\uc778 \ud30c\uc774\ud504\ub77c\uc778 \uc2e4\ud589\ud30c\uc77c\n\u2502   \u2502   \u2514\u2500 Builders/       # *.Builder.dll per asset-type\n\u2502   \u251c\u2500 Generators/         # Structured-Data codegen\n\u2502   \u251c\u2500 BranchManager/\n\u2502   \u2514\u2500 PackageManager/\n\u251c\u2500 CI/\n\u2502   \u2514\u2500 DataBuildCI/\n\u251c\u2500 Content/                # \u2018\uc18c\uc2a4\u2019 \uc790\uc0b0(PSD, FBX, WAV\u2026)\n\u2514\u2500 BuildScripts/           # CMake/SCons + \ud37c\ube14\ub9ac\uc154 \uc2a4\ud06c\ub9bd\ud2b8\n</code></pre>"},{"location":"1-ow/#_4","title":"\ub0b4\ub824\ubc1b\ub294 \ud30c\uc77c","text":"<p>\uc2e4\uc81c\ub85c \uc6b0\ub9ac\uac00 \ub0b4\ub824\ubc1b\ub294 \ud30c\uc77c\uc740 \uc2e4\ud589 \ud30c\uc77c\uacfc \ub77c\uc774\ube0c\ub7ec\ub9ac,  CASC \ub370\uc774\ud130 \uc544\uce74\uc774\ube0c, \uc778\ub371\uc2a4, \ub7f0\ucc98 \uba54\ud0c0\ub370\uc774\ud130\uac00 \ub2e4\uc774\ub2e4.</p> <p>\uc2e4\ud589 \ud30c\uc77c: C/C++\ub85c \ucef4\ud30c\uc77c\ub41c \ud074\ub77c\uc774\uc5b8\ud2b8, \ub7f0\ucc98 \ucf54\ub4dc. Overwatch/Overwatch.exe \ub77c\uc774\ube0c\ub7ec\ub9ac: .dll CASC: Content Addressable Storage Container\ub85c, \ube14\ub9ac\uc790\ub4dc\uac00 MPQ\ub97c \ub300\uccb4\ud574 \uc0ac\uc6a9\ud558\ub294 \ud328\ud0a4\uc9c0 \ud3ec\ub9f7\uc73c\ub85c, \ud30c\uc77c \ub369\uc5b4\ub9ac\ub97c '\ucf58\ud150\uce20 \ud574\uc2dc' \uae30\uc900\uc73c\ub85c \uc800\uc7a5, \uc2a4\ud2b8\ub9ac\ubc0d\ud55c\ub2e4. \uc601\uc6c5 \ubaa8\ub378, \uc0ac\uc6b4\ub4dc, \ub9f5 \ub4f1 asset\uc774 \uc554\ud638\ud654\ub41c \ucc44\ub85c \uc800\uc7a5\ub418\uc5b4 \uc788\ub2e4. \uc124\uce58\uae30(Battle.net) &lt;-&gt; \uac8c\uc784 \uc2e4\ud589 \uc2dc \ub3d9\uc77c \uad6c\uc870\ub97c \uacf5\uc720\ud574 \uc99d\ubd84 \ud328\uce58\uac00 \ube60\ub974\ub2e4. Overwatch/data/casc/data/\u2026 \uc778\ub371\uc2a4: CASC \ube14\ub85d-\ud574\uc2dc\uc640 \uc2e4\uc81c \uc704\uce58\ub97c \ub9e4\ud551\ud55c\ub2e4. \u2026/casc/indices/.idx \ub7f0\ucc98 \uba54\ud0c0\ub370\uc774\ud130: \ubc84\uc804, CDN \uc704\uce58, \ud574\uc2dc \ubaa9\ub85d (TACT \ud504\ub85c\ud1a0\ucf5c). *.build.info, *.product.db</p> <p>\uc124\uce58\ub098 \uc5c5\ub370\uc774\ud2b8 \ud750\ub984\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4. <pre><code>i. Battle.net \uc571\uc5d0\uc11c '\uc124\uce58' \ubc84\ud2bc\uc744 \ub204\ub974\uba74 TACT \ud504\ub85c\ud1a0\ucf5c\ub85c \ubc84\uc804, \ud574\uc2dc \ubaa9\ub85d\uc744 \ubc1b\uc544\uc634\nii. \ud074\ub77c\uc774\uc5b8\ud2b8\ub294 CDN\uc5d0\uc11c \ucef4\ud30c\uc77c\ub41c \uc2e4\ud589 \ud30c\uc77c\uacfc CASC \uc870\uac01\uc744 \ub0b4\ub824\ubc1b\uc74c\niii. \ubc1b\uc740 \uc870\uac01\uc740 Overwatch/data/casc \uc544\ub798\uc5d0 \uc800\uc7a5\ub418\uace0, \uc778\ub371\uc2a4, \uc800\ub110(*.idx,shmem) \ud30c\uc77c\uc5d0 \uc704\uce58\uac00 \uae30\ub85d\ub428\niv. \uc2e4\ud589 \uc2dc \ub7f0\ucc98\uac00 \ubb34\uacb0\uc131 \uac80\uc0ac(\ud574\uc2dc-&gt;\ube14\ub85d \ud655\uc778) \ud6c4 \uc2e4\ud589.\n</code></pre></p> <p>\uadf8\ub9ac\uace0 \uc774\uc870\ucc28 \uc624\ubc84\uc6cc\uce58 1\uacfc 2\uc5d0 \ucc28\uc774\ub97c \ubcf4\uc778\ub2e4.</p> \ud56d\ubaa9 Overwatch (2016) Overwatch 2 (2022\\~) \uc5d4\uc9c4 \ucf54\uc5b4 Team 4 \ub3c5\uc790 ECS \uc5d4\uc9c4 v1.0 v1.5 \u2013 \ub3d9\uc77c \ucf54\ub4dc\ubca0\uc774\uc2a4\ub97c \ud655\uc7a5\u00b7 \uba40\ud2f0\uc2a4\ub808\ub4dc \ub80c\ub354 \ud30c\uc774\ud504\ub77c\uc778\u00b7 \ubb3c\ub9ac\u00b7\ud30c\ud2f0\ud074 \ucd5c\ub300\uce58 \uc0c1\ud5a5\u00b7 \ub3d9\uc801 \uc870\uba85\u00b7PBR \uc7ac\uc9c8 \ucd94\uac00 \ub9f5/\uc790\uc0b0 \uaddc\ubaa8 \ud3c9\uade0 100 \u00d7 100 m, 6v6 \uc804\uc81c PvE\uc6a9 3\\~5\ubc30 \ub300\ud615 \ub9f5, \uc2a4\ud06c\ub9bd\ud2b8\ud615 \uc774\ubca4\ud2b8, \ub3d9\uc801 \uae30\uc0c1 \ud6a8\uacfc DataBuild \ud30c\uc774\ud504\ub77c\uc778 203 \ud0c0\uc785, \ubd84\uc0b0 \ube4c\ub4dc 30 \ub178\ub4dc/4 h \u2248250 \ud0c0\uc785(+Perk\u00b7Cinematic \ub4f1), \uc77c\ubd80 GPU \uc804\uc6a9 \ube4c\ub354-DLL \uc2e0\uc124\u00b7CUDA \ud65c\uc6a9 Generator(SDLang \u2192 \ucf54\ub4dc) 1,700\uc5ec \uad6c\uc870\uccb4 Hero Perks/Progression \ub4f1 \uc2e0\uaddc \uc2a4\ud0a4\ub9c8 \uc790\ub3d9\uc0dd\uc131 \ud328\ud0a4\uc9d5\u00b7\ubc30\ud3ec CASC v2 + TACT, SHA-1 \uc554\ud638\ud654 CASC v3 (AES-CTR 128 bit) \u00b7 \uc99d\ubd84 \uc2a4\ud2b8\ub9ac\ubc0d \ucd5c\uc801\ud654 \ud074\ub77c\uc774\uc5b8\ud2b8 \uaddc\ubaa8(PC) \uc124\uce58 25 \\~ 30 GB \uc2dc\uc98c 15 \uae30\uc900 \u224852 GB, \ud328\uce58 \uc2dc \uc99d\ubd84 \ub2e4\uc6b4\ub85c\ub4dc"},{"location":"1-ow/#_5","title":"\uc5d4\uc9c4","text":"<p>\uc5d4\uc9c4\uc740 \uac8c\uc784\uc774 \uc2e4\uc2dc\uac04\uc73c\ub85c \uc9c4\ud589\ub418\ub294 \ucf54\ub4dc\uc774\ub2e4. ECS(Entitiy-Component-System) \uae30\ubc18 \uc2dc\ubbac\ub808\uc774\uc158 \ub8e8\ud504, \ub80c\ub354\ub7ec, \ubb3c\ub9ac, \uc624\ub514\uc624, \ud50c\ub7ab\ud3fc \ub798\ud37c \ub4f1\uc73c\ub85c \uad6c\uc131\ub418\uc5b4 \uc788\ub2e4.</p> <p>\uc774\ub54c \uc5d4\uc9c4\uc758 \ud575\uc2ec \ud2b9\uc9d5\uc740 ECS + Network-deterministic \uc2dc\ubbac\ub808\uc774\uc158\uc774\ub77c\ub294 \uac83\uc774\ub2e4. \ubaa8\ub4e0 \ud074\ub77c\uc774\uc5b8\ud2b8, \uc11c\ubc84\uac00 \ud2f1 \ub2e8\uc704\ub85c \uac19\uc740 \uacc4\uc0b0\uc744 \uc7ac\ud604\ud558\ub3c4\ub85d \uc124\uacc4\ub418\uc5b4 \uc785\ub825\ub9cc \ub3d9\uae30\ud654\ud558\uba74 \uacb0\uacfc\uac00 \uc77c\uce58\ud55c\ub2e4.</p> <p>ECS? Entity/Component/System \uc138\uac00\uc9c0 \ucd95. Entity: \uace0\uc720 ID, \uc0dd\uba85\uc8fc\uae30, \ud3ed\ubc1c \uad6c\uc5ed, \uc601\uc6c5 \ud55c\uba85, \ud22c\uc0ac\uccb4 \ub4f1 \ub370\uc774\ud130\ub098 \ub17c\ub9ac\uac00 \uc5c6\ub294 \uac83\ub4e4. \uba54\ubaa8\ub9ac\uc5d0\uc11c 32-bit \ud578\ub4e4(\uc778\ub371\uc2a4+\uc138\ub300) \ubc30\uc5f4\uc774\ub2e4. Component: \uc21c\uc218 \ub370\uc774\ud130(POD)\ub85c \uc704\uce58(transform), HP(health), \ucd1d\uc54c\uc218(weaponstate). \uba54\ubaa8\ub9ac\uc5d0\uc11c SoA(Structure of Arrays)\ub85c \uce90\uc2dc \uce5c\ud654\uc774\ub2e4. System: \ub9e4 \ud2f1\ub9c8\ub2e4 \ud544\uc694 Component \uc14b\uc744 \uac00\uc9c4 Entity \uc2a4\ud2b8\ub9bc\uc744 \uc2a4\uce94\ud574 \ub85c\uc9c1\uc744 \uc2e4\ud589\ud55c\ub2e4. MovementSystem(transform+Physics), WeaponSystem(weaponstate+input) \ub4f1\uc774\ub2e4. \uba54\ubaa8\ub9ac\uc5d0\uc11c \ub2e4\uc911 \uc2a4\ub808\ub4dc/Job \ud050\ub85c \ubcd1\ub82c \ucc98\ub9ac\ud55c\ub2e4.</p> <p>\uc804\ud1b5\uc11d\uc778 \uc0c1\uc18d \uacc4\uce35(OOP)\uacfc\ub294 \ud655\uc2e4\ud788 \ub2e4\ub978 \ubd84\ub9ac\ub85c \ucf54\ub4dc \ubcf5\uc7a1\ub3c4\uac00 \ub0ae\ub2e4.</p> <p>\ub124\ud2b8\uc6cc\ud06c \uacb0\uc815\ub860? \ubaa8\ub4e0 \ucc38\uac00\uc790\uac00 \uac19\uc740 \ucd08\uae30 \uc0c1\ud0dc\uc5d0\uc11c \uac19\uc740 \uc2dc\uc810\ubcc4 \uc785\ub825 \uc2dc\ud000\uc2a4\ub9cc \uacf5\uc720\ud558\uba74, \uac01\uc790\uc758 PC\uc5d0\uc11c \ub3cc\ub9b0 \uacb0\uacfc\uac00 \ubc14\uc774\ud2b8 \ub2e8\uc704\uae4c\uc9c0 \ub3d9\uc77c\ud558\uac8c \uc7ac\ud604\ub41c\ub2e4.</p> <p>\uc989 \ud074\ub77c\uc774\uc5b8\ud2b8\ub294 \ub9e4 \ud2f1(63hz \uc989 15.9ms) \uc785\ub825\uac12 \uc218\ubc14\uc774\ud2b8\ub97c \uafb8\uc900\ud788 \ubcf4\ub0b8\ub2e4. 63 Hz 'high-bandwidth' \uc11c\ubc84\uac00 \uc774\ub97c \ubc1b\ub294\ub2e4. \uc11c\ubc84\ub294 \ubaa8\ub450\uc758 Command[N]\uc744 \ubaa8\uc544 \uad8c\uc704 \uc2dc\ubbac\ub808\uc774\uc158\uc744 \ub3cc\ub9b0\ub2e4. \uadf8 \uacb0\uacfc\ub97c delta \uc2a4\ub0c5\uc0f7\uc73c\ub85c \uac01 \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0 \ubc30\ud3ec\ud55c\ub2e4. \ud074\ub77c\uc774\uc5b8\ud2b8\ub294 \uc790\uc2e0\uc774 \ubbf8\ub9ac \ub3cc\ub9b0 \ub85c\uceec \uc608\uce21\uacfc \ube44\uad50\ud574 \ud544\uc694\ud558\uba74 \ubbf8\uc138 \ub864\ubc31/\ubcf4\uc815\ub9cc \uc218\ud589\ud55c\ub2e4.</p> <p>\ub530\ub77c\uc11c \uc790\uc2e0\uc758 \uc6c0\uc9c1\uc784\uc740 \uc785\ub825 \uc2dc\uc810\uc5d0 \ub3cc\uc544\uac00\uace0 \ub2e4\ub978 \ud50c\ub808\uc774\uc5b4\ub294 \uc0b4\uc9dd \uacfc\uac70(\uc57d 50ms)\ub97c \uc7ac\uc0dd\ud558\uace0 \uc788\ub294 \uac83\uc774\ub2e4. \uc11c\ubc84\uc758 \uc2a4\ub0c5\uc0f7\uc744 \uae30\uc900\uc73c\ub85c \ub9d0\ud558\uba74 \ub0b4 \uce90\ub9ad\uc740 \uc55e\uc73c\ub85c 1/2 RTT\uc815\ub3c4 \uc55e\uc11c \ub2ec\ub9ac\uace0, \uc0c1\ub300 \uce90\ub9ad\ud130\ub294 \uacfc\uac70 1/2 RTT\uc815\ub3c4\ub97c \uc7ac\uc0dd\ud558\ub294 \uac83\uc774\ub2e4.</p> <p>\ucc38\uace0/ \uacb0\uc815\ub860\uc744 \uc720\uc9c0\ud558\uae30 \uc704\ud574 \uace0\uc815 \ud2f1 \ub808\uc774\ud2b8, \ubd80\ub3d9\uc18c\uc218\uc810\uacfc \uc5f0\uc0b0 \uc21c\uc11c \ud1b5\uc81c, \ubb34\uc791\uc704 \uc694\uc18c\ub294 \uc804\uc5ed \uc2dc\ub4dc PRNG \uc0ac\uc6a9, \ucef4\ud3ec\ub10c\ud2b8 \uc21c\uc11c \uace0\uc815, command\uc5d0 Tick ID \ud3ec\ud568.</p>"},{"location":"1-ow/#command","title":"command \ud328\ud0b7","text":"<p>\ud074\ub77c\uc774\uc5b8\ud2b8-&gt;\uc11c\ubc84 command \ud328\ud0b7 \ud615\uc2dd</p> \ud544\ub4dc \uc555\ucd95\u00b7\ube44\ud2b8\uc218 \uc124\uba85 <code>tickId</code> 16 bit \uc774 \uba85\ub839\uc774 \uc801\uc6a9\ub420 ECS \ud2f1(63 Hz\uba74 0.0159 s) <code>buttons</code> 16 bit LMB\u2006/\u2006Shift\u2006/\u2006Ability\u20061\u00b72\u00b7Ult \ub4f1 \u2015 \ube44\ud2b8\ud50c\ub798\uadf8 <code>moveX, moveY</code> \uac01\uac01 8 bit WASD \ucd95, -127\\~127 \uc815\uaddc\ud654 <code>yaw, pitch</code> \uac01\uac01 13 bit 0-360\u00b0, 0-\u00b189\u00b0 \uc591\uc790\ud654 <code>heroPayload</code> \uac00\ubcc0 (\uc608) \uba54\uc774 \uc5bc\uc74c\ubcbd \ub192\uc774, \uc790\ub9ac\uc57c \ucda9\uc804\ub7c9\u2026 \uc911\ubcf5 \uba85\ub839 \u0394-\uc555\ucd95 \uc9c1\uc804 3 \ud2f1 \uc785\ub825\uc744 diff \ud615\ud0dc\ub85c \ucd94\uac00\ud574 \ud328\ud0b7 \uc190\uc2e4 \ub300\ube44 <p>\uc2e4\uc81c \uae30\uc900 11-15B \uc815\ub3c4\ub85c \ub9e4\uc6b0 \uc791\uc74c \ud5e4\ub354\uc5d0\ub294 seq/ack \ubc88\ud638\uc640 \uc11c\ubc84 \uc2a4\ub0c5\uc0f7 ack(\ub0b4\uac00 N\ubc88\uc9f8 \uacb0\uacfc\uae4c\uc9c0 \ubc1b\uc558\ub2e4)\uac00 \ud568\uaed8 \ub4e4\uc5b4 \uc788\ub2e4.</p> <p>\ubb3c\ub9ac\uc801 \uc804\uc1a1 \uacc4\uce35  \ud504\ub85c\ud1a0\ucf5c\uc740 battle.net \uc2e4\uc2dc\uac04 \uc2a4\ud2b8\ub9bc\uc73c\ub85c UDP+\uc790\uccb4 \uc7ac\uc804\uc1a1/\uc554\ud638\ud654 \ub808\uc774\uc5b4. \uc8fc \uc0ac\uc6a9 \ud3ec\ud2b8\ub294 UDP 5060,5062,6250,3478,3479,12000~64000 \uacfc TCP 1119,3724,6113. \ubcf4\uc548\uc740 \uc138\uc158 \ud578\ub4dc\uc170\uc774\ud06c \ub4a4 AES-CTR \ud0a4 \ub9c1\uc73c\ub85c \uc678\ubd80 \ucd94\ucd9c \ucc28\ub2e8.</p> <p>\uc11c\ubc84 \uce21 \ucc98\ub9ac \ud750\ub984. <pre><code>for every tick N:\n    cmds = gatherCommandsFromClients(N)      // \uc5c6\uc73c\uba74 N-1 \uc785\ub825 \uc7ac\uc0ac\uc6a9\n    runAllECSSystems(cmds)                   // \uacb0\uc815\ub860 \uc2dc\ubbac\ub808\uc774\uc158\n    delta = makeSnapshotDelta(prev, current)\n    sendSnapshotToEachClient(delta, ack=N)   // \uc644\uc131\ub41c \uc2a4\ub0c5\uc0f7\uc744 UDP\ub85c \uc804\uc1a1\n</code></pre></p>"},{"location":"1-ow/#_6","title":"\uc2a4\ub0c5\uc0f7 \ud328\ud0b7","text":"<p>\uc11c\ubc84-&gt;\ud074\ub77c\uc774\uc5b8\ud2b8 \uc2a4\ub0c5\uc0f7 \ud615\uc2dd</p> <p>100 ~ 200 \ubc14\uc774\ud2b8. \ubc14\uc774\ud2b8 \uc2a4\ud2b8\ub9bc \uc804\uccb4\uac00 AES-CTR\ub85c \uc554\ud638\ud654\ub3fc \uc788\ub2e4. A\uce35 \ud5e4\ub354. 6-8B</p> \ud544\ub4dc \ube44\ud2b8\uc218 \uc124\uba85 <code>snapshotSeq</code> 16 \uc774\ubc88 \uc2a4\ub0c5\uc0f7\uc758 \uc5f0\uc18d \ubc88\ud638 <code>baselineSeq</code> 16 \u201c\uc774 \ubc88\ud638\uae4c\uc9c0\ub294 \ud074\ub77c\uac00 \ubc1b\uc558\ub2e4\uace0 \ud655\uc815\u201d\u2014\u2006\ub378\ud0c0\uc758 \uae30\uc900 \ud2f1 <code>ackBits</code> 32 \ucd5c\uadfc 32\uac1c \uc2a4\ub0c5\uc0f7 \uc218\uc2e0 \ud655\uc778 \ube44\ud2b8-\ud544\ub4dc <code>flags</code> 8 \uc555\ucd95(LZ4), \uc804\uccb4\uc2a4\ub0c5\uc0f7 \uc5ec\ubd80 \ub4f1 <p>B\uce35 entity \ud14c\uc774\ube14. 5-40B Create/Update/Delete \ube44\ud2b8 \ub9c8\uc2a4\ud06c + \uc5d4\ud2f0\ud2f0 ID \uac00\ubcc0\uae38\uc774 VLQ  ID\ub294 EntityIndex &lt;&lt; 6 | GenerationBits(6) \ud615\ud0dc\ub97c 7bit VLQ\ub85c \uc555\ucd95.</p> <p>C\uce35 Component \u0394\ube14\ub85d(entity\ubcc4\ub85c 1~100B).</p> \uc21c\uc11c \ub0b4\uc6a9 \uc778\ucf54\ub529 \ubc29\uc2dd\u00b7\ube44\ud2b8\uc218 \uc608 \u2460 <code>updateMask</code> \uc774 \uc5d4\ud2f0\ud2f0\uc5d0\uc11c \ubc14\ub010 \ucef4\ud3ec\ub10c\ud2b8 \ube44\ud2b8\ud544\ub4dc \ucd5c\ub300 16 \ube44\ud2b8 \u2461 \ucef4\ud3ec\ub10c\ud2b8 \uc778\ub371\uc2a4 \ubc14\ub010 \uac83\ub9cc \uc21c\ucc28 \uae30\ub85d \uac00\ubcc0(\u0394-VLQ) \u2462 \ud544\ub4dc\ubcc4 \u0394 \uac12\ub9c8\ub2e4 \uac1c\ubcc4 \uc591\uc790\ud654 \uc608) \uc704\uce58 X/Y/Z \u2192 16\u00b716\u00b714 bitYaw/Pitch \u2192 13\u00b79 bitHP \u2192 10 bit (0-1023) <p>\uc989 \ud55c\ubc88\uc5d0 \ud45c\ud604\ud558\uc790\uba74 [UDP]    |Header|E-Tbl|\u0394Comp(Entity #17)|\u0394Comp(Entity #42)|\u2026                 \u25b2 \uc555\ucd95(LZ4) \u25b2 <p>\ud074\ub77c\uc774\uc5b8\ud2b8 \uc218\uc2e0-&gt;\ub864\ubc31/\uc7ac\uc801\uc6a9 \ub85c\uceec \uc608\uce21 \uacb0\uacfc\uc640 \ube44\uad50\ud574 \ucc28\uc774\uac00 \ub098\uba74 \ub864\ubc31.</p> <p>\uc2a4\ub0c5\uc0f7 \ud328\ud0b7 \ub0b4\ubd80\ub97c \uae4c\ubcfc \uc218 \uc788\ub098?</p> <pre><code>OW1 \u2013 \uc77c\ubd80 \ud0a4\uac00 \uacf5\uac1c\ub3fc \uc788\uc5b4 CascView + OverTool \ub85c \uc81c\ud55c\uc801 \ub514\ucf54\ub529 \uac00\ub2a5.\n\nOW2 (CASC v3 + Key-Ring) \u2013 AES-CTR \ud0a4\uac00 \uc11c\ubc84\uc5d0\uc11c \ub3d9\uc801 \uad50\ud658 \u2192 \uc678\ubd80 \ucd94\ucd9c \ub09c\ub3c4 \u2191.\n\ub530\ub77c\uc11c Wireshark\ub85c\ub294 \ud5e4\ub354 \uae38\uc774\u00b7Sequence/ACK \ud544\ub4dc\ub9cc \ubcf4\uc774\uace0,\n\uc5d4\ud2f0\ud2f0 Table\u00b7\ucef4\ud3ec\ub10c\ud2b8 \u0394-\ube14\ub85d\uc740 \uc804\ubd80 \uc554\ud638\ud654\ub41c \ubc14\uc774\ud2b8 \uc2a4\ud2b8\ub9bc\uc785\ub2c8\ub2e4.\n</code></pre>"},{"location":"1-ow/#api","title":"&gt; API","text":"<p>api? \uc18c\ud504\ud2b8\uc6e8\uc5b4\ub07c\ub9ac \uc57d\uc18d\ud55c \ub300\ud654 \uaddc\uce59\uc774\ub2e4. \uc5b4\ub5a4 \ud504\ub85c\uadf8\ub7a8\uc774 \ub2e4\ub978 \uae30\ub2a5\uc744 \ud638\ucd9c\ud558\uac70\ub098 \uc81c\uc5b4\ud560 \uc218 \uc788\ub3c4\ub85d \uc774\ub984, \uc785\ub825, \ubc18\ud658, \ub3d9\uc791\uc774 \ubb38\uc11c\ud654\ub41c \uc778\ud130\ud398\uc774\uc2a4.</p> <p>\uc624\ubc84\uc6cc\uce58\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 api?</p> \uad6c\uc5ed \ubb34\uc5c7\uc744 \ucea1\ucc98\ud560 \uc218 \uc788\ub098 \uc554/\ubcf5\ud638\ud654 \uac00\ub2a5\uc131 \ucd94\ucc9c \ub3c4\uad6c\u00b7\ubc29\ubc95 \u2460 Battle.net HTTP API(\ub85c\uadf8\uc778\u00b7OAuth\u00b7\ub9e4\uce58\uba54\uc774\ucee4\u00b7\ud328\uce58 \uba54\ud0c0) HTTPS - TLS 1.3 TLS\u2015\ube0c\ub77c\uc6b0\uc800\uc640 \ub3d9\uc77c.\ud074\ub77c\uc5d0 Pinning \uc5c6\uc74c \u2192 <code>SSLKEYLOGFILE</code> + Wireshark\ub85c \ubcf5\ud638\ud654 \uac00\ub2a5 (\uc708\ub3c4\uc6b0 Schannel \uae30\ubc18) 1. \ud658\uacbd\ubcc0\uc218 <code>SSLKEYLOGFILE=%USERPROFILE%\\tls.keys</code> \uc124\uc8152. Wireshark \u25b8 TLS \u25b8 (Pre-)Master-Secret log \uacbd\ub85c \uc9c0\uc8153. \ud544\ud130 <code>tcp.port==443 &amp;&amp; tls.handshake.extensions_server_name contains \"battle.net\"</code> \u2461 TACT/CDN \ub2e4\uc6b4\ub85c\ub4dc(CASC *.data, *.idx, root/encoding) \uc21c\uc218 HTTP GET \ud3c9\ubb38(\ube14\ub85d \uc790\uccb4\ub294 BLTE \uc555\ucd95\u00b7AES \uac00\ub2a5) \u2013 Wireshark <code>http.host contains \"level3.blizzard.com\"</code>\u2013 <code>tactmon</code>, <code>curl -O</code> \ub85c \uc7ac\ud604\u2013 \uc774\ud6c4 \ub85c\uceec \ud30c\uc77c\uc744 CascView / TACTLib\ub85c \ubd84\uc11d \u2462 \uac8c\uc784\ud50c\ub808\uc774 UDP \uc2a4\ud2b8\ub9bc(Command \u2194 Snapshot) \uc804\uc6a9 UDP (\uae30\ubcf8 63 Hz)\ud3ec\ud2b8 5060, 5062, 6250, 12000-64000 AES-CTR \uc804\uad6c\uac04 \uc554\ud638\ud654\ud0a4\ub294 \ub7f0\ud0c0\uc784 \uba54\ubaa8\ub9ac \uc548(OW2 = Key-Ring) \u2192 \uc678\ubd80\uc5d0\uc11c \ubcf5\ud638\ud654 \ubd88\uac00 \u2013 Wireshark <code>udp.port &gt;= 12000 &amp;&amp; udp.port &lt;= 64000</code>\u2013 \u201cFollow \u2192 UDP Stream\u201d\uc73c\ub85c \ud328\ud0b7 \uae38\uc774\u00b7RTT\u00b7\uc190\uc2e4 \ud1b5\uacc4\ub9cc \ud655\uc778\u2013 Payload \ud574\uc11d\uc740 \uc0ac\uc2e4\uc0c1 \ubd88\uac00\ub2a5 (\ud0a4 \ucd94\ucd9c\u00b7\uba54\ubaa8\ub9ac \ud6c4\ud0b9 \ud544\uc694) \u2463 \ud074\ub77c\uc774\uc5b8\ud2b8 \ub85c\uadf8\u00b7\ub85c\uceec \uc0c1\ud0dc <code>Overwatch/Logs/*.log</code> &amp; CASC <code>data/shmem</code>, <code>.idx</code> \ud3c9\ubb38 \ud14d\uc2a4\ud2b8 \ubdf0\uc5b4\u00b7010 Editor <pre><code>1) TLS \ud0a4 \ub85c\uae45\nsetx SSLKEYLOGFILE \"%USERPROFILE%\\tls.keys\"\n\n1) \uad00\ub9ac\uc790 \uad8c\ud55c\uc73c\ub85c Wireshark \uc2e4\ud589\n    - Capture filter: host 137.*.***.*** or udp\n    - TLS \u2023 (Pre-)Master-Secret log: %USERPROFILE%\\tls.keys\n\n 2) Overwatch2 \uc2e4\ud589 \u2192 \ub85c\uadf8\uc778 \u2192 \ud55c \ud310 \ud50c\ub808\uc774\n\n 3) Wireshark\n    a) HTTP \uc2a4\ud2b8\ub9bc: tcp.port==443 &amp;&amp; tls.app_data\n       \u00ad\u2192 Follow TCP Stream \u2192 JSON Body \ud655\uc778\n    b) UDP \uc2a4\ud2b8\ub9bc: udp.port&gt;=12000 &amp;&amp; udp.port&lt;=64000\n      \u00ad\u2192 Statistics \u25b8 I/O Graph \ub85c \ud2f1 \uc8fc\uae30\u00b7\uc190\uc2e4\ub960 \ud655\uc778\n</code></pre>"},{"location":"1-ow/#_7","title":"&gt; \ud074\ub77c\uc6b0\ub4dc \uc2a4\ud2b8\ub9ac\ubc0d \uc11c\ube44\uc2a4","text":"<p>DTLS-UDP \ucc44\ub110\uc5d0 \ucee8\ud2b8\ub864 \ud328\ud0b7\ub9cc \uc2e4\ub824 \uac04\ub2e4. SRTP \ucc44\ub110\uc740 \ubc18\ub300\ub85c \uc11c\ubc84\uac00 \uc778\ucf54\ub529\ud55c \uc601\uc0c1, \uc624\ub514\uc624 \uc2a4\ud2b8\ub9bc\uc744 \ub0b4\ub824\ubcf4\ub0b8\ub2e4.</p>"},{"location":"10-anti-cheat/","title":"10 anti cheat","text":"<p>\uc548\ud2f0\uce58\ud2b8 \ub17c\ubb38 - VMI \uc790\uccb4\ub97c \uac8c\uc2a4\ud2b8 \ucabd\uc5d0\uc11c \uac10\uc9c0\ud558\ub294 \ud734\ub9ac\uc2a4\ud2f1 \uc81c\uc548 https://www.researchgate.net/publication/345646485_Who_watches_the_watcher_Detecting_hypervisor_introspection_from_unprivileged_guests</p>"},{"location":"2-cheats/","title":"2 cheats","text":""},{"location":"2-cheats/#_1","title":"\ud575 \uc885\ub958\ub97c \uc54c\uc544\ubcf4\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-07-10</p>"},{"location":"2-cheats/#_2","title":"&gt; \uac00\ub2a5\ud55c \uc2dc\ub098\ub9ac\uc624","text":"<p>\uc694\uc998 \ud575\uc740 \uba54\ubaa8\ub9ac\uc5d0 \ub123\ub294 internal \uce58\ud2b8\ub294 \uc904\uc5b4\ub4e4\uace0, external \uce58\ud2b8\uac00 \ub298\uc5b4\ub0ac\ub2e4. \ub0b4\ubd80 \uce58\ud2b8 : (1) \uba54\ubaa8\ub9ac \uc778\uc81d\uc158 (2) \ucee4\ub110 \ub4dc\ub77c\uc774\ubc84 \uc678\ubd80 \uce58\ud2b8 : (1) \uc7a5\uce58 \uc774\uc6a9 (2) \uac00\uc0c1\uba38\uc2e0 \uc774\uc6a9</p> <ul> <li>AES-CTR \uc554\ud638\ud654\ub85c \ub124\ud2b8\uc6cc\ud06c \ub2e8\uc5d0\uc11c \uac00\ub85c\ucc44\ub294\uac74 \uac70\uc758 \ubd88\uac00\ub2a5. \ud3c9\ubb38\uc73c\ub85c \uc801\ud78c \uba54\ubaa8\ub9ac \uc21c\uac04 \ubcc0\uc870\ud574\uc57c \ud568.</li> </ul>"},{"location":"2-cheats/#_3","title":"&gt; \uba54\ubaa8\ub9ac \uc778\uc81d\uc158","text":"<p>\uc2a4\ub0c5\uc0f7\uc774 AES-CTR\ub85c \uc554\ud638\ud654\ub41c\ub2e4\ud574\ub3c4 \ub124\ud2b8\uc6cc\ud06c \uc804\uc1a1 \uc911\uc758 \ubcc0\uc870\ub97c \ub9c9\uc544\uc904 \ubfd0, \uacb0\uad6d \ud074\ub77c\uc774\uc5b8\ud2b8 \uba54\ubaa8\ub9ac \uc548\uc5d0\uc11c\ub294 \ub2e4\uc2dc \ud3c9\ubb38\uc774 \ub41c\ub2e4. \ub530\ub77c\uc11c \uadf8\uac78 \uc77d\uc5b4\uc640 \uc0c1\ub300 \ub370\uc774\ud130\ub97c \ud30c\uc545\ud558\uace0 \uadf8\uac78 \ubc14\ud0d5\uc73c\ub85c \ubcf8\uc778 \uc804\uc1a1 command \ud328\ud0b7\uc744 \uc870\uc791\ud574\uc11c \ubcf4\ub0b4\uba74 \ub41c\ub2e4.</p> <p>\uc624\ubc84\uc6cc\uce58\ub294 \uc774\ub97c \ub9c9\uae30 \uc704\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 \uc870\uce58\ub97c \ucde8\ud55c\ub2e4</p> <p>\uc11c\ubc84\uac00 \uac01 \ud074\ub77c\uc774\uc5b8\ud2b8 FOV\ub85c \ub808\uc774\uce90\uc2a4\ud305\ud574 \ubcf4\uc774\ub294 \uc624\ube0c\uc81d\ud2b8\ub9cc \uc2a4\ub0c5\uc0f7\uc5d0 \ud3ec\ud568\ud574\uc11c \ubcf4\ub0b8\ub2e4. \ubcbd \ub4a4 \uc790\ud45c, \ud788\ud2b8\ubc15\uc2a4, \ucfe8\ud0c0\uc784 \ub4f1\uc740 \uc560\ucd08\uc5d0 \ub0b4\ub824\uc624\uc9c0 \uc54a\ub294\ub2e4. \ub610\ud55c \ud074\ub77c\uc774\uc5b8\ud2b8 \uce21\uc5d0\ub3c4 \uc548\ud2f0\uce58\ud2b8\ub97c \ub123\uc5b4\ub193\ub294\ub2e4. warden \uc548\ud2f0\uce58\ud2b8\ub294 wow \uc2dc\uc808\ubd80\ud130 \uc0ac\uc6a9\ub41c \ube14\ub9ac\uc790\ub4dc \ub0b4\ubd80 \uc5d4\uc9c4\uc73c\ub85c, \uc11c\uba85 \uae30\ubc18 \ud504\ub85c\uc138\uc2a4 \uba54\ubaa8\ub9ac \uc2a4\uce94 \ubc29\uc2dd\uc774\ub2e4. Eidolon\uc740 \ucd5c\uadfc \ud328\uce58\uc5d0 \uc77c\uc2dc \ub3c4\uc785\ud558\uc5ec \uc870\uc815 \uc911\uc73c\ub85c, \ucf54\ub4dc \ud750\ub984 \ub09c\ub3c5\ud654 \ubc0f \uc548\ud2f0\ud0d0\ud37c \ubc29\uc2dd\uc774\ub2e4. \ucee4\ub110 \ub808\ubca8 \ub4dc\ub77c\uc774\ubc84\uae4c\uc9c0\ub294 \ub3c4\uc785\ud558\uc9c0 \uc54a\uc558\uc9c0\ub9cc battle.net \ub7f0\ucc98 \uad8c\ud55c\uc73c\ub85c HW \ube0c\ub808\uc774\ud06c, DMA \uc811\uadfc\uc744 \uac10\uc2dc\ud55c\ub2e4. \uc815\uc801 \ud574\uc2dc\ubfd0 \uc544\ub2c8\ub77c \ub7f0\ud0c0\uc784 \ubb34\uacb0\uc131 \uac80\uc0ac, heap Re-randomization\uc744 \uc8fc\uae30\uc801\uc73c\ub85c \ub3cc\ub824 \ud328\ud134 \uce58\ud2b8\ub97c \uc5b4\ub835\uac8c \ub9cc\ub4e0\ub2e4. \uc11c\ubc84 \uce21 Defense matrix \ubc31\uc5d4\ub4dc\ub97c \ud1b5\ud574 \uc2dc\uc98c 12 \uc804\ud6c4\ub85c AI \ubd84\uc11d + \ud589\ub3d9 \ud1b5\uacc4 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uac15\ud654\ud574 50\ub9cc \uacc4\uc815 \uc77c\uad04 \ubc34, \uce58\ud130\uc640 \ud30c\ud2f0\ud55c \ub3d9\ub8cc 4\ub9cc \uacc4\uc815\ub3c4 \ucd94\uac00 \uc81c\uc7ac \ud558\uc600\ub2e4. \ucf58\uc194\uc758 XIM-\ub958 \ub9c8\uc6b0\uc2a4 \ubcc0\ud658\uae30\ub3c4 \uc2e4\uc2dc\uac04 \ud0d0\uc9c0\ud55c\ub2e4. TLS \ud130\ub110 \ub0b4\ubd80\uc5d0\uc11c\ub3c4 \uc2dc\ud000\uc2a4 \ub118\ubc84 + AES-CTR + HMAC\uc744 \uc368\uc11c \uc911\uac04 \uc0bd\uc785, \ub9ac\ud50c\ub808\uc774\ub97c \ubd09\uc1c4\ud55c\ub2e4. \uc11c\ubc84\ub294 \ubb3c\ub9ac \ud55c\uacc4 \uac80\uc99d\uc744 \ub9e4 \ud2f1\ub9c8\ub2e4 \uc218\ud589\ud574 \uc218\uce58\uac00 \ube44\uc815\uc0c1\uc774\uba74 \ubc14\ub85c \ucde8\uc18c\ud55c\ub2e4.</p>"},{"location":"2-cheats/#_4","title":"&gt; \uc7a5\uce58 \uc774\uc6a9 \ud575 \uc2dc\ub098\ub9ac\uc624","text":"<ol> <li>\uac8c\uc784 \uc2e4\ud589</li> <li>PCle \ubc84\uc2a4 \ub9c8\uc2a4\ud130\ub85c \uc6d0\ud558\ub294 \ubb3c\ub9ac\uc8fc\uc18c \uc77d\uae30</li> <li>\ucea1\ucc98\uce74\ub4dc\ub85c \uac8c\uc784 \ud654\uba74 \uc815\ubcf4 \uc77d\uae30</li> <li>\ucf00\uc774\ube14\uc744 \ud1b5\ud574 \ub450\ubc88\uc9f8 PC\ub85c \ub370\uc774\ud130 \uc804\uc1a1</li> <li>ESP/\uc5d0\uc784\ubd07 \uc571\uc774 \uc88c\ud45c, \uccb4\ub825 \ub4f1 \ud30c\uc2f1\ud574\uc11c \ud574\uc11d</li> <li>\uc624\ubc84\ub808\uc774\ub098 \ubcc4\ub3c4 \ubaa8\ub2c8\ud130\uc5d0 \uc6d4\ud575 \ud45c\uc2dc</li> <li>KMBox, Cronus Zen \ub4f1\uc774 \ud328\ub4dc/\ud0a4\ubcf4\ub4dc HID \uc2e0\ud638\ub85c \ubcc0\ud658\ud558\uc5ec \uc804\uc1a1</li> </ol>"},{"location":"2-cheats/#-dma","title":"&gt; \uba54\ubaa8\ub9ac \uac00\uc838\uc624\uae30 - DMA \uce74\ub4dc","text":"<p>Direct Memory Access \uce74\ub4dc. PCle \uc2ac\ub86f\uc5d0 \uaf42\ub294 \uc791\uc740 FPGA \ubcf4\ub4dc\uc774\ub2e4. \uc6d0\ub798\ub294 \ub514\ubc84\uae45\uc774\ub098 \ud3ec\ub80c\uc2dd \uc6a9\ub3c4\ub85c \uc2dc\uc2a4\ud15c RAM\uc744 \uace0\uc18d\uc73c\ub85c \uc77d\uac70\ub098 \uc4f8 \ub54c \uc4f0\uc774\ub294\ub370, \uce58\ud130\ub4e4\uc740 \uc774 \ub2a5\ub825\uc744 \uc774\uc6a9\ud574 CPU, OS, \uc548\ud2f0\uce58\ud2b8\uac00 \ubaa8\ub974\ub294 \uc0ac\uc774\uc5d0 \uac8c\uc784 \ud504\ub85c\uc138\uc2a4\uc758 \uba54\ubaa8\ub9ac\ub97c \uadf8\ub300\ub85c \ud6d1\uc5b4\ubcf8\ub2e4.</p> <p>\uc548\ud2f0\uce58\ud2b8\uc758 \ub300\uc751 -&gt; \uac8c\uc784 \ucabd\uc5d0\ub294 \uc18c\ud504\ud2b8\uc6e8\uc5b4\ub098 \ub4dc\ub77c\uc774\ubc84\uc870\ucc28 \uc124\uce58\ub418\uc9c0 \uc54a\uc73c\ubbc0\ub85c \uc804\ud1b5\uc801 \ud504\ub85c\uc138\uc2a4 \uac80\uc0ac\uac00 \ud1b5\ud558\uc9c0 \uc54a\ub294\ub2e4. \uc774\ub97c \ub300\uc751\ud558\uae30 \uc704\ud574 PCle \uc2ac\ub86f\uc744 \ub364\ud504\ud558\uc5ec \uc218\uc0c1\ud55c VID\ub97c block\ud55c\ub2e4. \ub610\ub294 IOMMU\ub97c \ucf1c\uc11c \uba54\ubaa8\ub9ac \ub9f5 \uc811\uadfc\ud558\ub824\uba74 DMA Remapping \ud1b5\uacfc\ub97c \ud558\ub3c4\ub85d \ud55c\ub2e4. \ub610\ub294 \uc11c\ubc84 \ud589\ub3d9\uc744 \ubd84\uc11d\ud558\uac70\ub098, PCI config \uacf5\uac04\uc758 ROM \ud574\uc2dc\ub97c \ube44\uad50\ud574 \ud38c\uc6e8\uc5b4\ub97c \uac80\uc0ac\ud55c\ub2e4.</p>"},{"location":"2-cheats/#-","title":"&gt; \ud654\uba74 \uc815\ubcf4 \uac00\uc838\uc624\uae30 - \ucea1\ucc98 \uce74\ub4dc","text":"<p>\ucea1\ucc98 \uce74\ub4dc\uac00 \ubb50\ub0d0? \ud654\uba74\uc744 \uce74\uba54\ub77c \ud53c\ub4dc\ucc98\ub7fc \ubf51\uc544\uc624\uae30. \uc6d0\ub798\ub294 PC\uc758 HDMI \ucd9c\ub825\uc744 \ubc1b\uc544 USB 3.0 \ub4f1\uc73c\ub85c \ub450\ubc88\uc9f8 PC\uc5d0 \ubcf4\ub0b4\uace0, OBS \uac19\uc740 \uc2a4\ud2b8\ub9ac\uba38 \uc571\uc774 \uc778\ucf54\ub529, \uc1a1\ucd9c\ud55c\ub2e4. \uc774\ub97c \uc774\uc6a9\ud574 AI \uc5d0\uc784\ubd07\uc5d0\uc11c\ub294 \uce58\ud2b8 PC\uc5d0 \ubcf4\ub0b4 YOLO-v8/ViT \ub4f1\uc73c\ub85c \uc801 \uc2e4\ub8e8\uc5e3, \uba38\ub9ac \uc704\uce58\ub97c \ucd94\uc801\ud55c\ub2e4. \uadf8\ub798\uc11c \uacb0\uacfc \uc88c\ud45c\ub97c Cronus Zen, KMBox \uac19\uc740 \uc785\ub825 \uc7a5\uce58\ub85c \ubcc0\ud658\ud574 \uc5ed\uc8fc\uc785 \ud558\ub294 \uac83\uc774\ub2e4.</p>"},{"location":"2-cheats/#-yolo-v8-vit","title":"&gt; \ud654\uba74 \uc815\ubcf4 \ud30c\uc2f1\ud558\uae30 - YOLO-v8 / ViT","text":"<p>\uc801 \uc2e4\ub8e8\uc5e3, \uba38\ub9ac \uc704\uce58\ub97c \ucd94\uc801\ud55c\ub2e4.</p>"},{"location":"2-cheats/#-hid-cronus-zen-xim","title":"&gt; \uac12 \uc8fc\uc785\ud558\uae30 - HID Cronus Zen / XIM","text":"<p>HID\uac00 \ubb50\ub0d0? Human Interface Device. \uc785\ub825\uc774\uba74 \ub2e4 \uc5ec\uae30\ub85c \ud1b5\uc77c. \ud0a4\ubcf4\ub4dc \ub9c8\uc6b0\uc2a4 \uac8c\uc784\ud328\ub4dc \ud130\uce58\ud328\ub4dc \uc804\ubd80. \uc6b4\uc601\uccb4\uc81c\ub294 VID(\uc81c\uc870\uc0ac)/PID(\uc81c\ud488) \uac12\ub9cc \ubcf4\uace0 \uc790\ub3d9\uc73c\ub85c \ubc94\uc6a9 \ub4dc\ub77c\uc774\ubc84\ub97c \ubd99\uc774\ubbc0\ub85c, Cronus Zen, KMBox \uac19\uc740 \uc7a5\uce58\uac00 \"\ub098\ub294 \ud3c9\ubc94\ud55c Xbox \ud328\ub4dc\ub2e4\"\ub77c\uace0\ub9cc \uc120\uc5b8\ud558\uba74 \uadf8\ub300\ub85c \ub3d9\uc791\ud55c\ub2e4. \uc548\ud2f0\uce58\ud2b8\uac00 \uc18c\ud504\ud2b8\uc6e8\uc5b4\uc801\uc73c\ub85c \uad6c\ubd84\ud558\uae30 \uc5b4\ub824\uc6b4 \uc774\uc720\uac00 \ubc14\ub85c \uc774 HID \uc704\uc7a5\uc131\uc774\ub2e4.</p> <p>\uc885\ub958\ub294 Cronus zen, XIM, Strike pack \ub4f1\uc774 \uc788\ub2e4.</p> <p>Cronus zen\uc774 \ubb50\ub0d0? \ucee8\ud2b8\ub864\ub7ec\uc5d0 \ub9e4\ud06c\ub85c\ub97c \uc2ec\ub294\ub2e4. USB \ub3d9\uae00 \ud615\ud0dc\ub85c, \ud55c\ucabd\uc740 \ud328\ub4dc, \ub2e4\ub978 \ucabd\uc740 \ucf58\uc194\uc5d0 \uc5f0\uacb0\ud55c\ub2e4. \uadf8\ub798\uc11c \uc785\ub825\uc744 \uc77d\uc5b4 \uc62c\ub9b0 \ub4a4, \ub0b4\ubd80 GPC \uc2a4\ud06c\ub9bd\ud2b8 \ub85c\uc9c1\uc744 \uc218\ud589\ud558\uc5ec \uc218\uc815\ub41c \uc785\ub825\uc744 \ub2e4\uc2dc \ud328\ub4dc\ucf58\uc194\ub85c \uc804\ub2ec\ud55c\ub2e4. OS\uc5d4 \uc21c\uc218 HID\ub85c \ubcf4\uc774\ubbc0\ub85c \ub4dc\ub77c\uc774\ube0c\ub098 \ub808\uc9c0\uc2a4\ud2b8\ub9ac \ud754\uc801\uc774 \uc5c6\ub2e4. 2025\ub144\ubd80\ud130 OW2\ub294 \ube44\uc778\uac00 VID/PID \uac10\uc9c0 \uc2dc PC \ud480 \uac15\uc81c \ub9e4\uce6d\uc744 \uc2dc\uc791\ud588\ub2e4.</p> <p>XIM\uc774 \ubb50\ub0d0? \uac01 \uac8c\uc784\uc758 \uc2a4\ud2f1 \ub9c8\uc6b0\uc2a4 \uace1\uc120\uc744 \ubd84\uc11d\ud574 \uac00\uc7a5 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \uc5d0\uc784\uc744 \uc81c\uacf5\ud55c\ub2e4.</p> <p>KMBox\ub294 DMA, AI \uc138\ud2b8\uc758 \ub85c\ubd07 \ud314\uc774\ub2e4. \uc791\uc740 FPGA/MCU \ubcf4\ub4dc\uc5d0 2\uac1c\uc758 USB(\uac8c\uc774\ubc0d PC\uc640 \uce58\ud2b8 PC)\ub85c \uad6c\uc131\ub418\uc5b4 \uc788\ub2e4. \uce58\ud2b8 PC\uac00 \uc5d0\uc784 \uac01\ub3c4 \ub4f1\uc744 \uacc4\uc0b0\ud558\uc5ec KMBox\ub85c \uba85\ub839\uc744 \uc804\uc1a1\ud558\uba74 \ubb3c\ub9ac HID \uc2e0\ud638(\uc815\uad50\ud55c \ub9c8\uc6b0\uc2a4 \ub378\ud0c0, \ud0a4 \uc785\ub825)\ub85c \ubc14\uafd4 \uac8c\uc774\ubc0d PC\uc5d0 \uc8fc\uc785\ud55c\ub2e4. \uc624\uc998\uc740 USB\uac00 \uc544\ub2c8\ub77c LAN \ud3ec\ud2b8\ub85c \ud558\uae30\ub3c4 \ud55c\ub2e4.</p>"},{"location":"2-cheats/#_5","title":"&gt; \uac00\uc0c1\uba38\uc2e0 \uc774\uc6a9 \ud575 \uc2dc\ub098\ub9ac\uc624","text":"<p>VMI (\uac00\uc0c1\ubc84\uc2e0 \uc778\ud2b8\ub85c\uc2a4\ud399\uc158) \uce58\ud2b8\ub77c\uace0 \ubd88\ub9b0\ub2e4.</p> <p>\ud558\uc774\ubc84\ubc14\uc774\uc800\uac00 \uac8c\uc2a4\ud2b8 VM \uc548\uc758 \uba54\ubaa8\ub9ac\ub97c \uc9c1\uc811 \uc5ff\ubcf4\uace0 \uac8c\uc784 \uc815\ubcf4\ub97c \ube7c\ub0b4\uac70\ub098 \uc870\uc791\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4. \uce58\ud2b8 \ucf54\ub4dc\uac00 \uac8c\uc784 \ud504\ub85c\uc138\uc2a4 \uc548, \uc708\ub3c4\uc6b0 \ucee4\ub110 \uc548\uc5d0 \uc804\ud600 \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294\ub2e4\ub294 \uc810\uc744 \uc774\uc6a9\ud574 \uc548\ud2f0\uce58\ud2b8\ub97c \uc6b0\ud68c\ud55c\ub2e4.</p> <p>host \ubb3c\ub9ac \uba38\uc2e0\uc5d0 KVM/XEN/Hyper-V \ub4f1 \ud558\uc774\ud37c\ubc14\uc774\uc800\uac00 \uc874\uc7ac\ud558\uace0, LibVMI\ub098 altp2m API\ub97c \ud1b5\ud574 \uac8c\uc2a4\ud2b8 RAM \ud398\uc774\uc9c0\ub97c \ub9e4\ud551\ud55c\ub2e4. \ub610\ud55c VMI Cheat \ud504\ub85c\uc138\uc2a4\ub97c \ub3cc\ub824 \uc6d4\ud575\uacfc trigger-bot \ub4f1\uc744 \uc791\ub3d9\uc2dc\ud0a8\ub2e4. Guest \uac00\uc0c1 \uba38\uc2e0\uc5d0\ub294 \uc77c\ubc18 \uc708\ub3c4\uc6b0\ub97c \uc124\uce58\ud558\uace0 \uac8c\uc784\uc774 \ub3cc\uc544\uac04\ub2e4. \ub530\ub77c\uc11c VMI \ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 SLAT \ud14c\uc774\ube14\uc744 \ub530\ub77c\uac00\uc11c \uc6d0\ud558\ub294 \uac8c\uc2a4\ud2b8 \uac00\uc0c1\uc8fc\uc18c\ub97c \ud638\uc2a4\ud2b8 \ubb3c\ub9ac\uc8fc\uc18c\ub85c \ud55c\uc0b0\ud558\uc5ec \uba54\ubaa8\ub9ac\ub97c \ub364\ud504\uc2dc\ud0a4\uba74 \ub41c\ub2e4. \uadf8\ub798\uc11c \ud544\uc694\ud55c \uac12\uc744 \uc77d\uac70\ub098 \uc368\uc11c \uce58\ud2b8\ub97c \uc2e4\ud589\ud55c\ub2e4.</p> <p>\ubc29\uc2dd\uc740 \ud3f4\ub9c1\uacfc Page-guard \ubc29\uc2dd\uc774 \uc788\ub2e4. \ud3f4\ub9c1\uc740 \ucd08\ub2f9 60x \uba54\ubaa8\ub9ac \ube14\ub85d \uc77d\uc5b4 Radar / Wallhack \uc815\ubcf4\ub97c \ud68d\ub4dd\ud558\ub294 \uac83\uc774\ub2e4. page-guard \ubc29\uc2dd\uc740 \ud2b9\uc815 \uc88c\ud45c \uac12\uc774 \ubc14\ub00c\uba74 \ud2b8\ub9ac\uac70\ubd07\uc774 \ubc14\ub85c \ucd1d\uc744 \ubc1c\uc0ac\ud558\ub294 \uac83\uc774\ub2e4. \uadf8\ub9ac\uace0 OVerlay \uc2a4\ub808\ub4dc\uac00 OpenGL \uc708\ub3c4\uc6b0\uc5d0 \uc6d4\ud575 \uc2a4\ucf08\ub808\ud1a4\uc744 \ub80c\ub354\ub9c1\ud558\uace0, \uc785\ub825 \uc2a4\ub808\ub4dc\ub294 KMBox\ub97c \ud1b5\ud574 \ub9c8\uc6b0\uc2a4 \u0394 \uac12\uc744 \uc804\uc1a1\ud55c\ub2e4.</p> <p>\ud074\ub77c\uc6b0\ub4dc\ud615\uc73c\ub85c \uce58\ud2b8 \uc11c\ube44\uc2a4\ub3c4 \uac00\ub2a5\ud558\ub2e4. AWS m6a \uc778\uc2a4\ud134\uc2a4\uc5d0\uc11c\ub3c4 \uc131\uacf5 \uc0ac\ub840 \ubcf4\uace0.</p>"},{"location":"2-cheats/#vmi","title":"&gt; VMI \uce58\ud2b8\uc758 \uc548\ud2f0\uce58\ud2b8","text":"<p>\uc548\ud2f0\uce58\ud2b8\uc758 \ub300\uc751 -&gt; \uac00\uc0c1\ud654 \uc790\uccb4\ub97c \ube14\ub85c\ud0b9\ud55c\ub2e4. VM \ube44\ud2b8, Hyper-V \uc81c\uc5b4 \ub808\uc9c0\uc2a4\ud130 \uac80\uc0ac\ud558\uc5ec \ubabb\ud558\uac8c \ub9c9\ub294\ub2e4. \ud639\uc740 TPM-based Measurement\ub85c VM \ubb34\uacb0\uc131\uc744 \uac80\uc99d\ud558\uac70\ub098, \uc11c\uba85\ub418\uc9c0 \uc54a\uc740 Hyper-V \ub8e8\ud2b8\ud30c\ud2f0\uc158\uc744 \uac70\ubd80\ud55c\ub2e4. \uc544\ub2c8\uba74 EPT/PT \ub9ac\ub9f5 \ud638\ucd9c \ube48\ub3c4, LibVMI I/O \ud328\ud134\uc744 \ucee4\ub110 \ub4dc\ub77c\uc774\ubc84\uc5d0\uc11c \uce74\uc6b4\ud2b8\ud558\uc5ec \uc784\uacc4\uac12 \ucd08\uacfc\uc2dc \uc138\uc158\uc744 \ucc28\ub2e8\ud55c\ub2e4. \ub610, \ud638\uc2a4\ud2b8 AWS, Azure \ub124\ud2b8\uc6cc\ud06c \ub300\uc5ed\uc5d0\uc11c \uc0dd\uc131\ub41c \uc758\uc2ec \ub2e4\uc911 \uc138\uc158\uc744 \uc790\ub3d9 \ucd94\uc801\ud574 \uc815\uc9c0\uc2dc\ud0a8\ub2e4.</p>"},{"location":"2-cheats/#_6","title":"&gt; \ud575\uc2ec \ucc38\uace0 \uc790\ub8cc","text":"<p>VIC \ub17c\ubb38 - VMI \uae30\ubc18 \uc6d4\ud575\uacfc \ud2b8\ub9ac\uac70\ubd07\uc744 \uad6c\ud604\ud574 \ud0d0\uc9c0 \ubc29\uc9c0 \uc131\ub2a5\uc744 \uce21\uc815\ud55c\ub2e4. https://arxiv.org/pdf/2502.12322</p>"},{"location":"2-cheats/#_7","title":"&gt; \uc5f0\uad6c\uc6a9 \ucd5c\uc18c \uc7ac\ud604 \ud658\uacbd","text":"<p>VMI \uce58\ud2b8 Host OS : ubuntu 24.04 (5.15+\ucee4\ub110,KVM) \ud558\uc774\ud37c\ubc14\uc774\uc800 : qemu-kvm + intel VT-d/AMD-V (IOMMU on) GPU \ud328\uc2a4\uc2a4\ub8e8 : NVIDIA RTX 20xx \uc774\uc0c1 \ub610\ub294 AMD RDNA2 \uc774\uc0c1 VMI \ub77c\uc774\ube0c\ub7ec\ub9ac : LibVMI 0.14 + PyVMI, altp2m(Xen) \uc635\uc158 \ud544\uc694\uc2dc Xen 4.18 HID \ube0c\ub9ac\uc9c0 : KMBox(USB)\ub098 Zen\ub958\ub098 uinput+virtio-input \uc791\ub3d9 \ubc29\uc2dd : \ud3f4\ub9c1 read_pa() \ubc18\ubcf5\uc740 \uad6c\ud604\uc774 \uac04\ub2e8\ud558\uace0 \ud504\ub808\uc784 \uc601\ud5a5\uc774 \uc801\ub2e4. page-guard\ub294 \ud2b8\ub9ac\uac70\ubd07\uc5d0\ub294 \uc774\uc0c1\uc801\uc774\uc9c0\ub9cc VM \ud504\ub9ac\uc988 \uc704\ud5d8\uc774 \uc788\ub2e4. ESP \ud45c\uc2dc : host virtio-gpu 2nd head + PyOpenGL \ucc3d Trigger : host uinput \ub514\ubc14\uc774\uc2a4\uc5d0 BTN_LEFT down/up \uc4f0\uae30 \uc9c0\uc5f0 \uce21\uc815 : Guest PresentMon FPS \ub85c\uadf8 + Host time.time() \ube44\uad50</p> <p>\uc548\ud2f0\uce58\ud2b8 \uac00\uc0c1\ud654 \ud0d0\uc9c0 : CPUID bit, TSC \uc2ac\ub9bd, ACPI DMAR \ud14c\uc774\ube14 \ubcc0\uacbd \ud0d0\uc9c0 EPT \ud638\ucd9c \ud328\ud134 : KVM trace\ub85c EPT violation \ube48\ub3c4 \uce21\uc815\ud558\uc5ec ML\ub85c \ubd84\ub958 GPU \ud328\uc2a4\uc2a4\ub8e8 : PCI config vendor != 0x10DE &amp; passthru flag LibVMI \ud638\ucd9c : \uc790\uccb4 API, LibVMI symbol \uc81c\uac70 \ud6c4 \ube44\uad50</p>"},{"location":"2-cheats/#_8","title":"&gt; \uc124\uce58 \ubaa8\ub4c8","text":"<p>LibVMI - VMI\uc758 \ud45c\uc900 C \ub77c\uc774\ube0c\ub7ec\ub9ac. \uc5b8\uc5b4\ub294 C\ub85c, Xen, KVM/QEMU, VMwart, VirtualBox\ub97c \uc9c0\uc6d0\ud55c\ub2e4. VMI\uc5d0\uc11c \uac00\uc7a5 \ub110\ub9ac \uc4f0\uc774\ub294 \uc911\uac04 \uacc4\uce35 AIP\uc774\ub2e4.</p> <p>PyVMI - LibVMI\uc758 \ud30c\uc774\uc36c \ubc14\uc778\ub529 CFFI\ub85c LibVMI API\ub97c \uadf8\ub300\ub85c \ub178\ucd9c\ud55c thin wrapper. \ud30c\uc774\uc36c \ubc14\uc778\ub529\uc774\ub780 c\ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c python \uac1d\uccb4\uc640 \ud568\uc218\ub85c \uac10\uae50 \ubaa8\ub4c8\uc774\ub2e4.</p> <p>r2vmi - vmi \ub514\ubc84\uac70 \ud50c\ub7ec\uadf8\uc778 \ud558\uc774\ud37c\ubc14\uc774\uc800 \ub808\ubca8 \ub514\ubc84\uae45 \ub3c4\uad6c. radare2 \ucf58\uc194\uc5d0\uc11c r2 vmi://win10:PID \uc2dd\uc73c\ub85c vm \ub0b4\ubd80 \ud504\ub85c\uc138\uc2a4\ub97c \ubd84\uc11d \uac00\ub2a5.</p> <p>altp2m - alternate second-level page tables, \uc989 \ub2e4\uc911 EPT. Xen\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \uae30\uc220</p>"},{"location":"2-cheats/#_9","title":"&gt; \uba54\ubaa8\ub9ac \uc704\uce58 \ucc3e\uae30","text":"<p>\uce58\ud2b8 \uac1c\ubc1c\uc790\ub294 \uba3c\uc800 \uce58\ud2b8\uc5d0 \ud544\uc694\ud55c \uad6c\uc870\uccb4 \ubc0f \uc815\ubcf4\uac00 \uba54\ubaa8\ub9ac \uc5b4\ub514\uc5d0 \uc800\uc7a5\ub418\uc5b4 \uc788\ub294\uc9c0\ub97c \uc2dd\ubcc4\ud574\uc57c \ud55c\ub2e4. \uc774\ub7ec\ud55c \uc624\ud504\uc14b\uc744 \ucc3e\uae30 \uc704\ud55c \ucd5c\ucd08 \ubd84\uc11d \ub2e8\uacc4\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ub3c4\uad6c\ub97c \ud1b5\ud574 \uc218\ud589\ub41c\ub2e4.</p> <p>\ub514\uc2a4\uc5b4\uc148\ube14\ub7ec : IDA, Ghidra \uba54\ubaa8\ub9ac \uc2a4\uce90\ub108 : Cheat Engine \ub364\ud37c \uac8c\uc784 \ud574\ud0b9 \ud3ec\ub7fc : MPGH, UnknwonCheats</p> <p>\uce58\ud2b8 \uac1c\ubc1c \ub3c4\uad6c - CheatEngine\uacfc ReClass CheatEngine\uc740 \ucd5c\uadfc DBVM\uc774\ub77c\ub294 Type-1 \ud558\uc774\ud37c\ubc14\uc774\uc800\ub97c \ub3c4\uc785\ud558\uc600\ub2e4. \ubd80\ud305 \uc2dc os\uc640 \ud568\uaed8 USB\ub85c \ub85c\ub4dc\ud574\uc57c\ud55c\ub2e4. \ud558\uc9c0\ub9cc \uc774\ub294 \uce58\ud2b8\uc640 \uac8c\uc784\uc774 \uac19\uc740 os\uc5d0\uc11c \uc791\ub3d9\ud574\uc57c \ud568\uc744 \uc758\ubbf8\ud55c\ub2e4. Type-2 \ud558\uc774\ud37c\ubc14\uc774\uc800\uac00 \ud6e8\uc52c \uc88b\uc740 \uad6c\uc870\uc774\ub2e4.</p>"},{"location":"2-cheats/#_10","title":"&gt; \uc704\uce58 \ucc3e\uc73c\uba74","text":"<p>step 1. \uba54\ubaa8\ub9ac \uc77d\uae30 LibVMI\ub294 \uac8c\uc2a4\ud2b8 VM\uc758 \ud398\uc774\uc9c0 \ud14c\uc774\ube14(SLAT:Second level address table)\uc5d0 \uc811\uadfc\ud55c\ub2e4. \uc774\ub294 EPT (Extended page table) \ub610\ub294 NPT (Nested Page Table)\uc744 \ud1b5\ud574 \uad6c\ud604\ub41c\ub2e4. \ub530\ub77c\uac00\uc11c \ud638\uc2a4\ud2b8 \ubb3c\ub9ac \uc8fc\uc18c\ub97c \ucc3e\uc544\ub0b4\uace0, \uadf8 \ud398\uc774\uc9c0\ub97c \uc77d\uc5b4\uc628\ub2e4. step 2. \uba54\ubaa8\ub9ac \uc4f0\uae30 \uc77d\uae30\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c \uc704\uce58\ub97c \ucc3e\uc544 \uac1a\uc744 \ub36e\uc5b4\uc4f4\ub2e4 step 3. \ud398\uc774\uc9c0 \uac00\ub4dc \uc608\uc678 \ud2b9\uc815 \uba54\ubaa8\ub9ac \ud398\uc774\uc9c0\uc758 gfn(guest frame number) \ube44\ud2b8\ub97c \ubc14\uafd4 \ud398\uc774\uc9c0 \ud3f4\ud2b8\ub97c \uc720\ub3c4\ud558\uace0, \ucf5c\ubc31\uc744 \ub4f1\ub85d\ud55c\ub2e4. \uac12\uc774 \ubc14\ub014\ub54c\ub9cc \ucf5c\ubc31\uc774 \ubd88\ub824 \ud6a8\uc728\uc801\uc774\uba70, \ud2b8\ub9ac\uac70\ubd07\ucc98\ub7fc \uc774\ubca4\ud2b8 \uae30\ubc18 \uce58\ud2b8\uc5d0 \ucd5c\uc801. step 4. \uc785\ub825 \uc5d0\ubbac\ub808\uc774\uc158 qemu machine protocol\uc740 \uc18c\ucf13 \uae30\ubc18 json rpc. \ud638\uc2a4\ud2b8\uac00 \uac00\uc9dc \ub9c8\uc6b0\uc2a4 \uc774\ub3d9\uacfc \ud074\ub9ad\uc744 \ubcf4\ub0b4\uba74 \uac8c\uc2a4\ud2b8\ub294 \uc9c4\uc9dc HID \uc774\ubca4\ud2b8\ub85c \uc778\uc2dd\ud574 \uc548\ud2f0\uce58\ud2b8\uac00 \uad6c\ubd84 \ubd88\uac00. step 5. \uc624\ubc84\ub808\uc774 DirectX/OpenGL \ud6c5\uc744 \uc4f8 \ud544\uc694\ub3c4 \uc5c6\uc774 \ud638\uc2a4\ud2b8 OS\uc5d0\uc11c \ud22c\uba85 \ucc3d\uc744 \uc62c\ub824\ub193\ub294\ub2e4.</p>"},{"location":"2-cheats/#_11","title":"&gt; \uce58\ud2b8 \uc2a4\ub808\ub4dc \uad6c\ud604","text":"<p>\uba54\uc778 \uc2a4\ub808\ub4dc : \uac8c\uc784\uc5d0\uc11c \uc815\ubcf4\ub97c \uc77d\uc5b4\uc628\ub2e4 UI \uc2a4\ub808\ub4dc : \ud654\uba74\uc5d0 \ud544\uc694\ud55c \uc815\ubcf4\ub97c \ub80c\ub354\ub9c1\ud55c\ub2e4.</p> <p>\uba54\uc778\uc2a4\ub808\ub4dc\ub294 \ub450 \uac00\uc9c0 \ubc84\uc804\uc73c\ub85c \ub098\ub25c\ub2e4. \uc77c\uc815 \uc8fc\uae30\ub85c \uba54\ubaa8\ub9ac\ub97c \uc77d\ub294 \ubc29\uc2dd\uacfc, \ud398\uc774\uc9c0 \uac00\ub4dc \uc608\uc678\ub97c \ud65c\uc6a9\ud558\uc5ec \uc774\ubca4\ud2b8 \uae30\ubc18\uc73c\ub85c \ucf5c\ubc31\uc744 \uc2e4\ud589\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4. \ub300\ubd80\ubd84\uc758 \uce58\ud2b8 \uad6c\ud604\uc5d0\uc11c \uc804\uc790\ub97c \uc0ac\uc6a9\ud558\uace0, \ud3ec\ud2b8\ub9ac\uc2a42\uc758 \ud2b8\ub9ac\uac70\ubd07\uc5d0\uc11c\ub9cc \ud6c4\uc790\ub97c \ucd94\uac00\ub85c \uc81c\uacf5\ud558\uc600\ub2e4.</p> <p>\uc54c\uace0\ub9ac\uc998 1 - \ud3f4\ub9c1 <pre><code>gameValues \u2190 Array[PlayerObject, PlayerObject, ...]\nuiThread \u2190 Thread(gameValues)             \u25b6 \ubc30\uc5f4 \ucc38\uc870\ub97c UI \uc2a4\ub808\ub4dc\uc5d0 \uc804\ub2ec\nuiThread.start()                          \u25b6 UI \uc2a4\ub808\ub4dc \uc2dc\uc791\n\nwhile gameIsRunning do\n    UpdateGameValues(gameValues)         \u25b6 \uba54\ubaa8\ub9ac \uac12 \uc5c5\ub370\uc774\ud2b8\n    Sleep(TimeInMilliseconds)            \u25b6 \uc77c\uc815 \uc2dc\uac04 \ub300\uae30\nend while\n</code></pre></p> <p>\uc54c\uace0\ub9ac\uc998 2 - \ud398\uc774\uc9c0 \uac00\ub4dc <pre><code>procedure CALLBACKA(newAddressValue)\n    JUMP()\nend procedure\n\nprocedure CALLBACKB(newAddressValue)\n    STARTSHOOTING()\nend procedure\n\nprocedure MAIN\n    addressList \u2190 Array[int, int]\n    registerException(addressList[0], CallbackA)\n    registerException(addressList[1], CallbackB)\n    ListenForExceptionEvents()\nend procedure\n</code></pre></p>"},{"location":"2-cheats/#_12","title":"&gt; \uc6d4\ud575","text":"<p>(1) \uac8c\uc784 \uba54\ubaa8\ub9ac\uc758 \ud2b9\uc815 \uc624\ud504\uc14b\uc744 \uc77d\uc5b4\uc11c \uac8c\uc784 \uc138\uacc4 \ub0b4\uc758 \ud50c\ub808\uc774\uc5b4 3D \uc88c\ud45c\ub97c \uc54c\uc544\ub0b4\uae30. (2) world space\ub85c \uac01 \ud56d\ubaa9\ub4e4\uc744 \ubc30\uce58\ud558\uae30. (3) 4x4 View matrix\ub97c \ud1b5\ud574 view space\ub85c \ubcc0\ud658. (4) Projection matrix\ub97c \ud1b5\ud574 2D \uc2a4\ud06c\ub9b0 \uc88c\ud45c\uacc4\ub85c \ubcc0\ud658\ud558\uae30.</p> <p>\uc774\uac78 World-to-Screen \ubcc0\ud658\uc774\ub77c\uace0 \ubd80\ub978\ub2e4.</p> <p>Or_X \u2212 Axis.x  Or_Y \u2212 Axis.x  Or_Z \u2212 Axis.x  T.x Or_X \u2212 Axis.y  Or_Y \u2212 Axis.y  Or_Z \u2212 Axis.y  T.y Or_X \u2212 Axis.z  Or_Y \u2212 Axis.z  Or_Z \u2212 Axis.z  T.z 0               0                 0           1 \uc0c8\ub85c\uc6b4 \uacf5\uac04\uc5d0\uc11c\uc758 x\ucd95 \ubc29\ud5a5 y\ucd95 \ubc29\ud5a5     z\ucd95 \ubc29\ud5a5   \uac1d\uccb4\uc758 \uc704\uce58</p>"},{"location":"2-cheats/#_13","title":"&gt; \ud2b8\ub9ac\uac70\ubd07","text":"<p>(1) \ub85c\uceec \ud50c\ub808\uc774\uc5b4\uac00 \uc801 \uc544\ubc14\ud0c0\ub97c \uc870\uc900\ud558\uace0 \uc788\ub294\uc9c0 \uc2dd\ubcc4 (2) \uc5b8\uc81c \uc0ac\uaca9\uc744 \uc2dc\uc791\ud558\uac70\ub098 \uba48\ucdb0\uc57c \ud558\ub294\uc9c0\ub97c \ub85c\uceec \ud50c\ub808\uc774\uc5b4\uc5d0\uac8c \uc804\ub2ec</p> <p>\uc2dd\ubcc4\uc740 \ub458 \uc911 \ud558\ub098\uc758 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud55c\ub2e4. \uac8c\uc784 \uba54\ubaa8\ub9ac\uc5d0\uc11c \uc870\uc900\uc120\uc758 \uacb0\uacfc\ub97c \uc800\uc7a5\ud558\ub294 \uc8fc\uc18c\ub97c \ucc3e\uc544 \uc77d\uae30, \ub610\ub294 \uc801 \uc544\ubc14\ud0c0\uc758 \uc2a4\ud06c\ub9b0 \uc704\uce58\uc640 \uc870\uc900\uc120\uc758 \uc704\uce58\ub97c \ube44\uad50\ud558\uae30.</p> <p>\uc0ac\uaca9 \uacb0\uc815\uc740 \ub458 \uc911 \ud558\ub098\uc758 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud55c\ub2e4. \uac8c\uc784 \ud504\ub85c\uc138\uc2a4\ub97c \uc2a4\uce94\ud558\uc5ec \uc0ac\uaca9 \uc0c1\ud0dc\ub97c \uc81c\uc5b4\ud558\ub294 \uba54\ubaa8\ub9ac \uc8fc\uc18c\ub97c \ucc3e\uc544 \uc6d0\ud560 \ub54c write, \ub610\ub294 QMP \uac19\uc740 \uc6d0\uaca9 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc0ac\uc6a9\ud574 \uc785\ub825 \uc7a5\uce58\ub97c \uc5d0\ubbac\ub808\uc774\uc158 \uc804\ub2ec.</p>"},{"location":"3-display/","title":"3 display","text":""},{"location":"3-display/#_1","title":"\ub514\uc2a4\ud50c\ub808\uc774 \uacf5\ubd80","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-08-02</p>"},{"location":"3-display/#_2","title":"\uc624\ubc84\uc6cc\uce58 \ub514\uc2a4\ud50c\ub808\uc774 \uc774\ud574","text":"<p>[\ud638\uc2a4\ud2b8 Linux] \u2500\u2500(VFIO/PCIe \ud328\uc2a4\uc2a4\ub8e8)\u2500\u2500\u25ba [\uac8c\uc2a4\ud2b8 Windows]                                                \u2502                                                \u2502  \uacf5\uc2dd NVIDIA \ub4dc\ub77c\uc774\ubc84                                                \u2502  DX11 Feature Level OK                                                \u2502                                 Overwatch 2 \ub7f0\ucc98 + \uc548\ud2f0\uce58\ud2b8</p> <p>\uac00\uc0c1\uba38\uc2e0 \ud658\uacbd\uc774\ub77c\uba74 \uc7a5\uce58\ub97c \uc5d0\ubbac\ub808\uc774\uc158\ud558\uc9c0\ub9cc, \uc624\ubc84\uc6cc\uce58 2\uc5d0\uc11c\ub294 gpu \uc7a5\uce58\uc640 \ub4dc\ub77c\uc774\ubc84\uc758 ID\ub97c \uba85\ud655\ud788 \ud655\uc778\ud558\uba70 directX 11\ub9cc \ubc1b\uc544\ub4e4\uc774\uae30 \ub54c\ubb38\uc5d0 \uac8c\uc2a4\ud2b8\uc5d0 \ud328\uc2a4\uc2a4\ub8e8 \ud574\uc57c\ud55c\ub2e4. \ub9ac\ub205\uc2a4 \ucee4\ub110\uc774 \uc81c\uacf5\ud558\ub294 \ud328\uc2a4\uc2a4\ub8e8\uc6a9 \ud504\ub808\uc784\uc6cc\ud06c\uc778 VFIO-PCI\ub97c \uc774\uc6a9\ud574 PCIe \uc7a5\uce58\ub4e4\uc744 \uc548\uc804\ud558\uac8c \ub118\uae38 \uc218 \uc788\ub2e4.</p> <ul> <li>\ubca4\ub354 ID, DX Feature Level 11_0 \uc774\uc0c1 &amp; \uc11c\uba85\ub41c WDDM 2.x \uc870\uac74\ub3c4 \uac80\uc0ac</li> <li>Hyper-V/VBS OFF \ud574\uc57c\uc9c0 \ubabb\uc54c\uc544\ucc54</li> <li>VFIO-PCI\ub294 \uac19\uc740 IOMMU \uadf8\ub8f9\uc5d0 \ubb36\uc778 \uc7a5\uce58\ub294 \ud1b5\uc9f8\ub85c \ub118\uaca8\uc57c \ud568</li> <li>\ub2e4\ub978 \uac8c\uc784\uc740 \uc5d0\ubbac\ub808\uc774\uc158\uc778 virtio-gpu(VirGL)\ub9cc\uc73c\ub85c \ucda9\ubd84\ud558\uae30\ub3c4 \ud568</li> </ul>"},{"location":"3-display/#vm","title":"VM \ub514\uc2a4\ud50c\ub808\uc774","text":"<p>\uadf8\ub7fc VM\uc740 \ub514\uc2a4\ud50c\ub808\uc774\ub97c \uc5b4\ub5bb\uac8c \ud558\ub0d0? \uc7a5\uce58\ub97c \uc5bc\ub9c8\ub098 \ub118\uaca8\uc8fc\ub0d0\uc5d0 \ub530\ub77c \ub2e4\ub974\ub2e4. \uc7a5\uce58\ub294 \uc5d0\ubbac\ub808\uc774\uc158(\uc9c4\uc9dc \ud558\ub4dc\uc6e8\uc5b4\uc778\ucc99 \ud749\ub0b4), \ud30c\ub77c\ubc84\ucd94\uc5bc(\uac00\uc9dc \uc7a5\uce58 \uc778\ud130\ud398\uc774\uc2a4 virtio \uc81c\uacf5), \ud328\uc2a4\uc2a4\ub8e8(\ud558\ub4dc\uc6e8\uc5b4 \uac74\ub0b4\uc8fc\uae30) \uc138\uac00\uc9c0 \ubc29\uc2dd\uc774 \uc788\ub2e4</p> <p>\uc804\uccb4 \ud328\uc2a4\uc2a4\ub8e8 \ubc29\uc2dd\uc774\uba74 (VFIO-PCI) CPU\ub3c4 \uadf8\ub300\ub85c \uc0ac\uc6a9(\uc77c\ubd80 trap\ub9cc \ub530\ub85c \ucc98\ub9ac), RAM\ub3c4 \ud560\ub2f9\ub41c \uc601\uc5ed\ub9cc\ud07c \uadf8\ub300\ub85c \uc0ac\uc6a9, GPU\ub3c4 \ub4dc\ub77c\uc774\ubc84\uae4c\uc9c0 \uc124\uce58\ud574\uc11c \uc9c1\uc811 \uc0ac\uc6a9. IOMMU \ucf1c\uace0 hostdev \ucd94\uac00 + VFIO \ubc14\uc778\ub529\uc744 \ud574\uc57c \uc2e4\uc81c GPU\uac00 \ub118\uc5b4\uac04\ub2e4</p> <p>\ubd84\ud560 \ud328\uc2a4\uc2a4\ub8e8 \ubc29\uc2dd\uc774\uba74 (GVT-g) GPU\ub97c \uc77c\ubd80 \ub118\uaca8\uc918\uc11c \uc5f0\uc0b0\uc740 \ud558\ub418 \ucd5c\uc885 \ud504\ub808\uc784\ubc84\ud37c\ub294 \ud638\uc2a4\ud2b8\uac00 \ud569\uc131.</p> <p>\ubc18\uac00\uc0c1\ud654 \ud30c\ub77c\ubc84\ucd94\uc5bc \ubc29\uc2dd\uc774\uba74 (Virtio-gpu) \uac00\uc9dc GPU\ub97c \ub9cc\ub4e4\uc5b4 \ud638\uc2a4\ud2b8\uac00 \uc218\uc2e0\ud574\uc640 \ub80c\ub354\ub9c1 \uc5f0\uc0b0\uacfc \ucd9c\ub825\uc744 \ub2f4\ub2f9</p> <p>VGA \uc5d0\ubbac\ub808\uc774\uc158 \ubc29\uc2dd\uc774\uba74 GPU \uc0ac\uc6a9 \uc5c6\uc774 \uc624\uc9c1 \uadf8 \uc704\uc5d0\uc11c \uc7a5\uce58\ub97c \uad6c\ud604\ud574\uc11c \uc9c4\uc9dc \uac00\uc0c1\uc73c\ub85c \uc5f0\uc0b0 \ucc98\ub9ac</p> <p>ramfb(RAM Framebuffer)\ub294 \uac8c\uc2a4\ud2b8 os\uac00 \uba54\ubaa8\ub9ac\uc5d0 \ud53d\uc140 \ub370\uc774\ud130\ub97c \uc4f0\uba74 \ud638\uc2a4\ud2b8\uac00 \uadf8 \uba54\ubaa8\ub9ac\ub97c \uc77d\uc5b4\uc640 \ud654\uba74\uc5d0 \uadf8\ub300\ub85c \ud45c\uc2dc\ud558\ub294 \ub9e4\ucee4\ub2c8\uc998(\ub80c\ub354\ub9c1x). UEFI(OVMF) \ubd80\ud305 \uc911\uc5d0 \uc0ac\uc6a9.</p>"},{"location":"3-display/#_3","title":"\uae30\ubcf8 \uadf8\ub798\ud53d \ucc98\ub9ac \ud750\ub984","text":"<p>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502                      \uc560\ud50c\ub9ac\ucf00\uc774\uc158\ub4e4                     \u2502 \u2502  App A  App B  App C ...                                \u2502 \u2502   \u2502      \u2502      \u2502                                       \u2502 \u2502   \u2502\ub80c\ub354\ub9c1 API \uc0ac\uc6a9 (OpenGL, Vulkan, Direct3D, Skia \ub4f1) \u2502 \u2502   \u25bc      \u25bc      \u25bc                                       \u2502 \u2502 [\uc708\ub3c4\uc6b0 \ubc84\ud37c A] [\uc708\ub3c4\uc6b0 \ubc84\ud37c B] [\uc708\ub3c4\uc6b0 \ubc84\ud37c C]         \u2502 \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502            \u2502            \u2502      \u25bc            \u25bc            \u25bc     \ubc84\ud37c \ud578\ub4e4 \uc804\ub2ec: X11 Pixmap, Wayland wl_buffer, Windows DWM Surface             \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u2502      \ucef4\ud3ec\uc9c0\ud130(\ud569\uc131\uae30)        \u2502             \u2502  - \uc708\ub3c4\uc6b0 \uc2a4\ud0dd/\uc88c\ud45c           \u2502             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                       \u25bc                   [GPU \uc5f0\uc0b0]                       \u2502                       \u25bc                    [\ubc31 \ubc84\ud37c]                       \u2502                       \u25bc                  \ub514\uc2a4\ud50c\ub808\uc774 \ucee8\ud2b8\ub864\ub7ec \u2192 \ubaa8\ub2c8\ud130</p> <p>\ub80c\ub354\ub9c1? \uc704\uce58 \ub370\uc774\ud130\ub97c transform\uacfc projection\ud558\uc5ec \ud654\uba74\uc5d0 \uadf8\ub798\ud53d\uc744 \uadf8\ub9bc \uba85\ub839 \uc0dd\uc131: \uc751\uc6a9 \ud504\ub85c\uadf8\ub7a8 \uba85\ub839 \ud574\uc11d: \ub80c\ub354\ub9c1 API + GPU \ub4dc\ub77c\uc774\ubc84 \uc2e4\uc81c \uc5f0\uc0b0: \ud558\ub4dc\uc6e8\uc5b4 GPU</p> <p>\ub80c\ub354\ub9c1 API? \ud654\uba74\uc5d0 3D/2D \uadf8\ub798\ud53d\uc744 \uadf8\ub9ac\ub294 \uc77c\uc744 \ub3c4\uc640\uc8fc\ub294 \uc57d\uc18d\ub41c \ud568\uc218 \uc9d1\ud569 \ub3c4\uad6c. drawTriagnles()\uac19\uc740 \uba85\ub839\uc73c\ub85c \uc2e4\uc81c\ub85c \uc0bc\uac01\ud615\uc744 \uadf8\ub9bc. \uc815\uc810 \ub370\uc774\ud130\ub97c GPU\ub85c \uc804\uc1a1, \uc870\uba85 \uacc4\uc0b0, \ud53d\uc140\uc5d0 \uc0c9\uc0c1 \uacb0\uc815, GPU\uc5d0 \ud544\uc694\ud55c \uba54\ubaa8\ub9ac \ud560\ub2f9, \ud504\ub808\uc784\ubc84\ud37c \uad00\ub9ac.</p> <p>GPU \ub4dc\ub77c\uc774\ubc84? \ub80c\ub354\ub9c1 API \uba85\ub839\uc744 GPU \ud558\ub4dc\uc6e8\uc5b4 \uba85\ub839\uc73c\ub85c \ubc88\uc5ed</p> <p>\ud569\uc131? \uc5ec\ub7ec \uc708\ub3c4\uc6b0 \ubc84\ud37c(\ubc30\uacbd, \ucc3d, \ud328\ub110 \ub4f1)\ub97c \ud558\ub098\uc758 \ucd5c\uc885 \ud654\uba74 \uc774\ubbf8\uc9c0\ub85c \uc870\ub9bd\ud558\uc5ec \ud654\uba74\uc5d0 \uc2e4\uc81c\ub85c \ubb50\uac00 \ubcf4\uc77c\uc9c0 \uacb0\uc815</p> <p>\ud504\ub808\uc784\ubc84\ud37c? \ub514\uc2a4\ud50c\ub808\uc774\ub85c \ubcf4\ub0bc \ucd5c\uc885 \ud569\uc131 \ud53d\uc140 \uba54\ubaa8\ub9ac. \ub514\uc2a4\ud50c\ub808\uc774 \ucee8\ud2b8\ub864\ub7ec\uac00 \uc77d\uc5b4\uac04\ub2e4. gpu \uc804\uc6a9 VRAM(video random access memory)\uc5d0 \uc788\uae30\ub3c4 \ud558\uace0, DRAM\uc758 \uc77c\ubd80\ub97c \ud504\ub808\uc784\ubc84\ud37c \uc6a9\ub3c4\ub85c \uc0ac\uc6a9\ud558\uae30\ub3c4 \ud55c\ub2e4. \uc5b4\uca0c\uac70\ub098 cpu\uac00 \uadf8 \ud53d\uc140\uc744 \ubcf5\uc0ac\ud558\ub824\ud558\uc9c0 \uc54a\uace0 \uc8fc\uc18c\ub098 \ub808\uc9c0\uc2a4\ud130\ub9cc \uc5c5\ub370\uc774\ud2b8\ud558\uba70 \ucc98\ub9ac\ud55c\ub2e4.</p> <p>\ubc31 \ubc84\ud37c/\ud504\ub7f0\ud2b8 \ubc84\ud37c? \uadf8\ub9b4 \ub54c \uc4f0\ub294 \uc784\uc2dc \ubc84\ud37c vs \ud604\uc7ac \ud654\uba74 \ud45c\uc2dc \uc911\uc778 \ubc84\ud37c\ub85c \uae5c\ube61\uc784\uc744 \ubc29\uc9c0</p> <p>\ud55c\uc904 \uc694\uc57d\ud558\uba74 \ub80c\ub354\ub9c1\uc744 \uc704\ud574 \uc751\uc6a9 \ud504\ub85c\uadf8\ub7a8\uc774 \ub9cc\ub4e0 \uba85\ub839\uc744 cpu\uac00 \uc900\ube44\ud558\uace0, GPU\uac00 \ub300\ub7c9 \ud53d\uc140 \uc5f0\uc0b0\uc744 \uc218\ud589\ud55c \ub4a4 \uacb0\uacfc\ub97c \uba54\ubaa8\ub9ac \uc0c1\uc758 \ud504\ub808\uc784\ubc84\ud37c\uc5d0 \uc4f4\ub2e4. \ub514\uc2a4\ud50c\ub808\uc774 \ud558\ub4dc\uc6e8\uc5b4\uac00 \uadf8 \ud504\ub808\uc784\ubc84\ud37c\ub97c \uc9c1\uc811 \uc77d\uc5b4 \ubaa8\ub2c8\ud130\uc5d0 \ub744\uc6b4\ub2e4.</p> <p>\uc624\ubc84\ub808\uc774(Overlay Plane)? \ud569\uc131 \uc5c6\uc774 \ud2b9\uc815 \ubc84\ud37c\ub97c \uc9c1\uc811 \ud654\uba74 \ud2b9\uc815 \uc601\uc5ed\uc5d0 \ud558\ub4dc\uc6e8\uc5b4\uc801\uc73c\ub85c \uc5b9\ub294 \uae30\ub2a5. \ube44\ub514\uc624 \uac19\uc740 \ud504\ub85c\uadf8\ub7a8\uc740 \ub108\ubb34 \uc790\uc8fc \ubc14\ub00c\uc5b4 \ud569\uc131\uc774 \ud798\ub4dc\ub2c8 \uc9c1\uc811 \ub514\uc2a4\ud50c\ub808\uc774 \ucee8\ud2b8\ub864\ub7ec\uc758 \uc624\ubc84\ub808\uc774 \ud50c\ub808\uc778\uc5d0 \ub9d0\uc744 \uac70\ub294 \uac83\uc774\ub2e4.</p> <pre><code>           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n           \u2502 Display Controller    \u2502  \u2190 \ub514\uc2a4\ud50c\ub808\uc774 \ud558\ub4dc\uc6e8\uc5b4\n           \u2502 (scanout engine)      \u2502\n           \u2502                       \u2502\n           \u2502   Primary  Plane  \u2500\u2500\u2500\u2500\u2500\u2500\u2510  \ub370\uc2a4\ud06c\ud1b1 \ud569\uc131\ub41c \uc804\uccb4\ud654\uba74(RGB)\n           \u2502   Overlay  Plane  \u2500\u2500\u2510   \u2502  \ube44\ub514\uc624 YUV \ubc84\ud37c (HW \ubcc0\ud658)\n           \u2502   Cursor   Plane \u2500\u2510 \u2502   \u2502  \ud558\ub4dc\uc6e8\uc5b4 \ucee4\uc11c\n           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2534\u2500\u2534\u2500\u2500\u2500\u2518\n                            \u2502\n                          HDMI/eDP/DP \u2192 \ubaa8\ub2c8\ud130\n</code></pre>"},{"location":"3-display/#dma","title":"DMA \uc7a5\uce58 \uc774\ud574","text":"<p>DMA? Direct Memory Access CPU\ub97c \uac70\uce58\uc9c0 \uc54a\uace0 \ub514\ubc14\uc774\uc2a4(SSD, GPU, NIC)\uac00 \uc8fc\uccb4\uac00 \ub418\uc5b4 \uc8fc \uba54\ubaa8\ub9ac\ub85c \uc9c1\uc811 \uc77d\uace0 \uc4f0\uae30. cpu\uac00 \uc544\ub2cc gpu\ub85c \uadf8\ub798\ud53d\uc744 \ucc98\ub9ac\ud558\ub294 \uac78 \uac00\uc18d\uc774\ub77c\uace0 \ubd80\ub978\ub2e4. \ub610\ud55c cpu\uc640\uc758 \uc804\uc6a9 \uace0\uc18d \ubc84\uc2a4\ub97c PCIe\ub77c\uace0 \ubd80\ub974\ub294\ub370, \uc774\ub97c \uac00\uc9c0\ub294 \uc7a5\uce58\ub294 gpu, \uc0ac\uc6b4\ub4dc\uce74\ub4dc \ub4f1\uc774 \uc788\ub2e4.</p> <p>IOMMU? I/O MMU \ub514\ubc14\uc774\uc2a4 \uc804\uc6a9 MMU.</p> <p>VT-d? Intel Virtualization Technology for Directed I/O intel CPU \uce69\uc14b\uc5d0 \ub0b4\uc7a5\ub41c IOMMU \uad6c\ud604 \ube0c\ub79c\ub4dc\uba85. AMD\ub294 AMD-VI\ub77c \ud45c\uae30. ACPI DMAR \ud14c\uc774\ube14\uc5d0 DRHD(\ud558\ub4dc\uc6e8\uc5b4 \uc720\ub2db)\u00b7RMRR(\uc608\uc57d \uba54\ubaa8\ub9ac)\u00b7ATSR \ub4f1\uc744 \uae30\ub85d. \ub9ac\ub205\uc2a4 intel_iommu (\uc635\uc158 intel_iommu=on), Windows vtd.sys\uc73c\ub85c \uc791\ub3d9.</p> <p>ACPI? Advanced configuration &amp; Power Interface UEFI-&gt;OS\ub85c \uac74\ub124\uc8fc\ub294 \ud558\ub4dc\uc6e8\uc5b4, IRQ, \uc804\uc6d0 \uad00\ub9ac \uc124\uba85\uc11c. \ud14c\uc774\ube14 \ud615\uc2dd\uc73c\ub85c \ub418\uc5b4 \uc788\ub2e4. RSDP(\ub8e8\ud2b8) \u2192 XSDT/RSDT\uac00 \uc5ec\ub7ec \ud558\uc704 \ud14c\uc774\ube14 \uc8fc\uc18c\ub97c \ub098\uc5f4. \u2022 \ub300\ud45c \ud14c\uc774\ube14: FADT(\uc804\uc6d0), MADT(APIC\u00b7CPU), DSDT(AML \ucf54\ub4dc), DMAR(IOMMU) \ub4f1</p> <p>DMAR? Direct Memory Access Remapping ACPI \uc18d Intel VT-d(IOMMU)\ub97c \ucd08\uae30\ud654\ud558\uae30 \uc704\ud55c \uc804\uc6a9 \ud14c\uc774\ube14 \uc774\ub984. DMAR \uc5d4\uc9c4\uc774 \uc5b4\ub514\uc5d0 \uba87 \uac1c\uac00 \ub2ec\ub824 \uc788\uc73c\uba70 \uc5b4\ub5a4 PCI \uc7a5\uce58\ub97c \ub9e1\ub294\uac00. \u2022 DRHD(DMA Remapping Hardware Unit)\uc740 IOMMU \ub808\uc9c0\uc2a4\ud130 \ubca0\uc774\uc2a4, \uad00\ub9ac \ubc84\uc2a4. \u2022 RMRR(Resserved Memory Region Reporting)\uc740 BIOS, iGPU, USB \ub808\uac70\uc2dc \ub4f1 \ud2b9\uc815 \uc7a5\uce58 \ubd80\ud305 \uc911 DMA \ud574\uc57c \ud558\ub294 \uc608\uc57d \uba54\ubaa8\ub9ac. \u2022 ATSR(Address-Translation Service Remap)</p>"},{"location":"4-1-igpu/","title":"4 1 igpu","text":""},{"location":"4-1-igpu/#igpu-vm","title":"igpu \ubd84\ud560 \ud328\uc2a4\uc2a4\ub8e8 vm\uc744 \ub9cc\ub4e4\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-08-01</p>"},{"location":"4-1-igpu/#_1","title":"\uac00\uc0c1\ud654 \uc9c0\uc6d0 \ud655\uc778","text":"<p><pre><code># gpu \ud655\uc778\n~$ lspci | grep -i vga\n00:02.0 VGA compatible controller: Intel Corporation CometLake-U GT2 [UHD Graphics] (rev 02)\n# IOMMU \ud65c\uc131 \uc5ec\ubd80\n~$ sudo dmesg | grep -e IOMMU -e DMAR\n# DMAR \ud14c\uc774\ube14\uc740 intel \ud38c\uc6e8\uc5b4\uac00 \uc81c\uacf5\ud588\ub2e4\n[    0.023609] ACPI: DMAR 0x0000000084136000 0000A8 (v01 INTEL  EDK2     00000002      01000013)\n# DMAR \ud14c\uc774\ube14 \uc704\uce58\n[    0.023660] ACPI: Reserving DMAR table memory at [mem 0x84136000-0x841360a7]\n# IOMMU\uac00 39\ube44\ud2b8 \ubb3c\ub9ac \uc8fc\uc18c(512GB)\uae4c\uc9c0 \ubc88\uc5ed \uac00\ub2a5\n[    0.116940] DMAR: Host address width 39\n# DRHD(DMA-Remapping Hardware Unit) \ub450\uac1c\uac00 \uc874\uc7ac\n# flags 0x0 = \ubaa8\ub4e0 \ubc84\uc2a4 \ud3ec\ud568, flags 0x1 = \uc2a4\ucf54\ud504 \uc548 PCI \ub514\ubc14\uc774\uc2a4\ub9cc\n[    0.116942] DMAR: DRHD base: 0x000000fed90000 flags: 0x0\n[    0.116957] DMAR: dmar0: reg_base_addr fed90000 ver 1:0 cap 1c0000c40660462 ecap 19e2ff0505e\n[    0.116962] DMAR: DRHD base: 0x000000fed91000 flags: 0x1\n[    0.116968] DMAR: dmar1: reg_base_addr fed91000 ver 1:0 cap d2008c40660462 ecap f050da\n# RMRR(Reserved Memory Region Reporting)\ub85c \ud56d\uc0c1 \uc5f4\uc5b4\ub450\ub294 \uc601\uc5ed\n[    0.116971] DMAR: RMRR base: 0x00000084cb2000 end: 0x00000084efbfff\n[    0.116976] DMAR: RMRR base: 0x00000087000000 end: 0x000000897fffff\n# IRQ remapping \uae30\ub2a5 \ucf1c\uc9d0. Queued invlidation(TLB flush)\uae4c\uc9c0 \ud65c\uc131\n[    0.116979] DMAR-IR: IOAPIC id 2 under DRHD base  0xfed91000 IOMMU 1\n[    0.116982] DMAR-IR: HPET id 0 under DRHD base 0xfed91000\n[    0.116984] DMAR-IR: Queued invalidation will be enabled to support x2apic and Intr-remapping.\n[    0.119247] DMAR-IR: Enabled IRQ remapping in x2apic mode\n# \ucee4\ub110 \ud000\ud06c\uac00 iGPU(00:02.0)\uc744 IOMMU\uc5d0\uc11c \uac15\uc81c \uc81c\uc678. \ub530\ub77c\uc11c \uc774 IGD\ub97c VFIO-PCI\ub85c \ud1b5\uc9f8\ub85c \ud328\uc2a4\uc2a4\ub8e8 \ud558\ub294 \uacbd\ub85c\ub294 \ub9c9\ud798\n[    0.389107] pci 0000:00:02.0: DMAR: Disabling IOMMU for graphics on this chipset\n# ATSR(Address-Translation Service Remap)\uc640 SATC(System Agent Translation Cache) \uc5c6\uc74c. \uc0c1\uad00\uc5c6\uc74c\n[    0.513959] DMAR: No ATSR found\n[    0.513962] DMAR: No SATC found\n# \ub450 \ubc88\uc9f8 DRHD\ub3c4 queued invalidation \uc0ac\uc6a9\n[    0.513965] DMAR: dmar1: Using Queued invalidation\n# \ucd5c\uc885\uc801\uc73c\ub85c intel_iommu \ubaa8\ub4c8\uc774 \uc62c\ub77c\uac00\uba74\uc11c VT-d \ud65c\uc131 \uc644\ub8cc.\n[    0.516031] DMAR: Intel(R) Virtualization Technology for Directed I/O\n# GPU\uac00 vfio-pci\uc5d0 \ubb36\uc600\ub294\uc9c0\n~$ lspci -nnk | grep -A3 VGA\n# iGPU \ubca4\ub354, \ub514\ubc14\uc774\uc2a4 ID: 8086:9b41, \ub4dc\ub77c\uc774\ubc84: i915\n00:02.0 VGA compatible controller [0300]: Intel Corporation CometLake-U GT2 [UHD Graphics] [8086:9b41] (rev 02)\n    DeviceName: Onboard - Video\n    Subsystem: Samsung Electronics Co Ltd CometLake-U GT2 [UHD Graphics] [144d:c18a]\n    Kernel driver in use: i915\n</code></pre> \uc989, IOMMU(VT-d) \uc790\uccb4\ub294 \ud65c\uc131. irq remap, qi \uc9c0\uc6d0\uae4c\uc9c0 \uac16\ucdb0\uc838 \uc788\uc5b4 USB,NVMe \uce74\ub4dc \ub4f1\uc740 \ubc14\ub85c VFIO \ud328\uc2a4\uc2a4\ub8e8 \uac00\ub2a5. \ud558\uc9c0\ub9cc IGD(\ub0b4\uc7a5 GPU)\ub294 IOMMU\uc5d0\uc11c \uc81c\uc678. \ub530\ub77c\uc11c \ub0b4\uc7a5\uadf8\ub798\ud53d \uc7a5\uce58\ub97c \ucabc\uac1c\uc11c \uc4f0\ub294 GVT-g(vGPU) \ubc16\uc5d0 \ubd88\uac00\ub2a5. \ud480 VFIO \ud328\uc2a4\uc2a4\ub8e8(GVT-d)\ub97c \uc2dc\ub3c4\ud55c\ub2e4\uba74 \ub9c9\ud798.</p> <p>NVMe? SSD \uc804\uc6a9 \uace0\uc18d \ud1b5\uc2e0 \uaddc\uaca9 \ud504\ub85c\ud1a0\ucf5c. PCIe \uace0\uc18d\ubc84\uc2a4\uc640 \ud568\uaed8 SSD\ub97c \ubcf4\uc870.</p>"},{"location":"4-1-igpu/#_2","title":"\ucee4\ub110 \uc124\uc815","text":"<p>\uc804\uc81c \ud655\uc778 <pre><code>$ grep GVT /boot/config-$(uname -r)     # \ucee4\ub110\uc5d0 i915 GVT \ucf54\ub4dc \uc874\uc7ac \ud655\uc778\nCONFIG_DRM_I915_GVT_KVMGT=m\nCONFIG_DRM_I915_GVT=y\n</code></pre></p> <p>\ucee4\ub110 \uc124\uc815 <pre><code>$ sudo nano /etc/default/grub\n\uc6d0\ubcf8\nGRUB_DEFAULT=0\nGRUB_TIMEOUT_STYLE=hidden\nGRUB_TIMEOUT=10\nGRUB_DISTRIBUTOR=`lsb_release -i -s 2&gt; /dev/null || echo Debian`\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash\"\nGRUB_CMDLINE_LINUX=\"\"\n\n\uc218\uc815 \ud6c4\nGRUB_DEFAULT=0\nGRUB_TIMEOUT_STYLE=hidden\nGRUB_TIMEOUT=10\nGRUB_DISTRIBUTOR=`lsb_release -i -s 2&gt; /dev/null || echo Debian`\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash intel_iommu=on i915.enable_gvt=1 kvm.ignore_msrs=1 iommu=pt\"\nGRUB_CMDLINE_LINUX=\"\"\n\n$ sudo update-grub &amp;&amp; sudo reboot\n</code></pre></p>"},{"location":"4-1-igpu/#vgpu","title":"\ubaa8\ub4c8 \ubc0f vGPU \uc900\ube44","text":"<p>\ubaa8\ub4c8 \ud0a4\uae30 <pre><code>$ sudo modprobe kvmgt mdev vfio-iommu-type1 vfio-pci\n$ sudo dmesg | grep -i gvt              # \ub85c\uadf8 \ud655\uc778\n[    0.000000] Command line: BOOT_IMAGE=/boot/vmlinuz-6.8.0-60-generic root=UUID=f20a3184-37e9-471b-93ed-2832064a0619 ro quiet splash intel_iommu=on i915.enable_gvt=1 kvm.ignore_msrs=1 iommu=pt vt.handoff=7\n[    0.045888] Kernel command line: BOOT_IMAGE=/boot/vmlinuz-6.8.0-60-generic root=UUID=f20a3184-37e9-471b-93ed-2832064a0619 ro quiet splash intel_iommu=on i915.enable_gvt=1 kvm.ignore_msrs=1 iommu=pt vt.handoff=7\n[  462.136478] i915 0000:00:02.0: Direct firmware load for i915/gvt/vid_0x8086_did_0x9b41_rid_0x02.golden_hw_state failed with error -2\n$ ls /sys/bus/pci/devices/0000:00:02.0/mdev_supported_types     # \uc9c0\uc6d0 \ud0c0\uc785 \ud655\uc778\ni915-GVTg_V5_4  i915-GVTg_V5_8\n$ lsmod | grep kvmgt                    # \ubaa8\ub4c8 \ud655\uc778\nkvmgt                 421888  0\nmdev                   24576  1 kvmgt\nvfio                   69632  2 kvmgt,vfio_iommu_type1\nkvm                  1413120  2 kvmgt,kvm_intel\ni915                 4300800  24 kvmgt\n</code></pre></p> <p>vGPU \uc0dd\uc131</p> <p>/sys/bus/pci/devices/0000:00:02.0/ \u2514\u2500 mdev_supported_types/    \u2514\u2500 i915-GVTg_V5_4/       \u251c\u2500 create      \u2190  UUID \uc4f0\uba74 \u279c \uc0c8 \ub514\ubc14\uc774\uc2a4 \uc0dd\uc131       \u251c\u2500 remove      \u2190  UUID \uc4f0\uba74 \u279c \ud574\ub2f9 \ub514\ubc14\uc774\uc2a4 \uc0ad\uc81c       \u2514\u2500 instances   \u2190  \uc774\ubbf8 \uc874\uc7ac\ud558\ub294 UUID \ubaa9\ub85d (\uc77d\uae30 \uc804\uc6a9)</p> <p><pre><code>$ UUID=$(uuidgen)           # UUID \uc0dd\uc131\n$ echo $UUID | sudo tee \\\n /sys/bus/pci/devices/0000:00:02.0/mdev_supported_types/i915-GVTg_V5_4/create\n</code></pre> * \ucc38\uace0\ub85c \ucef4\ud4e8\ud130 \ub044\uba74 UUID \ub0a0\ub77c\uac00\ub2c8 \ub9e4\ubc88 \uc0c8\ub85c \ub9cc\ub4e4\uc5b4\uc918\uc57c \ud568.</p>"},{"location":"4-1-igpu/#qemu-kvm","title":"qemu-kvm \uc635\uc158\uc758 \uc774\ud574","text":"<p>\ub9cc\uc57d git\uc73c\ub85c qemu \uc124\uce58\ud558\uace0 \uc2f6\uc73c\uba74 <pre><code>git clone https://gitlab.com/qemu-project/qemu.git\ncd qemu\nmkdir build\ncd build\n../configure --target-list=x86_64-softmmu --enable-kvm --disable-werror\nninja -j$(nproc)\nninja install\n</code></pre></p> <p>\ube4c\ub4dc \ub54c\ub294 \uc5b4\ub5a4 \ud0c0\uae43 \uc544\ud0a4\ud14d\ucc98\ub97c \ub9cc\ub4e4\uc9c0, \uc5b4\ub5a4 GUI/\ub514\uc2a4\ud50c\ub808\uc774 \ubc31\uc5d4\ub4dc/\uac00\uc18d \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ud3ec\ud568\ud560\uc9c0 \uacb0\uc815</p> <p>\ub7f0\ud0c0\uc784 \ub54c\ub294 VM \ud558\ub4dc\uc6e8\uc5b4 \ud1a0\ud3f4\ub85c\uc9c0, \uac00\uc18d(KVM), CPU \ud328\uc2a4\uc2a4\ub8e8, \uba54\ubaa8\ub9ac, \ud38c\uc6e8\uc5b4(OVMF), \ub514\uc2a4\ud06c/\ub124\ud2b8\uc6cc\ud06c/USB/\uadf8\ub798\ud53d \uc7a5\uce58, VFIO \ud328\uc2a4\uc2a4\ub8e8(vGPU \ud3ec\ud568), \ub514\ubc84\uae45/\uad00\ub9ac(QMP,monitor) \ub4f1\uc744 \uc124\uc815.</p> <p>../configure \uc635\uc158</p> \uce74\ud14c\uace0\ub9ac \ub300\ud45c \uc635\uc158 \uc124\uba85 \ud0c0\uae43 \uc544\ud0a4\ud14d\ucc98 --target-list=x86_64-softmmu \ud544\uc694\ud55c \uc5d0\ubbac\ub808\uc774\uc158 \ub300\uc0c1\ub9cc \ube4c\ub4dc \uc124\uce58 \uacbd\ub85c --prefix=/usr/local \uc2dc\uc2a4\ud15c \uae30\ubcf8 \ud328\ud0a4\uc9c0\uc640 \ucda9\ub3cc \ud53c\ud558\ub824\uba74 \ubcc4\ub3c4 prefix \ub514\ubc84\uadf8 --enable-debug \ubb38\uc81c \ucd94\uc801 \uc720\uc6a9 KVM \uc9c0\uc6d0 --enable-kvm \ubcf4\ud1b5 \uc790\ub3d9 \uac10\uc9c0\ub418\ub098 \ud558\ub294\uac8c \uc88b\uc74c \uadf8\ub798\ud53d \ubc31\uc5d4\ub4dc --enable-gtk,--enable-sdl,--enable-opengl GUI\ucc3d(gtk),\ub808\uac70\uc2dc/\ub300\uc548(sdl),GL\ub80c\ub354\ub9c1(virgl \ub4f1\uacfc \uc5ee\uc784) \uc624\ub514\uc624 --audio-drv-list=pa \uc624\ub514\uc624 \ubc31\uc5d4\ub4dc \uc120\ud0dd(\ud544\uc694 \uc5c6\uc73c\uba74 \uc81c\uac70) SPICE/remote --enable-spice,--enable-usb-redir \uc6d0\uaca9 \uadf8\ub798\ud53d \ubc0f USB \ub9ac\ub2e4\uc774\ub809\uc158 VFIO \uad00\ub828 \uac70\uc758 \uc5c6\uc74c \uc2dc\uc2a4\ud15c \ub77c\uc774\ube0c\ub7ec\ub9ac\uc5d0 \uc758\uc874. \ucee4\ub110\ucabd VFIO \ubaa8\ub4c8\uc774 \ub354 \uc911\uc694 \uc2a4\ud1a0\ub9ac\uc9c0 --enable-libiscsi \ub124\ud2b8\uc6cc\ud06c \uc2a4\ud1a0\ub9ac\uc9c0 \ud504\ub85c\ud1a0\ucf5c \ud544\uc694 \uc2dc LTO/\ucd5c\uc801\ud654 --enable-lto \ucd5c\uc801\ud654 \uad00\ub828 <p>gtk? \uac00\uc7a5 \uc77c\ubc18\uc801\uc778 \uc120\ud0dd. \ucc3d \ud06c\uae30 \uc870\uc808, \uba54\ub274 \uc81c\uc5b4, \ub9c8\uc6b0\uc2a4 \ud3ec\uc778\ud130 \ud1b5\ud569 \ub4f1\ub4f1. sdl? \uacbd\ub7c9 \uc635\uc158. \ucc3d \ud06c\uae30 \uace0\uc815, \uba54\ub274 \uc5c6\uc74c, \ub9c8\uc6b0\uc2a4 \ud3ec\uc778\ud130 \uc911\ucca9 \ubd88\uac00. \ud0a4\uc624\uc2a4\ud06c \uac19\uc740 \uace0\uc815 \ubbf8\ub2c8\uba40 \ud658\uacbd</p> <p>gl=on(opengl)? virtio-gpu\ub97c \uc0ac\uc6a9\ud560\ub54c \ud638\uc2a4\ud2b8\ub85c \uc804\ub2ec\ubc1b\uc740 \uac8c\uc2a4\ud2b8 \ub80c\ub354\ub9c1\uc744 \ucc98\ub9ac\ud558\uae30 \uc704\ud55c api.</p>"},{"location":"4-1-igpu/#qemu","title":"qemu \ubd80\ud305","text":"<p>qemu \ube4c\ub4dc <pre><code>$ cd qemu &amp;&amp; git checkout v8.2.0    # 8.2.0 \ubc84\uc804 \uc77d\uae30 \ubaa8\ub4dc\ub85c \uc804\ud658\ud55c\uac83. \ub2e4\uc2dc \uc2e4\uc2dc\uac04 \ubc84\uc804\uc73c\ub85c \ubc14\uafb8\uace0 \uc2f6\ub2e4\uba74 git switch - \n$ rm -rf build                # \ud588\ub358 \ube4c\ub4dc \ub514\ub809\ud1a0\ub9ac \uc0ad\uc81c\n$ mkdir build &amp;&amp; cd build\n$ ../configure --target-list=x86_64-softmmu \\\n            --enable-kvm --enable-debug \\\n            --enable-opengl --enable-gtk \\\n            --disable-werror\n$ ninja -j$(nproc)\n$ ninja install\n</code></pre></p> <p>seaBIOS \ubd80\ud305 <pre><code>$ sudo qemu-system-x86_64 \\\n  -machine q35,accel=kvm -cpu host,kvm=on -smp 4 -m 4G \\\n  -vga none \\\n  -device vfio-pci,sysfsdev=/sys/bus/mdev/devices/$UUID,display=on,x-igd-opregion=on \\\n  -drive file=~/win10_120g.qcow2,if=virtio,format=qcow2,cache=none \\\n  -monitor stdio \\\n  -qmp unix:/tmp/win10-qmp.sock,server,nowait \\\n  -display gtk,gl=on\n</code></pre></p> <p>\u26a0\ufe0f \uc131\uacf5\uc740 \ud588\ub2e4. \uadf8\ub807\uc9c0\ub9cc igpu\ub85c \uac8c\uc784\uc774 \uc6d0\ud65c\ud558\uac8c \uc791\ub3d9\ub418\uc9c0 \uc54a\uc544 \ub178\ud2b8\ubd81 \uad50\uccb4</p>"},{"location":"4-2-dgpu/","title":"4 2 dgpu","text":""},{"location":"4-2-dgpu/#igpu-dgpu-vm","title":"IGPU \uc5c6\uc744\ub54c DGPU \ud480 \ud328\uc2a4\uc2a4\ub8e8 vm\uc744 \ub9cc\ub4e4\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-08-02</p> <p>igpu \uc5c6\uc774 dgpu \ud558\ub098\uc5ec\ub3c4, \ud638\uc2a4\ud2b8\uc5d0\uc11c \ub5bc\uace0 \uac8c\uc2a4\ud2b8\ub85c \ub118\uae30\ub294 \ubc95</p>"},{"location":"4-2-dgpu/#_1","title":"\ud480 \ud328\uc2a4\uc2a4\ub8e8 \uac1c\uc694","text":"<p>IOMMU \ucf1c\uace0 hostdev \ucd94\uac00 + VFIO \ubc14\uc778\ub529\uc744 \ud574\uc57c \uc2e4\uc81c GPU\uac00 \ub118\uc5b4\uac04\ub2e4 \ucc38\uace0\ub85c \uc7a5\uce58\ub294 \uc5d0\ubbac\ub808\uc774\uc158(\uc9c4\uc9dc \ud558\ub4dc\uc6e8\uc5b4\uc778\ucc99 \ud749\ub0b4), \ud30c\ub77c\ubc84\ucd94\uc5bc(\uac00\uc9dc \uc7a5\uce58 \uc778\ud130\ud398\uc774\uc2a4 virtio \uc81c\uacf5), \ud328\uc2a4\uc2a4\ub8e8(\ud558\ub4dc\uc6e8\uc5b4 \uac74\ub0b4\uc8fc\uae30) \uc138\uac00\uc9c0 \ubc29\uc2dd\uc774 \uc788\ub2e4</p>"},{"location":"4-2-dgpu/#_2","title":"\ucee4\ub110 \uc124\uc815","text":"<p>grub\uc5d0\uc11c IOMMU \uc804\uccb4 \ucf1c\uae30 <pre><code>$ sudo nano /etc/default/grub\n\uc6d0\ubcf8\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash\"\n\uc218\uc815\n# iommu=pt \ud328\uc2a4\uc2a4\ub8e8 \uc7a5\uce58\ub9cc \ud1b5\uacfc video=efifb:off \ud638\uc2a4\ud2b8\uac00 gpu \uae30\ubcf8 \ud504\ub808\uc784\ubc84\ud37c \uc7a1\ub294 \uac83 \ubc29\uc9c0\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash amd_iommu=on iommu=pt video-efifb:off\"\n$ sudo update-grub\n$ reboot\n</code></pre></p>"},{"location":"4-2-dgpu/#_3","title":"\uc8fc\uc18c \ubc0f \uadf8\ub8f9 \uc815\ubcf4 \ud655\uc778","text":"<p>PCI \uc8fc\uc18c\uc640 ID \ud655\uc778 <pre><code>$ lspci -nn | grep -i -e vga -e audio   # gpu\uc5d0 audio \uc7a5\uce58\uac00 \ub538\ub824 \uc788\ub294 \uacbd\uc6b0\uac00 \ub9ce\uae30 \ub54c\ubb38\uc5d0 \uac19\uc774 ID \uac19\uc774 \ucc3e\uc74c\n01:00.0 VGA compatible controller [0300]: NVIDIA Corporation AD107M [GeForce RTX 4060 Max-Q / Mobile] [10de:28e0] (rev a1)\n01:00.1 Audio device [0403]: NVIDIA Corporation Device [10de:22be] (rev a1)\n05:00.5 Multimedia controller [0480]: Advanced Micro Devices, Inc. [AMD] ACP/ACP3X/ACP6x Audio Coprocessor [1022:15e2] (rev 60)\n05:00.6 Audio device [0403]: Advanced Micro Devices, Inc. [AMD] Family 17h/19h HD Audio Controller [1022:15e3]\n</code></pre> * PCI \uc8fc\uc18c? \ubc84\uc2a4 \uc2ac\ub86f \uc5b4\ub514\uc5d0 \uaf42\ud600 \uc788\ub098 * \ubca4\ub354:\ub514\ubc14\uc774\uc2a4 ID? \uc81c\uc870\uc0ac+\ubaa8\ub378 \ucf54\ub4dc\ub85c \ubb34\uc2a8 \uc7a5\uce58\uc778\uac00 VGA : PCI \uc8fc\uc18c 01:00.0\uc5d0 ID 10de:28e0 Audio : PCI \uc8fc\uc18c 01:00.1\uc5d0 ID 10de:22be \uc774\uac8c \uadf8\ub8f9\uc774 \ub9de\ub294\uc9c0 iommu_groups\uc744 \ud655\uc778\ud574\ubcf4\uc790</p> <p>Iommu_groups \ud655\uc778 <pre><code>$ for g in /sys/kernel/iommu_groups/*; do\n  echo \"Group $(basename $g):\"; ls -l $g/devices; echo; done\nGroup 14:\n\ud569\uacc4 0\nlrwxrwxrwx 1 root root 0  7\uc6d4 26 10:11 0000:01:00.0 -&gt; ../../../../devices/pci0000:00/0000:00:01.1/0000:01:00.0\nlrwxrwxrwx 1 root root 0  7\uc6d4 26 10:11 0000:01:00.1 -&gt; ../../../../devices/pci0000:00/0000:00:01.1/0000:01:00.1\n</code></pre> \ub530\ub77c\uc11c \ub458\uc740 14\ubc88 \uadf8\ub8f9\uc774 \ub9de\uace0 \uc774\uac70 \ub450\uac1c\ub9cc \ub118\uae30\uba74 \ub428</p>"},{"location":"4-2-dgpu/#gpu","title":"gpu \uc7a5\uce58 \uc81c\uc5b4","text":"<p>hostdev \uc7a5\uce58 \ucd94\uac00 <pre><code>$ virt-manager\n\ud558\ub4dc\uc6e8\uc5b4 \ucd94\uac00 - PCI \ud638\uc2a4\ud2b8 \uc7a5\uce58 - 0000:01:00.0\uacfc 0000:01:00.1 \ucd94\uac00\n</code></pre> * \uc7a5\uce58 \ub5bc\uae30/\ubd99\uc774\uae30\uc758 \uad00\ub9ac\ub97c managed=yes\ub85c libvirt\uc5d0\uac8c \ub9e1\uae30\ub294 \uac83</p> <p>hook \uc2a4\ud06c\ub9bd\ud2b8 \uc791\uc131 <pre><code>$ sudo mkdir -p /etc/libvirt/hooks    # \ub514\ub809\ud1a0\ub9ac \ud655\uc778\n$ sudo nano /etc/libvirt/hooks/qemu   # qemu \ud30c\uc77c \uc0dd\uc131\n#!/usr/bin/env bash\n# /etc/libvirt/hooks/qemu\nset -euo pipefail\n\nVM=\"$1\"\nHOOK=\"$2\"\nPHASE=\"$3\"\n\nGPU=\"0000:01:00.0\"\nAUD=\"0000:01:00.1\"\nHOSTDRV=\"nvidia\"\n\nDM_LIST=(\"gdm3\" \"gdm\" \"sddm\" \"lightdm\")\nDM_STATE_FILE=\"/run/libvirt-active-dm\"\n\nlog(){ echo \"[$(date +'%F %T')] $*\" &gt;&gt; /var/log/libvirt/qemu-hook.log; }\n\nstop_dm() {\n  for dm in \"${DM_LIST[@]}\"; do\n    if systemctl is-active --quiet \"$dm\"; then\n      systemctl stop \"$dm\"\n      echo \"$dm\" &gt; \"$DM_STATE_FILE\"\n      break\n    fi\n  done\n}\n\nstart_dm() {\n  if [[ -f \"$DM_STATE_FILE\" ]]; then\n    dm=\"$(cat \"$DM_STATE_FILE\")\"\n    systemctl start \"$dm\" || true\n    rm -f \"$DM_STATE_FILE\"\n  fi\n}\n\nunbind_vtconsoles() {\n  for c in /sys/class/vtconsole/*; do\n    [[ -e \"$c/bind\" ]] &amp;&amp; echo 0 &gt; \"$c/bind\" || true\n  done\n  echo efi-framebuffer.0        &gt; /sys/bus/platform/drivers/efi-framebuffer/unbind        2&gt;/dev/null || true\n  echo simple-framebuffer.0    &gt; /sys/bus/platform/drivers/simple-framebuffer/unbind     2&gt;/dev/null || true\n  echo simpledrm.0             &gt; /sys/bus/platform/drivers/simpledrm/unbind              2&gt;/dev/null || true\n}\n\nunload_host_driver() {\n  case \"$HOSTDRV\" in\n    nvidia)\n      modprobe -r nvidia_drm nvidia_modeset nvidia_uvm nvidia 2&gt;/dev/null || true\n      ;;\n    amdgpu)\n      modprobe -r amdgpu 2&gt;/dev/null || true\n      ;;\n  esac\n}\n\nreload_host_driver() {\n  case \"$HOSTDRV\" in\n    nvidia)\n      modprobe nvidia 2&gt;/dev/null || true\n      modprobe nvidia_uvm 2&gt;/dev/null || true\n      modprobe nvidia_modeset 2&gt;/dev/null || true\n      modprobe nvidia_drm 2&gt;/dev/null || true\n      ;;\n    amdgpu)\n      modprobe amdgpu 2&gt;/dev/null || true\n      ;;\n  esac\n}\n\nload_vfio() {\n  for m in vfio vfio-pci vfio_iommu_type1; do\n    modprobe -n \"$m\" &amp;&gt;/dev/null &amp;&amp; modprobe \"$m\" || true\n  done\n}\n\ncase \"${HOOK}/${PHASE}\" in\n  prepare/begin)\n    log \"[$VM] prepare/begin: stop DM, unbind fb, unload $HOSTDRV, load vfio\"\n    stop_dm\n    unbind_vtconsoles\n    unload_host_driver\n    load_vfio\n    ;;\n\n  release/end|stopped/end)\n    log \"[$VM] release/stopped: reload $HOSTDRV, start DM\"\n    reload_host_driver\n    start_dm\n    ;;\n\n  *)\n    log \"[$VM] other phase: $HOOK / $PHASE $4\"\n    ;;\nesac\n\nexit 0\n\n$ sudo chmod +x /etc/libvirt/hooks/qemu     # \uc800\uc7a5 \ud6c4 \uc2e4\ud589\uad8c\ud55c\n$ sudo mv /etc/libvirt/hooks/qemu ~/dd      # \uc7a0\uae50 \ubb34\ud6a8\ud654\ud560\ub54c\n$ sudo mv ~/dd /etc/libvirt/hooks/qemu      # \ub2e4\uc2dc \ud65c\uc131\ud654\n</code></pre> * hook \uc2a4\ud06c\ub9bd\ud2b8\ub780 vm\uc774 \uc2dc\uc791/\uc885\ub8cc\ub418\uae30 \uc9c1\uc804 \uc9c1\ud6c4\uc5d0 libvirt\uac00 \uc790\ub3d9\uc73c\ub85c \uc2e4\ud589\ud574\uc8fc\ub294 \uc2a4\ud06c\ub9bd\ud2b8 * \uc774 \uc548\uc5d0\uc11c vfio \ubaa8\ub4c8\ub85c \uc7a5\uce58 \uac74\ub124\uc8fc\uae30/\uc5b8\ubc14\uc778\ub529/\ubc14\uc778\ub529 \ucf54\ub4dc\ub97c \uc9dc\uc8fc\uace0 \ud638\uc2a4\ud2b8\uc758 gui/dm \ub3c4 \ub0b4\ub824\uc900\ub2e4 * #!\ub294 \uc774 \ud30c\uc77c\uc744 \uc5b4\ub5a4 \uc778\ud130\ud504\ub9ac\ud130\ub85c \uc2e4\ud589\ud560\uc9c0\uc784</p>"},{"location":"4-2-dgpu/#vm","title":"vm\uc5d0 \uc815\ubcf4 \uc804\ub2ec","text":"<p>rom \ud30c\uc77c \ucd94\uac00 <pre><code>$ sudo mkdir -p /usr/share/vgabios      # \ub514\ub809\ud1a0\ub9ac \uc0dd\uc131\n$ echo 1 | sudo tee /sys/bus/pci/devices/0000:01:00.0/rom     # rom \uc77d\uae30 \ud5c8\uc6a9\n$ sudo dd if=/sys/bus/pci/devices/0000:01:00.0/rom of=/usr/share/vgabios/rtx4060.rom bs=1K\n$ sudo chown root:root /usr/share/vgabios/rtx4060.rom\n$ sudo chmod 644 /usr/share/vgabios/rtx4060.rom\n$ echo 0 | sudo tee /sys/bus/pci/devices/0000:01:00.0/rom   # rom \uc7a0\uae08\n$ virsh edit win10\ngpu hostdev \uc548\uc5d0 source \ube14\ub85d \ub2e4\uc74c\uc5d0 \ub450\ub294 \uac83\uc774 \uad00\ub840\n&lt;rom file='/usr/share/vgabios/rtx4060.rom'/&gt;\n</code></pre></p>"},{"location":"4-2-dgpu/#_4","title":"&gt; \uc6d0\uaca9","text":"<p>\uc774\ub807\uac8c \ud328\uc2a4\uc2a4\ub8e8\ub97c \uc2dc\ud0a4\uba74 \ud638\uc2a4\ud2b8 \ud654\uba74\uc774 \uc5c6\uc73c\ubbc0\ub85c ssh \uc6d0\uaca9\ucef4\uc73c\ub85c vm\uc744 \ud0a4\uace0 \ub044\uc790</p> <p>ssh \uc2e4\ud589 <pre><code># \ub0b4\ucef4\uc5d0\uc11c\n$ sudo apt install openssh-server\n$ sudo systemctl start ssh\n$ sudo ufw allow 22\n</code></pre></p> <p>ssh \uc6d0\uaca9 <pre><code># \uc6d0\uaca9\ucef4\uc5d0\uc11c\n$ ssh kkongnyang2@172.30.1.69\n\ube44\ubc00\ubc88\ud638 4108 \uc785\ub825\n$ virsh list --all        # vm \ub9ac\uc2a4\ud2b8\ubcf4\uae30\n$ virsh start win10       # vm \ud0a4\uae30\n$ virsh shutdown win10    # vm \ub044\uae30\n$ virsh destroy win10     # \uac15\uc81c \ud30c\uc6cc\ub0b4\ub9ac\uae30\n$ exit                    # ssh \uc5f0\uacb0 \uc885\ub8cc\n</code></pre></p>"},{"location":"4-2-dgpu/#_5","title":"\ud574\uacb0","text":"<p>\ud638\uc2a4\ud2b8 \ud654\uba74\uc740 \uc798 \uaebc\uc9c0\uc9c0\ub9cc \uac8c\uc2a4\ud2b8 \ud654\uba74\uc774 \ucf1c\uc9c0\uc9c8 \uc54a\uc74c. \ub85c\uadf8\ub97c \uc0b4\ud3b4\ubcf4\uc790</p> <p>hook \uc2a4\ud06c\ub9bd\ud2b8 \ub85c\uadf8: /var/log/libvirt/qemu-hook.log VM\ubcc4 QEMU \ub85c\uadf8: /var/log/libvirt/qemu/win10.log libvirt \ub370\ubaac \ub85c\uadf8: journalctl -u virtqemud -u libvirtd -f \ucee4\ub110/VFIO \uba54\uc2dc\uc9c0: dmesg | grep -i vfio <pre><code>vfio-pci ... resetting \u2026 reset done\nNVRM: GPU 0000:01:00.0 is already bound to vfio-pci.\n</code></pre> \uc815\uc0c1 \uc791\ub3d9.</p> <p>\ud734\ub300\ud3f0 \ud50c\ub798\uc2dc\ub85c \ube44\ucdb0\ubcf4\ub2c8 \ud654\uba74\uc774 \ubcf4\uc784. \ud328\ub110 \ubc31\ub77c\uc774\ud2b8 \ubb38\uc81c\uc784\uc744 \uc54c \uc218 \uc788\uc74c. \uc65c \ud328\ub110 \ubc31\ub77c\uc774\ud2b8\uac00 \uc548\ucf1c\uc9c0\ub0d0? igpu\uac00 \uc5c6\uace0 dgpu\ub9cc \uc788\ub294 \ubaa8\ub378\uc740 \ud504\ub808\uc784\ubc84\ud37c\uac00 dpgu \uc804\uc6a9 vram\uc5d0\ub9cc \uc788\uac8c \ub418\uace0 \ud328\ub110 eDP \uc2e0\ud638\uc120 \ub610\ud55c dpgu display port \uc5d4\uc9c4\uc5d0\ub9cc \ubb3c\ub824 \uc788\ub2e4. \ub610\ud55c \ub178\ud2b8\ubd81\uc5d0\uc11c\ub294 \uc8fc\ub85c EC(Embedded Controller)\uac00 \ubc1d\uae30\ub97c \uc870\uc808\ud558\ub294 \ucee8\ud2b8\ub864\ub7ec\uc778\ub370, ROM\uc5d0 EC \ud38c\uc6e8\uc5b4\uac00 \ud0d1\uc7ac\ub418\uc5b4 \uc788\uc73c\uba70 ACPI\ub77c\ub294 \ud14c\uc774\ube14\uc744 \ud1b5\ud574 \uc774\uac78 os\ub85c \ub118\uaca8\uc8fc\uac8c \ub41c\ub2e4. \ud558\uc9c0\ub9cc qemu \ubd80\ud305\uc5d0\uc11c\ub294 EC \uad00\ub828 ACPI\ub97c \uc0dd\uc131\ud558\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 \ubc31\ub77c\uc774\ud2b8\ub97c \ud0ac \uc218 \uc5c6\ub294 \uac83\uc774\ub2e4. \uadf8\ub7ec\ub098 \uc694\uc998 \ud328\ub110\uc5d0\ub294 DPCD \uc8fc\uc18c\ub85c AUX \ucc44\ub110(DisplayPort \ubc30\uc120\uc5d0 \ud3ec\ud568\ub41c \ub9c1\ud06c \uc81c\uc5b4 \ubc0f \ubc31\ub77c\uc774\ud2b8 \uc870\uc815 \ucc44\ub110)\uc744 \uc870\uc808\ud560 \uc218 \uc788\uac8c \ud574\ub1a8\uae30\uc5d0 EC \uc5c6\uc774\ub3c4 \uc870\uc808\uc774 \uac00\ub2a5\ud558\ub2e4. geforce rtx 4060 game ready \ub4dc\ub77c\uc774\ubc84 552.12 WHQL \uacc4\uc5f4\ubd80\ud130 NVAPI\ub97c \ud1b5\ud574 eDP AUX \uacbd\ub85c(DPCD \ub808\uc9c0\uc2a4\ud130 0x720/0x722/0x723)\ub85c \ubc1d\uae30 \uac12\uc744 \uc4f0\ub294 \uac8c \uac00\ub2a5\ud558\ub2e4 \uc801\ud600 \uc788\uc73c\ubbc0\ub85c \uc774\uac78 \uc774\uc6a9\ud558\uc790. \ud639\uc740 ovmf\ub85c \ubd80\ud305\ud574\ub3c4 \ubc31\ub77c\uc774\ud2b8 \ubb38\uc81c\uac00 \ud574\uacb0\ub41c\ub2e4</p> <p>\uac8c\uc2a4\ud2b8 spice \uc6d0\uaca9\ud654\uba74 \uc811\uc18d <pre><code># \uc6d0\uaca9\ucef4\uc5d0\uc11c\nvirt-manager.org/download \ub4e4\uc5b4\uac00\uc11c virt-viewer \uce74\ud14c\uace0\ub9ac\uc5d0\uc11c win x64 msi \ub2e4\uc6b4\ubc1b\uae30\n$ virsh start win10\n$ virsh domdisplay win10\nspice://127.0.0.1:5900\n\ub2e4\ub978 cmd $ ssh -N -L 5900:127.0.0.1:5900 kkongnyang2@172.30.1.69   # \ub0b4\ubd80 \uc11c\ube44\uc2a4 \uc811\uc18d \uac00\ub2a5\ud55c \uba85\ub839\uc5b4\nC:\\Program Files\\VirtViewer v12\\bin \ub4e4\uc5b4\uac00\uc11c remote-viewer.exe \ud074\ub9ad\nspice://127.0.0.1:5900 \uc5f0\uacb0\n</code></pre> * spice? \uac00\uc0c1 \uba38\uc2e0 \uc6d0\uaca9 \uc811\uc18d \ud504\ub85c\ud1a0\ucf5c</p> <p>\uac8c\uc2a4\ud2b8\uc5d0\uc11c nvidia \ub4dc\ub77c\uc774\ubc84 \uc124\uce58 <pre><code>geforce - geforce RTX 40 series (notebooks) - geforce RTX 4060 laptop GPU - window 10 64-bit - English(US) - geforce game ready driver\n</code></pre></p> <p>\u26a0\ufe0f \ud638\uc2a4\ud2b8\ub97c \ubabb\ubd04 + \ubc31\ub77c\uc774\ud2b8 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uc9c0 \ubabb\ud574 \ub0b4 \ub178\ud2b8\ubd81\uc5d0\uc11c \ud654\uba74\uc774 \uc548\ubcf4\uc784. \ub178\ud2b8\ubd81 \uad50\uccb4</p>"},{"location":"4-3-two-gpu/","title":"4 3 two gpu","text":""},{"location":"4-3-two-gpu/#dgpu-vm","title":"DGPU \ud480 \ud328\uc2a4\uc2a4\ub8e8 vm\uc744 \ub9cc\ub4e4\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-08-08</p>"},{"location":"4-3-two-gpu/#_1","title":"&gt; \uac00\uc0c1\ud654 \uc9c0\uc6d0 \ud655\uc778","text":"<p>cpu \uac00\uc0c1\ud654 \uc9c0\uc6d0 \uc5ec\ubd80 <pre><code>$ egrep -c '(vmx|svm)' /proc/cpuinfo    # 0\uc774 \uc544\ub2c8\uc5b4\uc57c \ud568. UEFI\uc5d0\uc11c Intel VT-x/AMD-V \ud65c\uc131\ud654 \ud544\uc694\n40            # \ub17c\ub9ac cpu 40\uac1c \ubaa8\ub450\uac00 Intel VT-x \ud50c\ub798\uadf8\ub97c \uac16\uace0 \uc788\ub2e4\ub294 \ub73b\n</code></pre></p> <p>\uc7a5\uce58 IOMMU \uc874\uc7ac \uc5ec\ubd80 <pre><code>$ sudo dmesg | grep -i -e iommu -e dmar\n[    0.005034] ACPI: DMAR 0x000000005BA13000 000088 (v01 ACRSYS ACRPRDCT 00000002 1025 00040000)\n[    0.005073] ACPI: Reserving DMAR table memory at [mem 0x5ba13000-0x5ba13087]\n[    0.103447] DMAR: Host address width 39\n[    0.103448] DMAR: DRHD base: 0x000000fed90000 flags: 0x0\n[    0.103453] DMAR: dmar0: reg_base_addr fed90000 ver 4:0 cap 1c0000c40660462 ecap 29a00f0505e\n[    0.103455] DMAR: DRHD base: 0x000000fed91000 flags: 0x1\n[    0.103458] DMAR: dmar1: reg_base_addr fed91000 ver 5:0 cap d2008c40660462 ecap f050da\n[    0.103459] DMAR: RMRR base: 0x00000064000000 end: 0x000000687fffff\n[    0.103461] DMAR-IR: IOAPIC id 2 under DRHD base  0xfed91000 IOMMU 1\n[    0.103461] DMAR-IR: HPET id 0 under DRHD base 0xfed91000\n[    0.103462] DMAR-IR: Queued invalidation will be enabled to support x2apic and Intr-remapping.\n[    0.105022] DMAR-IR: Enabled IRQ remapping in x2apic mode\n[    0.642545] pci 0000:00:02.0: DMAR: Skip IOMMU disabling for graphics\n[    1.096406] iommu: Default domain type: Translated\n[    1.096406] iommu: DMA domain TLB invalidation policy: lazy mode\n[    1.141664] DMAR: No ATSR found\n[    1.141665] DMAR: No SATC found\n[    1.141666] DMAR: IOMMU feature fl1gp_support inconsistent\n[    1.141666] DMAR: IOMMU feature pgsel_inv inconsistent\n[    1.141667] DMAR: IOMMU feature nwfs inconsistent\n[    1.141668] DMAR: IOMMU feature dit inconsistent\n[    1.141669] DMAR: IOMMU feature sc_support inconsistent\n[    1.141669] DMAR: IOMMU feature dev_iotlb_support inconsistent\n[    1.141670] DMAR: dmar0: Using Queued invalidation\n[    1.141673] DMAR: dmar1: Using Queued invalidation\n[    1.141843] pci 0000:00:02.0: Adding to iommu group 0\n[    1.142381] pci 0000:00:00.0: Adding to iommu group 1\n[    1.142394] pci 0000:00:01.0: Adding to iommu group 2\n[    1.142401] pci 0000:00:04.0: Adding to iommu group 3\n[    1.142409] pci 0000:00:08.0: Adding to iommu group 4\n[    1.142416] pci 0000:00:0a.0: Adding to iommu group 5\n[    1.142424] pci 0000:00:0e.0: Adding to iommu group 6\n[    1.142438] pci 0000:00:14.0: Adding to iommu group 7\n[    1.142445] pci 0000:00:14.2: Adding to iommu group 7\n[    1.142452] pci 0000:00:14.3: Adding to iommu group 8\n[    1.142464] pci 0000:00:15.0: Adding to iommu group 9\n[    1.142471] pci 0000:00:15.1: Adding to iommu group 9\n[    1.142483] pci 0000:00:16.0: Adding to iommu group 10\n[    1.142497] pci 0000:00:1b.0: Adding to iommu group 11\n[    1.142506] pci 0000:00:1c.0: Adding to iommu group 12\n[    1.142520] pci 0000:00:1e.0: Adding to iommu group 13\n[    1.142527] pci 0000:00:1e.1: Adding to iommu group 13\n[    1.142546] pci 0000:00:1f.0: Adding to iommu group 14\n[    1.142553] pci 0000:00:1f.3: Adding to iommu group 14\n[    1.142561] pci 0000:00:1f.4: Adding to iommu group 14\n[    1.142569] pci 0000:00:1f.5: Adding to iommu group 14\n[    1.142583] pci 0000:01:00.0: Adding to iommu group 15\n[    1.142592] pci 0000:01:00.1: Adding to iommu group 15\n[    1.142608] pci 0000:02:00.0: Adding to iommu group 16\n[    1.142617] pci 0000:03:00.0: Adding to iommu group 17\n[    1.142627] pci 0000:03:01.0: Adding to iommu group 18\n[    1.142636] pci 0000:03:02.0: Adding to iommu group 19\n[    1.142649] pci 0000:03:03.0: Adding to iommu group 20\n[    1.142661] pci 0000:04:00.0: Adding to iommu group 21\n[    1.142673] pci 0000:23:00.0: Adding to iommu group 22\n[    1.142681] pci 0000:43:00.0: Adding to iommu group 23\n[    1.145510] DMAR: Intel(R) Virtualization Technology for Directed I/O\n[    1.564068] pci 10000:e0:01.0: Adding to iommu group 6\n[    1.564492] pci 10000:e0:01.1: Adding to iommu group 6\n[    1.564860] pci 10000:e1:00.0: Adding to iommu group 6\n</code></pre></p> <p>qemu \uc9c0\uc6d0 \uac00\ub2a5 \uc5ec\ubd80 <pre><code>$ virt-host-validate\n  QEMU: Checking for hardware virtualization                                 : PASS\n  QEMU: Checking if device /dev/kvm exists                                   : PASS\n  QEMU: Checking if device /dev/kvm is accessible                            : PASS\n  QEMU: Checking if device /dev/vhost-net exists                             : PASS\n  QEMU: Checking if device /dev/net/tun exists                               : PASS\n  QEMU: Checking for cgroup 'cpu' controller support                         : PASS\n  QEMU: Checking for cgroup 'cpuacct' controller support                     : PASS\n  QEMU: Checking for cgroup 'cpuset' controller support                      : PASS\n  QEMU: Checking for cgroup 'memory' controller support                      : PASS\n  QEMU: Checking for cgroup 'devices' controller support                     : WARN (Enable 'devices' in kernel Kconfig file or mount/enable cgroup controller in your system)\n  QEMU: Checking for cgroup 'blkio' controller support                       : PASS\n  QEMU: Checking for device assignment IOMMU support                         : PASS\n  QEMU: Checking if IOMMU is enabled by kernel                               : PASS\n  QEMU: Checking for secure guest support                                    : WARN (Unknown if this platform has Secure Guest support)\n   LXC: Checking for Linux &gt;= 2.6.26                                         : PASS\n   LXC: Checking for namespace ipc                                           : PASS\n   LXC: Checking for namespace mnt                                           : PASS\n   LXC: Checking for namespace pid                                           : PASS\n   LXC: Checking for namespace uts                                           : PASS\n   LXC: Checking for namespace net                                           : PASS\n   LXC: Checking for namespace user                                          : PASS\n   LXC: Checking for cgroup 'cpu' controller support                         : PASS\n   LXC: Checking for cgroup 'cpuacct' controller support                     : PASS\n   LXC: Checking for cgroup 'cpuset' controller support                      : PASS\n   LXC: Checking for cgroup 'memory' controller support                      : PASS\n   LXC: Checking for cgroup 'devices' controller support                     : FAIL (Enable 'devices' in kernel Kconfig file or mount/enable cgroup controller in your system)\n   LXC: Checking for cgroup 'freezer' controller support                     : FAIL (Enable 'freezer' in kernel Kconfig file or mount/enable cgroup controller in your system)\n   LXC: Checking for cgroup 'blkio' controller support                       : PASS\n   LXC: Checking if device /sys/fs/fuse/connections exists                   : PASS\n</code></pre></p>"},{"location":"4-3-two-gpu/#_2","title":"&gt; \ud328\ud0a4\uc9c0 \uc124\uce58 \ubc0f \ubaa8\ub4c8 \ud655\uc778","text":"<p>\ud544\uc218 \ud328\ud0a4\uc9c0 \uc124\uce58 <pre><code>$ sudo apt update\n$ sudo apt install -y qemu-kvm \\\n                    libvirt-daemon-system libvirt-clients virt-manager \\  # vm \uad00\ub9ac \ub9e4\ub2c8\uc800\n                    bridge-utils build-essential pkg-config git ovmf \\\n                    autoconf automake libtool flex bison check \\    # \ube4c\ub4dc \ud234\n                    libglib2.0-dev libvirt-dev libjson-c-dev \\      # libvmi \ube4c\ub4dc\uc5d0 \ud544\uc694\ud55c dev\n                    python3 python3-pip python3-dev\n</code></pre></p> <p>kvm \ubaa8\ub4c8 \uc0ac\uc6a9\uc790 \ucd94\uac00 <pre><code>$ lsmod | grep kvm        # KVM \ubaa8\ub4c8 \ud655\uc778\nkvm_intel             487424  0\nkvm                  1413120  1 kvm_intel\nirqbypass              12288  1 kvm\n$ sudo usermod -aG libvirt,kvm $USER    # \ud604\uc7ac \uc0ac\uc6a9\uc790\ub97c libvirt, kvm \uadf8\ub8f9\uc5d0 \ucd94\uac00\ud574 root \uc5c6\uc774 \uc811\uadfc\n                                        # \ub098\uc911\uc5d0 \ud574\uc81c\ud558\ub824\uba74 sudo gpasswd -d &lt;USER&gt; &lt;GROUP&gt;\n</code></pre></p> <p>vfio \ubaa8\ub4c8 \ucf1c\ubcf4\uae30(\uc874\uc7ac \ud655\uc778) <pre><code>$ sudo modprobe vfio_pci      # \ud0a4\uae30\n$ lsmod | grep vfio\nvfio_pci               16384  0\nvfio_pci_core          90112  1 vfio_pci\nvfio_iommu_type1       49152  0\nvfio                   69632  3 vfio_pci_core,vfio_iommu_type1,vfio_pci\niommufd                98304  1 vfio\nirqbypass              12288  2 vfio_pci_core,kvm\n</code></pre></p>"},{"location":"4-3-two-gpu/#dpgu","title":"dpgu \uc8fc\uc18c \ubc0f \uadf8\ub8f9 \uc815\ubcf4","text":"<p>PCI \uc8fc\uc18c\uc640 ID \ud655\uc778 <pre><code>$ lspci -nn | grep -i -e vga -e audio   # gpu\uc5d0 audio \uc7a5\uce58\uac00 \ub538\ub824 \uc788\ub294 \uacbd\uc6b0\uac00 \ub9ce\uae30 \ub54c\ubb38\uc5d0 \uac19\uc774 ID \uac19\uc774 \ucc3e\uc74c\n0000:00:02.0 VGA compatible controller [0300]: Intel Corporation Device [8086:a788] (rev 04)\n0000:00:1f.3 Multimedia audio controller [0401]: Intel Corporation Device [8086:7a50] (rev 11)\n0000:01:00.0 VGA compatible controller [0300]: NVIDIA Corporation Device [10de:28e0] (rev a1)\n0000:01:00.1 Audio device [0403]: NVIDIA Corporation Device [10de:22be] (rev a1)\n</code></pre> * PCI \uc8fc\uc18c? \ubc84\uc2a4 \uc2ac\ub86f \uc5b4\ub514\uc5d0 \uaf42\ud600 \uc788\ub098 * \ubca4\ub354:\ub514\ubc14\uc774\uc2a4 ID? \uc81c\uc870\uc0ac+\ubaa8\ub378 \ucf54\ub4dc\ub85c \ubb34\uc2a8 \uc7a5\uce58\uc778\uac00 VGA : PCI \uc8fc\uc18c 01:00.0\uc5d0 ID 10de:28e0 Audio : PCI \uc8fc\uc18c 01:00.1\uc5d0 ID 10de:22be \uc774\uac8c \uadf8\ub8f9\uc774 \ub9de\ub294\uc9c0 iommu_groups\uc744 \ud655\uc778\ud574\ubcf4\uc790</p> <p>Iommu_groups \ud655\uc778 <pre><code>$ for g in /sys/kernel/iommu_groups/*; do\n  echo \"Group $(basename $g):\"; ls -l $g/devices; echo; done\nGroup 15:\ntotal 0\nlrwxrwxrwx 1 root root 0  8\uc6d4  8 16:22 0000:01:00.0 -&gt; ../../../../devices/pci0000:00/0000:00:01.0/0000:01:00.0\nlrwxrwxrwx 1 root root 0  8\uc6d4  8 16:22 0000:01:00.1 -&gt; ../../../../devices/pci0000:00/0000:00:01.0/0000:01:00.1\n</code></pre> \ub530\ub77c\uc11c \ub458\uc740 15\ubc88 \uadf8\ub8f9\uc774 \ub9de\uace0 \uc774\uac70 \ub450\uac1c\ub9cc \ub118\uae30\uba74 \ub428</p>"},{"location":"4-3-two-gpu/#dgpu","title":"dgpu \ubd84\ub9ac","text":"<p>\ucee4\ub110 \ud30c\ub77c\ubbf8\ud130\ub85c vfio\uac00 dpgu \uc120\uc810 <pre><code>$ sudo nano /etc/default/grub\n\uc6d0\ubcf8\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash\"\n\uc218\uc815\n# iommu=pt \ud328\uc2a4\uc2a4\ub8e8 \uc7a5\uce58\ub9cc \ud1b5\uacfc vfio-pci.ids \uc120\uc810\ud560 PCI ID \uc9c0\uc815 \nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash intel_iommu=on iommu=pt kvm.ignore__msrs=1 vfio-pci.ids=10de:28e0,10de:22be\"\n$ sudo update-grub\n</code></pre></p> <p>\ubd80\ud305\uc2dc vfio \ubaa8\ub4c8 \uc790\ub3d9 \ub85c\ub4dc <pre><code>$ sudo nano /etc/modules\nvfio\nvfio_pci\nvfio_iommu_type1\n</code></pre></p> <p>VGA BAR \ucc28\ub2e8 \ubc0f \ud574\ub2f9 \ub4dc\ub77c\uc774\ubc84 \ube14\ub799\ub9ac\uc2a4\ud2b8 <pre><code>$ sudo nano /etc/modprobe.d/vfio.conf\noptions vfio-pci ids=10de:28e0,10de:22be disable_vga=1\nblacklist nvidia nvidia_drm nouveau\n$ sudo update-initramfs -u\n</code></pre></p> <p>\uc7ac\ubd80\ud305 \ud6c4 \ud655\uc778 <pre><code>$ sudo reboot\n$ lspci -nnk -d 10de:28e0\n0000:01:00.0 VGA compatible controller [0300]: NVIDIA Corporation Device [10de:28e0] (rev a1)\n    Subsystem: Acer Incorporated [ALI] Device [1025:1731]\n    Kernel driver in use: vfio-pci\n    Kernel modules: nvidiafb, nouveau\n</code></pre></p>"},{"location":"4-3-two-gpu/#vm","title":"vm \uc0dd\uc131","text":"<p>iso \ub2e4\uc6b4\ub85c\ub4dc <pre><code>https://www.microsoft.com/software-download/windows10 \ub4e4\uc5b4\uac00 \uc601\uc5b4(\ubbf8\uad6d) 64\ube44\ud2b8 \ub2e4\uc6b4\ub85c\ub4dc. Win10_22H2_English_x64v1.iso. \uc708\ub3c4\uc6b0 \uc124\uce58\ub97c \uc704\ud55c DVD \uc5ed\ud560.\n$ sudo mv ~/Downloads/Win10_22H2_English_x64v1.iso /var/lib/libvirt/images/\n\uad8c\ud55c libvirt-qemu:kkongnyang2\n</code></pre></p> <p>vm \uc0dd\uc131 <pre><code>$ virt-manager\n\uc0c8 vm \ub9cc\ub4e4\uae30\nlocal install media - browse - images\uc5d0 \uc788\ub294 Win10_22H2_English_x64v1.iso \uc120\ud0dd. \uc708\ub3c4\uc6b0 10.\n\uba54\ubaa8\ub9ac 16000MB, cpu 10\uac1c\n\uc800\uc7a5\uc18c \ud65c\uc131\ud654. \ub514\uc2a4\ud06c \uc774\ubbf8\uc9c0 160.0GB. \uc774\ub984 win10 (\uc704\uce58 /var/lib/libvirt/images/win10.qcow2)     # win10.qcow2 : \ube48 \ud558\ub4dc\ub514\uc2a4\ud06c.\ncustom \uc120\ud0dd\nOverview\uc5d0\uc11c Q35, UEFI x86_64 : OVMF_CODE_4M.fd \uc120\ud0dd\nCPUs\uc5d0\uc11c host-passthruogh \uccb4\ud06c \ud655\uc778\nAdd hardware - PCI Host Device - 0000:01:00:0\uacfc 0000:01:00:1 \uc120\ud0dd\nDisplay Spice - Spice server, none(\ub0b4 \ucef4\ud4e8\ud130 \uc548\uc5d0\uc11c\ub9cc \uc6d0\uaca9 \uc811\uc18d)\n\uc644\ub8cc \ud6c4 \uc124\uce58\n</code></pre></p> <p>\ud639\uc2dc virtio \ub4dc\ub77c\uc774\ubc84 \ud544\uc694\ud558\uba74 <pre><code>https://fedorapeople.org/groups/virt/virtio-win/direct-downloads \ub4e4\uc5b4\uac00 stable - virtio-win-0.1.271.iso \ub2e4\uc6b4\ub85c\ub4dc. virtio \ub4dc\ub77c\uc774\ubc84\ub4e4 \ubaa8\uc74c.\n$ sudo mv ~/Downloads/virtio-win-0.1.271.iso /var/lib/libvirt/images/\n\uad8c\ud55c libvirt-qemu:kkongnyang2\n$ virt-manager\nadd hardware - storage - images\uc5d0 \uc788\ub294 virtio-win.iso, cdrom, sata\n</code></pre></p> <p>hostdev\ub97c \ud574\uc8fc\uae34 \ud588\uc9c0\ub9cc \uc544\uc9c1 \ud574\ub2f9 nvidia \ub4dc\ub77c\uc774\ubc84\uc640 looking glass \uc5d4\uc9c4\uc774 \uac8c\uc2a4\ud2b8\uc5d0 \uc5c6\uc5b4\uc11c \uac00\uc0c1 vga \uc5d0\ubbac\ub808\uc774\uc158 = qxl \ube44\ub514\uc624(\uac00\uc0c1 gpu) + spice \uc6d0\uaca9 + virt-viewer\ub85c \ucc3d \ucd9c\ub825 \uad6c\uc870\uc784.</p> <p>\uc708\ub3c4\uc6b0 \ubc0f \ub4dc\ub77c\uc774\ubc84 \uc124\uce58 <pre><code>\uacc4\uc815 \uc785\ub825 \ub098\uc624\uba74 shift+f10 \ub204\ub974\uace0 start ms-cxh:localonly. kkongnyang2\uc5d0 \uc554\ud638 4108\n\uc708\ub3c4\uc6b0 \uc5c5\ub370\uc774\ud2b8\ub85c \ub4dc\ub77c\uc774\ubc84 \uc54c\uc544\uc11c \uc124\uce58\ndevice manager \ub4e4\uc5b4\uac00 \ub290\ub08c\ud45c \uc5c6\ub294\uc9c0 \ud655\uc778\n</code></pre></p> <p>\u26a0\ufe0f \uc131\uacf5\uc740 \ud568</p>"},{"location":"5-vmi/","title":"5 vmi","text":""},{"location":"5-vmi/#vmi","title":"VMI\uc758 \uad6c\uc870\ub97c \uc774\ud574\ud574\ubcf4\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-08-02</p>"},{"location":"5-vmi/#_1","title":"&gt; \ud558\uc774\ud37c\ubc14\uc774\uc800 \uc120\ud0dd","text":"\ud558\uc774\ud37c\ubc14\uc774\uc800 VMI \uce5c\ud654\ub3c4 \uc7a5\uc810 \ub2e8\uc810 \ub300\ud45c \ud234/\ud504\ub85c\uc81d\ud2b8 Xen \u2605\u2605\u2605\u2605\u2605 LibVMI \uc6d0\uc870\uae09, altp2m \uae30\ubc18 \uba54\ubaa8\ub9ac \uc774\ubca4\ud2b8, DRAKVUF \ub4f1 \ud48d\ubd80 \uc124\uc815/\uc6b4\uc601 \ubcf5\uc7a1, \ucd5c\uc2e0 HW \uc9c0\uc6d0/\ud638\ud658\uc131 \uc774\uc288 DRAKVUF, LibVMI KVM/QEMU \u2605\u2605\u2605\u2605\u2606 \ub9ac\ub205\uc2a4 \uae30\ubcf8, libvirt \uc5f0\ub3d9 \uc27d\uace0 \ub110\ub9ac \uc0ac\uc6a9 \uc774\ubca4\ud2b8 \ud2b8\ub7a9 \uad6c\ud604 \uc2dc Xen\ubcf4\ub2e4 \uc190\uc774 \ub354 \uac10 LibVMI, PyVMI VMware ESXi \u2605\u2605\u2605\u2605\u2606 \uacf5\uc2dd introspection API, \uc548\uc815\uc801 \uc0c1\uc6a9/\ud3d0\uc1c4\uc801, \ube44\uc6a9, \uc790\uc720\ub3c4 \uc81c\ud55c VMware VMI SDK (Thin agent) Hyper-V \u2605\u2605\u2606\u2606\u2606 Windows \uce5c\ud654, \ucee4\ub110 \ub808\ubca8 \uc811\uadfc \uac00\ub2a5 \uacf5\uac1c \ub3c4\uad6c \uc801\uc74c, \uad6c\ud604 \ub09c\uc774\ub3c4 \uc790\uccb4 \uac1c\ubc1c \ud544\uc694 VirtualBox \u2605\u2606\u2606\u2606\u2606 \uc14b\uc5c5 \uc26c\uc6c0 VMI\uc6a9 API \uc0ac\uc2e4\uc0c1 \uc5c6\uc74c, hacky \uc791\uc5c5 \ud544\uc694 \uc9c1\uc811 /proc/\u2026/mem \uc811\uadfc \ub4f1 \u201c\uaf3c\uc218\u201d Bareflank/ACRN \u2605\u2605\u2606\u2606\u2606 \uacbd\ub7c9/\uc624\ud508\uc18c\uc2a4, \uc5f0\uad6c \ubaa9\uc801 \uc88b\uc74c \ubb38\uc11c/\ucee4\ubba4\ub2c8\ud2f0 \uc791\uc74c, \ubaa8\ub4e0 \uae30\ub2a5 \uc9c1\uc811 \uad6c\ud604 \ucee4\uc2a4\ud140 \ud558\uc774\ud37c\ubc14\uc774\uc800 \uac1c\ubc1c <p>\uba54\ubaa8\ub9ac \uc774\ubca4\ud2b8 \ud2b8\ub7a9\uc774\uba74 Xen + LibVMI (DRAKVUF \uad6c\uc870 \ucc38\uace0) libvirt \uc5c6\uc774 Xen \uc790\uccb4 \ud234(xl) \uc0ac\uc6a9. altp2m\ub85c \ud398\uc774\uc9c0 \uad8c\ud55c \ubc14\uafd4 \ud2b8\ub7a9 \uc7a1\uae30 \uc218\uc6d4.</p> <p>\uc774\ubbf8 \uc6b0\ubd84\ud22c\uc5d0 kvm \ud658\uacbd\uc774\ub77c\uba74 KVM/QEMU + LibVMI libvirt\ub85c \ud3b8\ud558\uac8c \uad00\ub9ac \ud558\uace0, \ubb38\uc11c \ub9ce\uc740 libvmi/pyvmi\ub85c.</p> <ul> <li>kvm(kernel based virtual machine) \ub9ac\ub205\uc2a4 \ucee4\ub110 \ubaa8\ub4c8. VT-x\ub97c \uc0ac\uc6a9\ud574\uc11c \uac8c\uc2a4\ud2b8 cpu \uc2e4\ud589\uc744 \ucee4\ub110 \ub808\ubca8\uc5d0\uc11c \uac00\uc18d\ud574\uc90c. qemu\ub294 \uac00\uc0c1\uba38\uc2e0 \ud558\uc774\ud37c\ubc14\uc774\uc800.</li> </ul> <p>\uc708\ub3c4\uc6b0 \ud658\uacbd\uc5d0\uc11c hyper-v\ub85c \uc791\uc5c5\ud558\uba74 \ubc14\ub85c \uc624\ubc84\uc6cc\uce582 \uc548\ud2f0\uce58\ud2b8\uc5d0 \ud0d0\uc0c9</p>"},{"location":"5-vmi/#vmi_1","title":"vmi \ud234","text":"<p>VMI\ub780? \uc774\ubbf8 \uc2e4\ud589 \uc911\uc778 VM \ub0b4\ubd80 \uc0c1\ud0dc(\uba54\ubaa8\ub9ac, \ub808\uc9c0\uc2a4\ud130, \ud30c\uc77c\uc2dc\uc2a4\ud15c \ub4f1)\ub97c \ubc14\uae65(\ud558\uc774\ud37c\ubc14\uc774\uc800)\uc5d0\uc11c \ub4e4\uc5ec\ub2e4\ubcf4\uac70\ub098 \uc870\uc791\ud558\ub294 \uae30\uc220. \uac8c\uc2a4\ud2b8 \ubc16\uc5d0\uc11c \uc774\ub904\uc9c0\ubbc0\ub85c \uc548\ud2f0\uce58\ud2b8 \uc785\uc7a5\uc5d0\uc11c\ub294 \uc544\ubb34\uac83\ub3c4 \uc54c \uc218 \uc5c6\ub2e4.</p> <p>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502  \ud638\uc2a4\ud2b8 OS / \ud558\uc774\ud37c\ubc14\uc774\uc800\u2502  \u2190 LibVMI\u00b7DRAKVUF \uac19\uc740 VMI \ub77c\uc774\ube0c\ub7ec\ub9ac \u2502  (VMI \ub300\uc0c1 \uba54\ubaa8\ub9ac \ub9f5)   \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bd\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502      \uac8c\uc2a4\ud2b8 VM          \u2502  \u2190 Windows 10 + \uac8c\uc784 + \uc548\ud2f0\uce58\ud2b8 \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502 \u2502  \u2502  \uac8c\uc784 \ud504\ub85c\uc138\uc2a4 \u2502      \u2502 \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</p> <p>VMI \ud504\ub85c\uadf8\ub7a8 \uad6c\uc131</p> <p>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502         Python \ub808\ubca8           \u2502 \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502 \u2502  \u2502 PyVMI  \u2502   \u2502  r2vmi   \u2502    \u2502 \u2502  \u2514\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518    \u2502 \u2502     \u2502               \u2502         \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502          C \ub77c\uc774\ube0c\ub7ec\ub9ac         \u2502 \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502 \u2502  \u2502 libvmi \u2502   \u2502 libkvmi  \u2502    \u2502 \u2502  \u2514\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518    \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502        \ud558\uc774\ud37c\ubc14\uc774\uc800 \uce35        \u2502 \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  (\uc635\uc158)       \u2502 \u2502  \u2502 QEMU(KVM)  \u2502\u2500\u2500\u2500KVMI \ud328\uce58   \u2502 \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502         Linux \ucee4\ub110(KVM)       \u2502 \u2502      (\uc635\uc158: kvmi-intro patch) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</p>"},{"location":"5-vmi/#_2","title":"\ud544\uc694\ud55c \uac8c\uc2a4\ud2b8 \uc815\ubcf4","text":"<p>[\ud544\uc694\uc815\ubcf4]   \u251c\u2500 \uc2dd\ubcc4: (domain name | domid | qemu pid)   \u251c\u2500 \uc8fc\uc18c\ubcc0\ud658: DTB (CR3)   \u251c\u2500 \ud574\uc11d: \ud504\ub85c\ud30c\uc77c(json) - \uc2ec\ubcfc \uc8fc\uc18c\uc640 \uad6c\uc870\uccb4 \ud544\ub4dc \uc624\ud504\uc14b   \u2514\u2500 ostype, KASLR \uc5ec\ubd80, \uad8c\ud55c</p> <p>domid, \uba54\ubaa8\ub9ac \ub9f5, DTB\ub97c libvirt API\ub85c \uc790\ub3d9\uc73c\ub85c \uac00\uc838\uc62c \uc218 \uc788\uc74c. \uc9c1\uc811 qemu\ub85c \uc2e4\ud589\ud55c vm\ub294 /proc//mem \ub4f1\uc744 \uc9c1\uc811 \ub9e4\ud551\ud574\uc57c \ud568 <p>(1) VM \uc2dd\ubcc4\uc744 \uc704\ud55c domain name</p> <p>domain name : libvirt\uc5d0\uc11c vm\uc744 \uad6c\ubd84\ud558\ub294 \ubb38\uc790\uc5f4 \uc774\ub984. \uc0ac\uc6a9\uc790\uac00 \uc9c1\uc811 \uc815\ud568 domain ID : libvirt\uac00 \uc2e4\ud589 \uc911\uc778 vm\uc5d0 \ubd80\uc5ec\ud558\ub294 \uc77c\uc2dc\uc801 \ub7f0\ud0c0\uc784 ID. virsh domid  \ub85c \ud655\uc778. qemu PID : qemu \ud504\ub85c\uc138\uc2a4\uc758 pid. ps aux | grep qemu-system-x86_64 \uac19\uc740 \uac78\ub85c \ud655\uc778 <p>(2) \uc8fc\uc18c \ubcc0\ud658\uc744 \uc704\ud55c DTB (Directory Table Base) \uac8c\uc2a4\ud2b8 \uac00\uc0c1 \uc8fc\uc18c(VA)\ub97c \ubb3c\ub9ac \uc8fc\uc18c(PA)\ub85c \ubc14\uafc0 \ub54c \ud544\uc694\ud55c \ud398\uc774\uc9c0 \ud14c\uc774\ube14 \ub8e8\ud2b8 \ubb3c\ub9ac \uc8fc\uc18c. x86-64\uc5d0\uc11c CR3 \ub808\uc9c0\uc2a4\ud130\uac00 \uac00\ub9ac\ud0a8\ub2e4. libvmi\uac00 \uc790\ub3d9\uc73c\ub85c \ucc3e\uc544\uc8fc\uae30\ub3c4 \ud558\uc9c0\ub9cc, \uc2e4\ud328\ud558\uba74 \uc9c1\uc811 \uc9c0\uc815 \ub9ac\ub205\uc2a4\ub294 task_struct-&gt;mm-&gt;pgd\uc5d0\uc11c \ubf51\uace0, \uc708\ub3c4\uc6b0\uba74 EPROCESS.DirectoryTableBase\uc5d0\uc11c \ubf51\ub294\ub2e4.</p> <p>(3) \uc758\ubbf8 \uc788\ub294 \ud574\uc11d\uc744 \uc704\ud55c \ud504\ub85c\ud30c\uc77c(json \ud615\uc2dd) \uc2ec\ubcfc \uc8fc\uc18c\uc640 \ucee4\ub110 \uad6c\uc870\uccb4 \ud544\ub4dc \uc624\ud504\uc14b \uc815\ubcf4. \ub9ac\ub205\uc2a4\uba74 System.map(\uacf5\uac1c \uc2ec\ubcfc \uc8fc\uc18c) + vmlinux\ub97c \ubc14\ud0d5\uc73c\ub85c dwarf2json(vilatility) \ud234\uc744 \uc774\uc6a9\ud574 \ub9cc\ub4e0\ub2e4. \uc708\ub3c4\uc6b0\uba74 PDB(program database)\ub97c \ubc14\ud0d5\uc73c\ub85c volatility/rekall/drakpdb \ud234\uc744 \uc774\uc6a9\ud574 \ub9cc\ub4e0\ub2e4.</p> <p>(4) \uadf8\ubc16\uc5d0\ub3c4 KASLR(\ucee4\ub110 \uc8fc\uc18c \ub79c\ub364\ud654. libvmi\uac00 DTB\ub97c \ucc3e\uae30 \uc5b4\ub835\uac8c \ud568) \uc0ac\uc6a9 \uc5ec\ubd80(linux_kaslr=true), \uad8c\ud55c(root), /etc/libvmi.conf \uc811\uadfc\uc131 \ub4e4\uc774 \ud544\uc694\ud558\ub2e4.</p>"},{"location":"5-vmi/#vmi_2","title":"vmi \uc2dc\ub098\ub9ac\uc624","text":"<p>1) KVM(\ub9ac\ub205\uc2a4)\uc5d0\uc11c Legacy \ubc29\uc2dd (LibVMI + QEMU GDB/\ud328\uce58)</p> <p>\ud750\ub984/\uad6c\uc870</p> <p>\ud638\uc2a4\ud2b8\uc758 LibVMI\uac00 QEMU\uc758 \uc61b \uba54\ubaa8\ub9ac \uc811\uadfc \uacbd\ub85c(GDB stub \ub610\ub294 QEMU fast-memaccess \ud328\uce58)\ub85c \uac8c\uc2a4\ud2b8 RAM\uc744 \uc77d\uace0 \uc500. \ud558\uc774\ud37c\ubc14\uc774\uc800 \ub808\ubca8 \uc774\ubca4\ud2b8(\uc2e4\ud589/\uc4f0\uae30 \ud2b8\ub7a9)\ub294 \uc0ac\uc2e4\uc0c1 \uc5c6\uc74c. LibVMI\ub97c \ube4c\ub4dc\ud560 \ub54c -DENABLE_KVM_LEGACY \uc635\uc158\uc73c\ub85c \ucf2c. </p> <p>\uac00\ub2a5\ud55c \uae30\ub2a5</p> <p>\ubb3c\ub9ac/\uac00\uc0c1 \uba54\ubaa8\ub9ac \uc77d\uae30\u00b7\uc4f0\uae30, \ub808\uc9c0\uc2a4\ud130 \uc811\uadfc, \uc77c\uc2dc\uc815\uc9c0/\uc7ac\uac1c \ub4f1 \uae30\ubcf8 VMI. \ud558\uc9c0\ub9cc \uba54\ubaa8\ub9ac \uc774\ubca4\ud2b8(\uc2e4\ud589/\uc77d\uae30/\uc4f0\uae30 \ud6c5) \ub294 \ubbf8\uc9c0\uc6d0(\ub610\ub294 \ub9e4\uc6b0 \uc81c\ud55c\uc801) \u2192 \uc2e4\uc2dc\uac04 \ud6c5 \uae30\ubc18 \ubd84\uc11d/\ubc29\uc5b4\uc5d4 \ubd80\uc801\ud569. </p> <p>\ud638\ud658/\ud604\uc2e4\uc131(2025)</p> <p>KVM\uc774 \ub3cc\uc544\uac00\uae30\ub9cc \ud558\uba74(\ub300\ubd80\ubd84\uc758 \ucd5c\uc2e0 Intel/AMD) \uc791\ub3d9 \uac00\ub2a5. \ub2e4\ub9cc GDB stub/\ud328\uce58 \uacbd\ub85c\ub294 \ub290\ub9ac\uace0 \ucde8\uc57d\ud558\uba70, \ucd5c\uc2e0 QEMU/\ucee4\ub110\uacfc\uc758 \uad81\ud569 \uc774\uc288\uac00 \uc7a6\uc74c(\ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c\ub3c4 \u201c\uacfc\uac70 \ubc29\uc2dd\u201d\uc73c\ub85c \ubd84\ub958). \ucd08\ubcf4\uc790 \uad8c\uc7a5 X. </p> <p>2) KVMI \ucee4\ub110 \uacbd\ub85c (KVM-VMI: \ucee4\ub110\u00b7QEMU \ud328\uce58 + libkvmi)</p> <p>\ud750\ub984/\uad6c\uc870</p> <p>KVM\uc5d0 KVMi(=KVMI) \uc11c\ube0c\uc2dc\uc2a4\ud15c\uc744 \ucd94\uac00\ud55c \ucee4\ub110(CONFIG_KVM_INTROSPECTION, kvmi-v7 \ub4f1) + KVMI \ub300\uc751 QEMU\ub85c \uac8c\uc2a4\ud2b8\ub97c \uc62c\ub9bc \u2192 \ud638\uc2a4\ud2b8\uc758 libkvmi/LibVMI\uac00 \uacf5\uc2dd\uc801\uc778 VMI API(chardev)\ub97c \ud1b5\ud574 \ud398\uc774\uc9c0 \uc811\uadfc \uc81c\uc5b4, \uc774\ubca4\ud2b8 \ud1b5\uc9c0, vCPU \uc0c1\ud0dc \uc870\ud68c \ub4f1\uc744 \uc218\ud589. </p> <p>\uac00\ub2a5\ud55c \uae30\ub2a5</p> <p>VM \uc77c\uc2dc\uc815\uc9c0\u00b7\uc7ac\uac1c, vCPU GPR/MSR \uc870\ud68c, EPT(\uac19\uc740 HW \ubc31\ud0b9) \uae30\ubc18 \ud398\uc774\uc9c0 \uc811\uadfc\ube44\ud2b8 \uc870\uc791, \uc811\uadfc/\uc2e4\ud589 fault \uc774\ubca4\ud2b8 \uc218\uc2e0, \ud558\uc774\ud37c\ucf5c/MSR \ubcc0\uacbd \uac10\uc2dc \ub4f1 \ub2a5\ub3d9 VMI. </p> <p>\ud638\ud658/\ud604\uc2e4\uc131(2025)</p> <p>\uba54\uc778\ub77c\uc778\uc774 \uc544\ub2c8\ub77c \ubcc4\ub3c4 \ube0c\ub79c\uce58(\ucee4\ub110/ QEMU) \ub97c \ube4c\ub4dc\ud574\uc57c \ud574\uc11c \uc720\uc9c0\ubcf4\uc218 \ubd80\ub2f4 \ud07c. \uc608\uc81c\u00b7\ub9b4\ub9ac\uc2a4\ub294 \uc874\uc7ac\ud558\uc9c0\ub9cc(\ucd5c\uc2e0 \ub9b4\ub9ac\uc2a4 2023) \ucd5c\uc2e0 \ubc30\ud3ec\ud310 \ucee4\ub110\uacfc\uc758 \ubc84\uc804 \ud540ning\uc774 \ud544\uc218. EPT \uc804\uc81c\ub97c \uba85\uc2dc(\ubb38\uc11c\uac00 \u201c\uc608: Intel\uc758 EPT\u201d\ub77c \uc11c\uc220)\ud558\ubbc0\ub85c AMD NPT\ub294 \uc9c0\uc6d0/\uae30\ub2a5 \uc81c\uc57d\uc744 \ud655\uc778 \ud544\uc694. \ucd08\ubcf4\uc790 \ub09c\uc774\ub3c4 \ub192\uc74c. </p> <p>3) Xen + LibVMI (\uac00\uc7a5 \ud45c\uc900\uc801\uc778 VMI \uacbd\ub85c)</p> <p>\ud750\ub984/\uad6c\uc870</p> <p>Xen \ud558\uc774\ud37c\ubc14\uc774\uc800 \uc704\uc5d0 Windows/Linux \uac8c\uc2a4\ud2b8 \uc2e4\ud589 \u2192 Dom0(\ub610\ub294 \ubcc4\ub3c4 \ub3c4\uba54\uc778)\uc758 LibVMI\uac00 Xen\uc758 VMI/\uba54\ubaa8\ub9ac \uc774\ubca4\ud2b8(vm_event, mem_access, altp2m) \ub97c \uc774\uc6a9\ud574 \uac8c\uc2a4\ud2b8 \uba54\ubaa8\ub9ac/\ub808\uc9c0\uc2a4\ud130 \uc811\uadfc + \ud558\ub4dc\uc6e8\uc5b4 \uc218\uc900 \ud2b8\ub7a9\uc744 \uc218\ud589. </p> <p>\uac00\ub2a5\ud55c \uae30\ub2a5</p> <p>\uba54\ubaa8\ub9ac \uc77d\uae30\u00b7\uc4f0\uae30, vCPU \ub808\uc9c0\uc2a4\ud130 \uc811\uadfc + \uc2e4\ud589/\uc77d\uae30/\uc4f0\uae30 \uc774\ubca4\ud2b8 \ud6c5, \uc2f1\uae00\uc2a4\ud15d, altp2m(\ub300\uccb4 EPT) \uc2a4\uc651 \ub4f1 \ud48d\ubd80\ud55c \uc774\ubca4\ud2b8 \uae30\ubc18 VMI. LibVMI \uce21 \ubb38\uc11c\ub3c4 \uba54\ubaa8\ub9ac \uc774\ubca4\ud2b8\ub294 \ud604\uc7ac Xen\uc5d0\uc11c\ub9cc \uc9c0\uc6d0\uc774\ub77c \uba85\uc2dc. </p> <p>\ud638\ud658/\ud604\uc2e4\uc131(2025)</p> <p>\ucd5c\uc2e0 Intel VT-x/EPT \ud658\uacbd\uc5d0\uc11c \ub9e4\uc6b0 \uc131\uc219. Xen\uc740 ARM 2-stage paging\ub3c4 \uc9c0\uc6d0(\uae30\ub2a5 \ucc28\uc774 \uc874\uc7ac), \uc77c\ubc18\uc801\uc73c\ub860 Intel/EPT\uc5d0\uc11c \uac00\uc7a5 \uc548\uc815\uc801. AMD NPT\uc5d0\uc11c\ub3c4 \uae30\ubcf8 \uba54\ubaa8\ub9ac \uc811\uadfc\uc740 \uac00\ub2a5\ud558\ub098, \uace0\uae09 \uc774\ubca4\ud2b8/altp2m \uae30\ubc18 \uae30\ub2a5\uc740 Intel EPT \uc911\uc2ec \uc0dd\ud0dc\uacc4. \uc2e4\ubb34/\uc5f0\uad6c \ucee4\ubba4\ub2c8\ud2f0\uc640 \uc790\ub8cc\uac00 \uac00\uc7a5 \ud48d\ubd80. </p> <p>4) Xen + DRAKVUF \uc5d4\uc9c4 + DRAKVUF Sandbox</p> <p>\ud750\ub984/\uad6c\uc870</p> <p>\u2462\uc758 Xen/VMI \uae30\ubc18 \uc704\uc5d0 DRAKVUF \uc5d4\uc9c4\uc744 \uc62c\ub824 \uc5d0\uc774\uc804\ud2b8 \uc5c6\ub294 \ud2b8\ub808\uc774\uc2f1(syscall, \ud30c\uc77c/\ub808\uc9c0\uc2a4\ud2b8\ub9ac, \ud504\ub85c\uc138\uc2a4, \uba54\ubaa8\ub9ac \ub364\ud504 \ub4f1)\uc744 \uc218\ud589.</p> <p>DRAKVUF Sandbox(drakkvuf-sandbox) \ub294 \uadf8 \uc5d4\uc9c4\uc744 \uc790\ub3d9\ud654/\uc6f9UI/\ud050/\uc2a4\ub0c5\uc0f7 \ud15c\ud50c\ub9bf\ub85c \uac10\uc2fc \uc790\ub3d9 \ubd84\uc11d \ud30c\uc774\ud504\ub77c\uc778. \uc124\uce58\ub3c4 \u201cXen\uacfc DRAKVUF \uc5d4\uc9c4\uc744 \uba3c\uc800 \uc900\ube44\u201d\uac00 1\ub2e8\uacc4. </p> <p>\uac00\ub2a5\ud55c \uae30\ub2a5</p> <p>\ub300\ub7c9 \uc790\ub3d9 \uc0cc\ub4dc\ubc15\uc2f1(\uc2dc\ub8cc \uc5c5\ub85c\ub4dc\u2192\uc2e4\ud589\u2192\ud589\uc704 \uc218\uc9d1\u2192\ub9ac\ud3ec\ud2b8), \ud504\ub85c\uc138\uc2a4/\uc2dc\uc2a4\ud15c\ucf5c/\ud30c\uc77c\u00b7\ub124\ud2b8\uc6cc\ud06c\u00b7\uc2a4\ub0c5\uc0f7/\uc2a4\ud06c\ub9b0\uc0f7 \uc218\uc9d1 \ub4f1. \ubc18\uba74, \uc784\uc758 \uc8fc\uc18c \uc989\uc2dc \ud328\uce58 \uac19\uc740 \ubbf8\uc138 \uc870\uc791\uc740 \uae30\ubcf8 \uc6cc\ud06c\ud50c\ub85c\uac00 \uc544\ub2d8(\uc5d4\uc9c4/LibVMI API\ub85c \uad6c\ud604\uc740 \uac00\ub2a5). </p> <p>\ud638\ud658/\ud604\uc2e4\uc131(2025)</p> <p>\ud558\ub4dc\uc6e8\uc5b4 \uc694\uad6c: Intel VT-x + EPT \ud544\uc218(AMD \ubbf8\uc9c0\uc6d0) \ub97c \uba85\uc2dc. \ucd5c\uc2e0 Intel CPU\ub77c\uba74 \ub300\uccb4\ub85c OK. \uc0cc\ub4dc\ubc15\uc2a4 \ubb38\uc11c\ub3c4 CPU \ud655\uc778 \ubc29\ubc95(vmxept \ud50c\ub798\uadf8)\uacfc \uc18c\uc2a4 \ube4c\ub4dc \uad8c\uc7a5\uc744 \uc548\ub0b4. \uad6c\ucd95 \ub09c\uc774\ub3c4\ub294 \u2462\ubcf4\ub2e4 \ud55c \ub2e8\uacc4 \ub192\uc74c(\uc5d4\uc9c4+\uc6f9 \uc2a4\ud0dd+\uc2a4\ub0c5\uc0f7 \ud15c\ud50c\ub9bf).</p>"},{"location":"6-1-kvm-legacy/","title":"6 1 kvm legacy","text":""},{"location":"6-1-kvm-legacy/#kvm-vmi","title":"kvm \ub808\uac70\uc2dc \ubc29\uc2dd\uc73c\ub85c vmi\ub97c \uad6c\ud604\ud574\ubcf4\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-08-02</p>"},{"location":"6-1-kvm-legacy/#libvmi","title":"libvmi \ub77c\uc774\ube0c\ub7ec\ub9ac \uc124\uce58","text":"<p>libvmi = vmi\ub97c \uc704\ud55c c \ub77c\uc774\ube0c\ub7ec\ub9ac</p> <p>libvmi \uc124\uce58 <pre><code>git clone https://github.com/libvmi/libvmi.git\ncd libvmi\nmkdir build\ncd build\ncmake .. -DENABLE_KVM=ON -DENABLE_KVM_LEGACY=ON -DENABLE_XEN=OFF -DCMAKE_BUILD_TYPE=Release\nmake -j$(nproc)\nsudo make install &amp;&amp; sudo ldconfig    # \uc124\uce58\uc640 \ub77c\uc774\ube0c\ub7ec\ub9ac \uac31\uc2e0\n</code></pre></p> <p>conf \ud30c\uc77c \uc0dd\uc131 <pre><code>sudo nano /etc/libvmi.conf\nwin10 {\n    driver = \"kvm\";\n    ostype = \"Windows\";\n}\n</code></pre></p>"},{"location":"6-1-kvm-legacy/#volatility3","title":"volatility3 \ud234 \uc124\uce58","text":"<p>volatility3 = \ud504\ub85c\ud30c\uc77c \ub9cc\ub4e4\uae30 \uc804\uc6a9 \ud234</p> <p>\uc804\uc6a9 \uac00\uc0c1\ud658\uacbd \ub9cc\ub4e4\uae30 <pre><code>sudo apt install -y python3-venv\npython3 -m venv ~/vol3env       # \uac00\uc0c1\ud658\uacbd \uc0dd\uc131\nsource ~/vol3env/bin/activate   # \ud604\uc7ac \uc258\uc758 path\uac00 vol3env \uc544\ub798\ub97c \ubc14\ub77c\ubcf4\ub3c4\ub85d \ud558\uc5ec \uac00\uc0c1\ud658\uacbd \uc9c4\uc785(\ud65c\uc131\ud654) \ud130\ubbf8\ub110\ub9c8\ub2e4\ndeactivate                      # \uac00\uc0c1\ud658\uacbd \uc885\ub8cc\npython3 -m venv --clear ~/vol3env   # vol3env \uc804\uccb4\ub97c \uc9c0\uc6c0\n</code></pre> * \uc2dc\uc2a4\ud15c \ud30c\uc774\uc36c(/usr/lib/python)\uacfc \uc11e\uc5ec \ubc84\uc804, \uc758\uc874\uc131\uc774 \ucda9\ub3cc\ud560\uae4c\ubd10</p> <p>volatility3 \uc124\uce58 <pre><code>pip install --upgrade pip        # apt\ub294 \uc6b0\ubd84\ud22c \ud328\ud0a4\uc9c0, pip\uc740 \ud30c\uc774\uc36c \ud328\ud0a4\uc9c0\npip install volatility3          # \ucd5c\uc2e0 \uc548\uc815\ud310 2.26.0\uc774 \uc124\uce58\ub428\nvol -h            # \ub3c4\uc6c0\ub9d0\uc774 \ub728\uba74 \uc815\uc0c1\n</code></pre></p>"},{"location":"6-1-kvm-legacy/#guid","title":"GUID \uc54c\uc544\uc624\uae30","text":"<p>GUID = \ucee4\ub110 \ubc14\uc774\ub108\ub9ac \uc9c0\ubb38</p> <p>vmi-win-guid <pre><code>$ echo 0 | sudo tee /proc/sys/kernel/yama/ptrace_scope        # \uad8c\ud55c \uc5f4\uc5b4\ub450\uae30\n$ sudo vmi-win-guid name win10\nWindows Kernel found @ 0x3800000\n    Version: 64-bit Windows 10\n    PE GUID: 7feeb8781046000\n    PDB GUID: 495e39042a6983378cbd822feb4e91ed1\n    Kernel filename: ntkrnlmp.pdb\n    Multi-processor without PAE\n    Signature: 17744.\n    Machine: 34404.\n    # of sections: 33.\n    # of symbols: 0.\n    Timestamp: 2146351224.\n    Characteristics: 34.\n    Optional header size: 240.\n    Optional header type: 0x20b\n    Section 1: .rdata\n    Section 2: .pdata\n    Section 3: .idata\n    Section 4: .edata\n    Section 5: PROTDATA\n    Section 6: GFIDS\n    Section 7: Pad1\n    Section 8: .text\n    Section 9: PAGE\n    Section 10: PAGELK\n    Section 11: POOLCODE\n    Section 12: PAGEKD\n    Section 13: PAGEVRFY\n    Section 14: PAGEHDLS\n    Section 15: PAGEBGFX\n    Section 16: INITKDBG\n    Section 17: TRACESUP\n    Section 18: KVASCODE\n    Section 19: RETPOL\n    Section 20: MINIEX\n    Section 21: INIT\n    Section 22: Pad2\n    Section 23: .data\n    Section 24: ALMOSTRO\n    Section 25: CACHEALI\n    Section 26: PAGEDATA\n    Section 27: PAGEVRFD\n    Section 28: INITDATA\n    Section 29: Pad3\n    Section 30: CFGRO\n    Section 31: Pad4\n    Section 32: .rsrc\n    Section 33: .reloc\n</code></pre> * sudo vmi-win-guid name win10 \ub294 \uba54\ubaa8\ub9ac\uc5d0 \uc801\uc7ac\ub41c ntoskrnl.exe \uc758 PE \ud5e4\ub354\ub97c \uc2a4\uce94\ud574\uc11c \u201cPDB GUID + Age\u201d \uac12\uc744 \ucd9c\ub825\ub9cc \ud574 \uc8fc\ub294 \ub3c4\uad6c</p>"},{"location":"6-1-kvm-legacy/#json","title":"JSON \ud504\ub85c\ud30c\uc77c \ub9cc\ub4e4\uae30","text":"<p>\uc55e\uc5d0\uc11c \ucc3e\uc740 PDB GUID \uac12\ub9cc \ub123\uc5b4\uc8fc\uba74 \ub41c\ub2e4.</p> <p>PDB \ubc1b\uace0 JSON \ubcc0\ud658 <pre><code>$ python3 -m volatility3.framework.symbols.windows.pdbconv \\\n  -p ntkrnlmp.pdb \\                                 # \ud30c\uc77c \uc774\ub984\n  -g 495e39042a6983378cbd822feb4e91ed1 \\            # GUID+AGE \uac12\n  -o ntkrnlmp-19045.json                            # \uacb0\uacfc\ubb3c\n</code></pre> * \uc778\ud130\ub137\uc774 \uc5f0\uacb0\ub3fc \uc788\uc73c\uba74 pdbconv\uac00 MS \uc11c\ubc84\uc5d0\uc11c PDB\ub97c \ub0b4\ub824\ubc1b\uc544 \ubc14\ub85c JSON\uc73c\ub85c \ubcc0\ud658\ud574 \uc900\ub2e4. * DRAKVUF sandbox\ub77c\ub294 \uc804\uccb4 \uc790\ub3d9\ud654 \ud234\uc774 \uc788\uc74c. \uadfc\ub370 intel cpu + \uc6b0\ubd84\ud22c 22.04 + xen \uc804\uc6a9\uc784.</p> <p>conf \ud30c\uc77c\uc5d0 \ucd94\uac00 <pre><code>$ sudo nano /etc/libvmi.conf\nwin10 {\n    driver = \"kvm\";\n    ostype = \"Windows\";\n    json = \"/home/kkongnyang2/ntkrnlmp-19045.json\"\n}\n</code></pre></p> <p>\ucc38\uace0\ub85c JSON\uc740 \u201cEPROCESS -&gt; DirectoryTableBase \uc624\ud504\uc14b = 0x28C\u201d \uac19\uc740 \uad6c\uc870\uccb4\u00b7\uc2ec\ubcfc \uc0c1\ub300 \uc624\ud504\uc14b\ub9cc \ub2f4\uace0, \uc808\ub300 \uc8fc\uc18c\ub294 \ub7f0\ud0c0\uc784 \uacc4\uc0b0\uc5d0 \ub9e1\uae34\ub2e4. Base Address, CR3/DTB \uac12, \ubb3c\ub9ac \uc8fc\uc18c \ub9e4\ud551 \uc804\ubd80 \ub7f0\ud0c0\uc784\uc5d0 \uacb0\uc815\ub418\uae30 \ub54c\ubb38\uc774\ub2e4.</p>"},{"location":"6-1-kvm-legacy/#pyvmi","title":"pyvmi \ubc14\uc778\ub529","text":"<p>pyvmi = vmi\ub97c \uc704\ud55c python \ud655\uc7a5 \ubaa8\ub4c8</p> <p>pyvmi \uc124\uce58 <pre><code># \ube4c\ub4dc \ub3c4\uad6c\uc640 \uc758\uc874\uc131 \uc124\uce58\n$ sudo apt install build-essential python3-dev libffi-dev \\\n                 libglib2.0-dev libjson-c-dev pkg-config git\n$ python -m pip install --upgrade pip setuptools wheel pycparser cffi\n# \uc18c\uc2a4\ud310 \uc124\uce58(pip\uc73c\ub85c \ub9cc\ub4e4\uc5b4\uc9c0\ub294 \uaca9\ub9ac\ub97c \ub9c9\uc544 vol3env\uc5d0 \uc124\uce58\ub41c \ud328\ud0a4\uc9c0 \ucc38\uc870 \uac00\ub2a5)\n$ python -m pip install --no-build-isolation \"git+https://github.com/libvmi/python.git#egg=libvmi\"\n</code></pre></p> <p>python \ucf54\ub4dc <pre><code>$ mkdir -p ~/scripts\n$ nano ~/scripts/vm_readmem.py\n#!/usr/bin/env python3\nfrom libvmi import Libvmi\nimport sys, struct\n\nVM_NAME   = \"win10\"          # libvirt \uc774\ub984\nPROC_NAME = \"notepad.exe\"    # \ucc3e\uc744 \ud504\ub85c\uc138\uc2a4\nTARGET_VA = 0x7ffe0000       # \uc608: SharedUserData\n\nvmi = Libvmi(VM_NAME)        # utils \uc5c6\uc774\ub3c4 attach OK\n\n# ---- JSON\uc5d0\uc11c \ud544\ub4dc offset \uac00\uc838\uc624\uae30 ----\noff_eproc_links = vmi.get_offset(\"WinEPROCESS\", \"ActiveProcessLinks\")\noff_eproc_name  = vmi.get_offset(\"WinEPROCESS\", \"ImageFileName\")\noff_eproc_pid   = vmi.get_offset(\"WinEPROCESS\", \"UniqueProcessId\")\noff_eproc_dtb   = vmi.get_offset(\"WinEPROCESS\", \"DirectoryTableBase\")\n\n# ---- PsActiveProcessHead \u2192 EPROCESS \ub9ac\uc2a4\ud2b8 \uc21c\ud68c ----\nhead = vmi.translate_ksym2v(\"PsActiveProcessHead\")\ncur  = vmi.read_addr_va(head, 0, 0)         # LIST_ENTRY-&gt;Flink\n\nfound = False\nwhile True:\n    eproc = cur - off_eproc_links           # LIST_ENTRY \uc5d0\uc11c \uad6c\uc870\uccb4 \uae30\uc900 \uc8fc\uc18c \uacc4\uc0b0\n    name  = vmi.read_str_va(eproc + off_eproc_name, 15, 0).decode(errors=\"ignore\")\n    if name.lower() == PROC_NAME:\n        pid = vmi.read_32_va(eproc + off_eproc_pid, 0)\n        dtb = vmi.read_64_va(eproc + off_eproc_dtb, 0)\n        found = True\n        break\n    cur = vmi.read_addr_va(cur, 0, 0)       # \ub2e4\uc74c \ub178\ub4dc\n    if cur == head:\n        break                               # \ub9ac\uc2a4\ud2b8 \ud55c \ubc14\ud034\n\nif not found:\n    vmi.destroy()\n    sys.exit(f\"{PROC_NAME} not found\")\n\n# ---- \uc6d0\ud558\ub294 \uac00\uc0c1 \uc8fc\uc18c \uc77d\uae30 ----\nphys = vmi.virtual_to_physical(TARGET_VA, dtb)\ndata = vmi.read(phys, 32)\n\nprint(f\"[+] {PROC_NAME} PID={pid}  DTB={hex(dtb)}\")\nprint(f\"[+] {hex(TARGET_VA)} -&gt; {data.hex()}\")\nvmi.destroy()\n$ chmod +x ~/scripts/vm_readmem.py\n$ sudo ~/scripts/vm_readmem.py\n</code></pre></p> <p>\u26a0\ufe0f conf\ub97c \ubabb\uc77d\uc74c. \uc774\ubbf8 \uad6c\ubc84\uc804\uc774\ub77c \uc9c0\uc6d0\uc5ec\ubd80\uac00 \ubd88\ubd84\uba85\ud558\ub2e4\uace0 \ud568</p>"},{"location":"6-2-xen-drakvuf/","title":"6 2 xen drakvuf","text":""},{"location":"6-2-xen-drakvuf/#xen-drakvuf-sandbox-vmi","title":"xen drakvuf sandbox \ubc29\uc2dd\uc73c\ub85c vmi\ub97c \uad6c\ud604\ud574\ubcf4\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-08-08</p>"},{"location":"6-2-xen-drakvuf/#xen","title":"Xen \uc124\uce58","text":"<p>Xen? \ud0c0\uc7851 \ud558\uc774\ud37c\ubc14\uc774\uc800.</p> <p>\uae54\uba74 grub \ud654\uba74\uc5d0\uc11c \uc708\ub3c4\uc6b0 / \uc6b0\ubd84\ud22c / \uc6b0\ubd84\ud22c on xen \uc138\uac1c \uc911\uc5d0 \uc120\ud0dd\uac00\ub2a5. \uc708\ub3c4\uc6b0 : UEFI \u279c Windows \ubd80\ud2b8 \ub85c\ub354 \uc6b0\ubd84\ud22c : UEFI \u279c GRUB \u279c vmlinuz-... \uc6b0\ubd84\ud22c on xen : UEFI \u279c GRUB \u279c xen-4.19.gz \u279c vmlinuz-...</p> <p>\uc989 xen hypervisor \uc704\uc5d0\uc11c \uc6b0\ubd84\ud22c\ub97c \uc62c\ub9b0 \uc138\ubc88\uc9f8 \ud615\ud0dc\uac00 \uc0dd\uae34 \uac83\uc784 \ubd80\ud2b8\ub85c\ub354(Grub) \u2192 Xen hypervisor \u2192 Dom0(\ub9ac\ub205\uc2a4 \ucee4\ub110) \u2192 DomU(\uac8c\uc2a4\ud2b8 VM)</p> <p>\ucc38\uace0\ub85c type 1 \ud558\uc774\ud37c\ubc14\uc774\uc800\uc778\ub370 Dom0 DomU \uad6c\ubd84\uc774 \uc65c \uc788\ub0d0 \ud558\uba74, \uadf8\ub798\ub3c4 \ud558\ub4dc\uc6e8\uc5b4\ub97c \ub2e4\ub8e8\ub294 \uc8fc os\ub294 \uc788\uc5b4\uc57c \ud558\uae30 \ub54c\ubb38</p> <p>\ube4c\ub4dc \ub3c4\uad6c \uc124\uce58 <pre><code>$ sudo apt update\n$ sudo apt-get install wget git build-essential make gcc clang bcc \\\n    libcurl4-openssl-dev libpci-dev zlib1g-dev bridge-utils\n$ sudo apt install flex bison python3-dev libncurses-dev \\\n     libssl-dev libelf-dev libglib2.0-dev libpixman-1-dev \\\n     pkg-config gettext uuid-dev iasl libyajl-dev ninja-build meson\n</code></pre></p> <p>Xen 4.19.2 <pre><code>$ wget https://downloads.xenproject.org/release/xen/4.19.2/xen-4.19.2.tar.gz\n$ tar xf xen-4.19.2.tar.gz\n$ cd ~/xen-4.19.2\n$ make distclean                      # \uc774\uc804 \ube4c\ub4dc \uc0b0\ucd9c\ubb3c \uc0ad\uc81c\n$ ./configure --disable-docs          # \ubb38\uc11c \uc5c6\ub294 \uc124\uc815\n$ make -j$(nproc) world               # \ubcd1\ub82c \ube4c\ub4dc\n$ sudo make install\n$ ls -lh /boot/xen-4.19*.gz         # \ud558\uc774\ud37c\ubc14\uc774\uc800 \uc774\ubbf8\uc9c0 \ud655\uc778\n-rw-r--r-- 1 root root 1.2M  8\uc6d4  5 14:54 /boot/xen-4.19.2.gz\nlrwxrwxrwx 1 root root   13  8\uc6d4  5 15:00 /boot/xen-4.19.gz -&gt; xen-4.19.2.gz\n</code></pre></p>"},{"location":"6-2-xen-drakvuf/#xen_1","title":"Xen \ubb38\uc81c\ud574\uacb0","text":"<p>\ub77c\uc774\ube0c\ub7ec\ub9ac \uc704\uce58 conf <pre><code>$ sudo xl info | head                 # \ud5e4\ub4dc info. xen\uc73c\ub85c \ubd80\ud305\ub41c\uac74\uc9c0 \uccb4\ud06c\ud558\ub294\uac70\uc784\n\uc544\uc9c1 \uc77c\ubc18 \uc6b0\ubd84\ud22c\uc774\uae30\uc5d0 cannot connect \ub294 \ub9de\uc9c0\ub9cc, \ub77c\uc774\ube0c\ub7ec\ub9ac \uc624\ub958\uae4c\uc9c0 \ub738\n$ sudo find /usr/local -name 'libxl*.so*' -o -name 'libxen*so*'     # xen \ub77c\uc774\ube0c\ub7ec\ub9ac \uc704\uce58 \ucc3e\uae30\n/usr/local/lib/libxencall.so.1.3\n/usr/local/lib/libxlutil.so.4.19\n(\uc0dd\ub7b5)\n\uc6d0\ub798 /usr/lib \uc774 \uc815\uc0c1\uc774\uc9c0\ub9cc /usr/local/lib \uc5d0 \uc124\uce58\ub41c \uac83 \ud655\uc778\necho /usr/local/lib | sudo tee /etc/ld.so.conf.d/local.conf     # \uc704\uce58 \ub4f1\ub85d\n$ sudo ldconfig                       # \uce90\uc2dc \uc7ac\uc0dd\uc131\n$ sudo update-grub                    # grub \uc124\uc815 \uac31\uc2e0\n</code></pre></p> <p>secure boot \ub044\uae30 <pre><code>\uc804\uc6d0 \uaed0\ub2e4 \ud0a4\uba74 grub \uba54\ub274\uc5d0 xen ubuntu\uac00 \ucd94\uac00\ub41c \uac83 \ud655\uc778.\n\uadfc\ub370 Secure Boot(\ud38c\uc6e8\uc5b4 UEFI \uc758 \ubcf4\uc548 \ubd80\ud305)\uc774 xen\uc744 \ub9c9\uc544\ubc84\ub824 \ubd80\ud305 \uc2e4\ud328\nf2\ub85c uefi \uc138\ud305\ucc3d \ub4e4\uc5b4\uac00\uc11c superviosr password\ub97c 4108\ub85c \uc124\uc815\ud574\uc8fc\uace0 secure boot\ub97c \ub048\ub2e4.\n</code></pre></p> <p>igpu\ub9cc \uc0ac\uc6a9 <pre><code>\uc774\ubc88\uc5d0\ub294 \ubd80\ud305\ud558\uba70 \ud558\uc580 \uae00\uc528\ub4e4\uc774 \ucb49 \ub728\uc9c0\ub9cc \uac80\uc740 \ud654\uba74\uc774 \ub5a0\ubc84\ub9bc\nnvidia \ubaa8\ub4c8\uc774 xen\uacfc \ud638\ud658\uc774 \uc548\ub418\uba70 \uc0dd\uae30\ub294 \ubb38\uc81c. \uc5b4\ucc28\ud53c dgpu\ub294 \ud328\uc2a4\uc2a4\ub8e8\ud560 \uac70\uae30\uc5d0 igpu\ub85c\ub9cc \ubd80\ud305\ud558\uc790\nuefi \ub4e4\uc5b4\uac00\uc11c \ub514\uc2a4\ud50c\ub808\uc774\ub97c optimus/dpgu only/auto select \uc911 auto select(mux) \uc120\ud0dd.\n$ sudo nano /etc/default/grub.d/xen.cfg\nGRUB_CMDLINE_XEN_DEFAULT=\"dom0_mem=16384M,max:16384M dom0_max_vcpus=10 iommu=1 driver-dma-ops=1 pciback.hide=(0000:01:00.0)(0000:01:00.1)\"\n# max\ub97c \ubd99\uc774\uba74 ballon \uae30\ub2a5\uc774 \uaebc\uc838 Dom0 \uba54\ubaa8\ub9ac \uace0\uc815\n# \ubd80\ud305 \uc9c1\ud6c4 xen \ud558\uc774\ud37c\ubc14\uc774\uc800\uc5d0\uac8c VT-d\ub97c \ud65c\uc131\ud654\ud558\ub77c\uace0 \uc9c0\uc2dc\n# Dom0 \ucee4\ub110\uc774 \uc18c\ud504\ud2b8 \ubc14\uc6b4\uc2a4 \ubc84\ud37c \ub300\uc2e0 \ud45c\uc900 dma_ops + IOMMU \uacbd\ub85c\ub97c \uc4f0\ub3c4\ub85d \uac15\uc81c\n# xen \uc2dc\uc791 \ub2e8\uacc4\uc5d0\uc11c \ud574\ub2f9 PCI \ud568\uc218\ub97c xen-pciback\uc774 \uc120\uc810\ud574 Dom0 \ucee4\ub110\uc774 \ubabb \uc7a1\uac8c \ub9cc\ub4e6.\nsudo update-grub                    # \ucee4\ub110 \uc774\ubbf8\uc9c0 \ub2e4\uc2dc \ub9cc\ub4e4\uae30\nsudo apt purge 'nvidia*'            # nvidia \uad00\ub828\ub41c\uac70 \uc81c\uac70 \ubc0f \ube14\ub799\ub9ac\uc2a4\ud2b8\necho \"blacklist nouveau\" | sudo tee /etc/modprobe.d/blacklist-nouveau.conf    # nouveau\ub3c4 \ube14\ub799\ub9ac\uc2a4\ud2b8\necho xen_pciback | sudo tee -a /etc/initramfs-tools/modules   # xen-pciback\uc744 initramfs\uc5d0 \ud3ec\ud568\nsudo update-initramfs -u            # \ub514\uc2a4\ud06c \uc774\ubbf8\uc9c0 \ub2e4\uc2dc \ub9cc\ub4e4\uae30\n</code></pre></p> <p>PCI \uc8fc\uc18c \ud655\uc778 <pre><code>(0000:01:00.0)(0000:01:00.1)\uc774 \ub9de\ub294\uc9c0 \ud639\uc2dc \ubab0\ub77c \ud655\uc778\n$ lspci -nn | grep -i -e vga -e audio\n0000:00:02.0 VGA compatible controller [0300]: Intel Corporation Device [8086:a788] (rev 04)\n0000:00:1f.3 Multimedia audio controller [0401]: Intel Corporation Device [8086:7a50] (rev 11)\n0000:01:00.0 VGA compatible controller [0300]: NVIDIA Corporation Device [10de:28e0] (rev a1)\n0000:01:00.1 Audio device [0403]: NVIDIA Corporation Device [10de:22be] (rev a1)\n$ for g in /sys/kernel/iommu_groups/*; do\n  echo \"Group $(basename $g):\"; ls -l $g/devices; echo; done\nGroup 15:\n\ud569\uacc4 0\nlrwxrwxrwx 1 root root 0  8\uc6d4  5 21:49 0000:01:00.0 -&gt; ../../../../devices/pci0000:00/0000:00:01.0/0000:01:00.0\nlrwxrwxrwx 1 root root 0  8\uc6d4  5 21:49 0000:01:00.1 -&gt; ../../../../devices/pci0000:00/0000:00:01.0/0000:01:00.1\n</code></pre></p> <p>wayland \ub300\uc2e0 xorg\ub85c \ubcc0\uacbd <pre><code>\ub85c\uadf8\uc778 \ud654\uba74\uae4c\uc9c0\ub294 \ub5b4\uc9c0\ub9cc \ucda9\ub3cc\uc774 \ub09c\uac74\uc9c0 \uba48\ucdb0\ubc84\ub9bc\n$ sudo journalctl -k -b -1 -n 300 --no-pager | less   # \uc9c1\uc804 \ubd80\ud305 \ucee4\ub110 \ub85c\uadf8 \ub9c8\uc9c0\ub9c9 300\uc904\nkernel: BUG: Bad page state in process gdm-wayland-ses  pfn:103249\n$ sudoedit /etc/gdm3/custom.conf\nWaylandEnable=false\nDefaultSession=gnome-xorg.desktop\n$ sudo systemctl restart gdm3\n</code></pre></p> <p>sof \uc624\ub514\uc624 \ubaa8\ub4c8 \ub044\uae30 <pre><code>\uc774\uc81c \ub4e4\uc5b4\uac00\uc9c0\uc9c0\ub9cc \ubb58 \ud2c0\uc5b4\ub3c4 \uc2e4\ud589\uc774 \uacc4\uc18d \ub85c\ub529\uc911\uc784\n$ sudo journalctl -k -b -1 -n 300 --no-pager | less   # \uc9c1\uc804 \ubd80\ud305 \ucee4\ub110 \ub85c\uadf8 \ub9c8\uc9c0\ub9c9 300\uc904\nSOF \uc624\ub514\uc624(snd_sof_*)\u00b7i915 \ud45c\uc900 \ucd08\uae30\ud654 \uba54\uc2dc\uc9c0\ub9cc \ud758\ub7ec\uac00\ub2e4 \uba48\ucda4\n\uc18c\ubb38\ub09c \uc5d0\uc774\uc11c 12~14\uc138\ub300 \ub178\ud2b8\ubd81 \uc774\uc288. SOF DSP\uac00 \ud38c\uc6e8\uc5b4 \ub85c\ub4dc\uc5d0\uc11c \uc218 \uc2ed \ucd08 \ube14\ub85c\ud0b9\u00b7GDM \ud0c0\uc784\uc544\uc6c3 \uc720\ubc1c\n# sof \uc624\ub514\uc624 \ubaa8\ub4c8 \ub044\uae30\n$ echo 'options snd_intel_dspcfg dlg_support=0' | sudo tee /etc/modprobe.d/disable-sof.conf\n# sof \uacc4\uc5f4 \ubaa8\ub4c8 \uc804\ubd80 \ube14\ub799\ub9ac\uc2a4\ud2b8\n$ echo \"blacklist snd_sof_pci_intel_tgl\nblacklist snd_sof_intel_hda_common\nblacklist snd_sof_pci\nblacklist snd_sof\n\" | sudo tee /etc/modprobe.d/blacklist-sof.conf\n# HDA \ubaa8\ub4dc\ub9cc \uac15\uc81c\n$ echo 'options snd_intel_dspcfg dsp_driver=1' | sudo tee /etc/modprobe.d/force-hda.conf\n$ sudo update-initramfs -u\n</code></pre></p>"},{"location":"6-2-xen-drakvuf/#xen_2","title":"Xen \ubd80\ud305","text":"<p>\uc798 \ub4e4\uc5b4\uac00\uc9c0\ub2c8 \ub4e4\uc5b4\uac00 \uc124\uc815\uc744 \ud574\uc8fc\uaca0\ub2e4</p> <p>\uc7a5\uce58 modprobe <pre><code>$ grep -i \"Xen version\" /var/log/dmesg\n[    0.983837] kernel: Xen version: 4.19.2 (preserve-AD)\n$ sudo modprobe xenfs xen_privcmd xen_evtchn xen_gntdev xen_gntalloc\n$ ls -ld /proc/xen\ndr-xr-xr-x 2 root root 0  8\uc6d4  6 01:19 /proc/xen\n$ ls -l /dev/xen/privcmd\ncrw------- 1 root root 10, 119  8\uc6d4  6 01:23 /dev/xen/privcmd\n$ lsmod | grep -E 'xen(fs|_evtchn|_privcmd)'\nxenfs                  12288  0\nxen_privcmd            32768  1 xenfs\n$ sudo xl info | head\nhost                   : kkongnyang2-Predator-PHN16-72\nrelease                : 6.8.0-65-generic\nversion                : #68~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC Tue Jul 15 18:06:34 UTC 2\nmachine                : x86_64\nnr_cpus                : 20\nmax_cpu_id             : 19\nnr_nodes               : 1\ncores_per_socket       : 10\nthreads_per_core       : 2\ncpu_mhz                : 2803.200\n</code></pre></p> <p>\ub370\ubaac \uacbd\ub85c \ubcc0\uacbd <pre><code>\uc77c\ubc18\uc801\uc73c\ub85c /usr\uac00 \uc815\uc0c1\uc774\uc9c0\ub9cc /usr/local\uc5d0 \uc124\uce58\ub410\uc5c8\uc74c.\n\uadf8\ub798\uc11c xenstored \uc18c\ucf13\uc744 \ud1b5\ud574 \ub3c4\uba54\uc778 \uc815\ubcf4\ub97c \uac00\uc838\uc640\uc57c \ud558\ub294\ub370 \ub370\ubaac\uc774 \uc5c6\uc5b4 xl list\uac00 \uadf8\ub300\ub85c \ube14\ub85d\ub428\n$ sudo ln -s /usr/local/sbin/xenstored /usr/sbin/xenstored\n$ sudo systemctl daemon-reload\n$ sudo systemctl start xenstored\n$ sudo xl list\nName                                        ID   Mem VCPUs  State   Time(s)\nDomain-0                                     0 16384    10     r-----     298.0\n</code></pre> wget https://download.qemu.org/qemu-8.2.2.tar.xz tar xf qemu-8.2.2.tar.xz cd qemu-8.2.2 ./configure --target-list=x86_64-softmmu,i386-softmmu \\             --enable-xen              \\             --enable-system           \\             --disable-docs make -j\"$(nproc)\" sudo make install         # /usr/local/bin/qemu-system-x86_64 \ub4f1 sudo ldconfig sudo ln -sf /usr/local/bin/qemu-system-x86_64 /usr/local/lib/xen/bin/ sudo ln -sf /usr/local/bin/qemu-system-i386   /usr/local/lib/xen/bin/</p>"},{"location":"6-2-xen-drakvuf/#libvmi-drakvuf","title":"libvmi + DRAKVUF \uc124\uce58","text":"<p>libvmi? vmi\ub97c \uc704\ud55c c \ub77c\uc774\ube0c\ub7ec\ub9ac \uc5d4\uc9c4 drakvuf? \ucd94\uc801, \ub364\ud504\ud558\ub294 C \ud504\ub85c\uadf8\ub7a8 drakvuf-sandbox? \ucd1d\ud569 \uc790\ub3d9\ud654 \ud328\ud0a4\uc9c0</p> <p>libvmi \ub77c\uc774\ube0c\ub7ec\ub9ac \uc124\uce58 <pre><code>sudo apt install libjson-c-dev doxygen cmake\ngit clone https://github.com/libvmi/libvmi\ncd libvmi\nmkdir build &amp;&amp; cd build\nrm -rf *\ncmake .. \\\n  -DCMAKE_BUILD_TYPE=Release \\\n  -DENABLE_XEN=ON  -DENABLE_KVM=OFF \\\n  -DENABLE_JSONC=ON\nmake -j$(nproc)\nsudo make install\nsudo ldconfig\n</code></pre></p> <p>DRAKVUF \ud504\ub85c\uadf8\ub7a8 \uc124\uce58 <pre><code>sudo apt install clang-15 lld-15 llvm-15 llvm-15-dev\nsudo ln -s /usr/bin/lld-15 /usr/bin/ld.lld\nsudo ln -sf /usr/bin/llvm-ar-15 /usr/bin/llvm-ar\ngit clone https://github.com/tklengyel/drakvuf\ncd drakvuf\nmeson setup build --native-file llvm.ini\nninja -C build\nsudo ninja -C build install\nsudo ldconfig\nwhich drakvuf\n/usr/local/bin/drakvuf\ndrakvuf --version\n</code></pre></p>"},{"location":"6-2-xen-drakvuf/#drakvuf-sandbox","title":"drakvuf-sandbox \uc0ac\uc6a9","text":"<p>root\ub85c \uc258 \uc811\uc18d <pre><code>sudo passwd root        # root\uc6a9 \ube44\ubc00\ubc88\ud638 \uc124\uc815\n\uc2e0\uaddc \ube44\ubc00\ubc88\ud638 : 4108\nsu                      # root\ub85c \uc811\uc18d\nexit                    # \uc885\ub8cc \uba85\ub839\uc5b4\n</code></pre></p> <p>\uc2e4\ud589 <pre><code>apt install iptables tcpdump dnsmasq qemu-utils bridge-utils libmagic1 redis-server python3.10-venv\npython3 -m venv /opt/venv\nsource /opt/venv/bin/activate\npip install --upgrade pip\npip install drakvuf-sandbox\n</code></pre></p> <p>vm \uc0dd\uc131 <pre><code>\uc708\ub3c4\uc6b0 \uc774\ubbf8\uc9c0 \uc124\uce58\ub97c \uc704\ud574\uc120 \ub450 \uac1c\uc758 iso \ud30c\uc77c\uacfc \ube48 \ud558\ub4dc\ub514\uc2a4\ud06c \ud558\ub098\uac00 \ud544\uc694\ud558\ub2e4.\n\nwin10_22H2_English_x64.iso : \ubd80\ud305 \uac00\ub2a5\ud55c DVD \uc5ed\ud560. vm\uc774 \uc774\uac78\ub85c \uccab \ubd80\ud305\ud558\uba70 \uc708\ub3c4\uc6b0 setup \uc2e4\ud589.\nvirtio-win.iso : \ub4dc\ub77c\uc774\ubc84 CD \uc5ed\ud560. setup\uc774 \uc774 viostor.inf\uc640 NetKVM.inf \ub97c \uc77d\uc5b4 virtio \uac00\uc0c1 HDD\ub97c \uc778\uc2dd\ud558\ub3c4\ub85d \ud568\nwin10.qcow2 : \ube48 \ud558\ub4dc\ub514\uc2a4\ud06c. setup\uc774 \uc5ec\uae30 \ud30c\ud2f0\uc158\uc744 \ub9cc\ub4e4\uace0 \uc708\ub3c4\uc6b0 \ud30c\uc77c\uc744 \ubcf5\uc0ac\ud558\uc5ec \uc7ac\ubd80\ud305\uc774 \ub05d\ub098\uba74 \uc708\ub3c4\uc6b0\uac00 \ub4e4\uc5b4 \uc788\ub294 \ub514\uc2a4\ud06c\uac00 \ub428.\n\nhttps://www.microsoft.com/software-download/windows10 \ub4e4\uc5b4\uac00 \uc601\uc5b4(\ubbf8\uad6d) 64\ube44\ud2b8 \ub2e4\uc6b4\ub85c\ub4dc. Win10_22H2_English_x64v1.iso\nhttps://fedorapeople.org/groups/virt/virtio-win/direct-downloads/ \ub4e4\uc5b4\uac00 stable-virtio/virtio-win-0.1.271.iso \ub2e4\uc6b4\n\nsudo apt install qemu-system-x86 ovmf\ndrakrun install \\\n    \"/home/kkongnyang2/\ub2e4\uc6b4\ub85c\ub4dc/Win10_22H2_English_x64v1.iso\" \\\n    --memory 12288 --vcpus 8\n</code></pre></p> <p>\u26a0\ufe0f vm\uc774 \uc548\ub9cc\ub4e4\uc5b4\uc9d0.</p>"},{"location":"6-3-kvmi-v12/","title":"6 3 kvmi v12","text":""},{"location":"6-3-kvmi-v12/#kvmi-vmi","title":"KVMI \ubc29\uc2dd\uc73c\ub85c vmi\ub97c \uad6c\ud604\ud574\ubcf4\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-08-10</p>"},{"location":"6-3-kvmi-v12/#kvmi","title":"KVMI \uc18c\uc2a4","text":"<pre><code>git clone https://github.com/KVM-VMI/kvm-vmi.git --recursive\ncd kvm-vmi\ngit submodule update --init\n\n# \uac01 \uc11c\ube0c\ubaa8\ub4c8\uc744 v12 \ube0c\ub79c\uce58\ub85c\ncd kvm     &amp;&amp; git checkout kvmi-v12 &amp;&amp; cd ..\ncd qemu    &amp;&amp; git checkout kvmi-v12 &amp;&amp; cd ..\n</code></pre>"},{"location":"6-3-kvmi-v12/#_1","title":"\ucee4\ub110","text":"<p>\uae30\ubcf8 6.14.0-27-generic \ucee4\ub110 (\ucee4\ub110\uc774\ubbf8\uc9c0+\ud30c\uc77c\uc2dc\uc2a4\ud15c)\uc774 \uc544\ub2cc kvmi\uac00 \ud328\uce58\ub41c \ucee4\ub110\uc744 \ub9cc\ub4e4\uc5b4\uc918\uc57c \ud55c\ub2e4. 5.15.0-rc2-kvmi+ \ub97c \ub9cc\ub4e4\uc5b4\uc8fc\uc790.</p> <p>kvmi \ucee4\ub110 \uc774\ubbf8\uc9c0 \ub9cc\ub4e4\uae30 <pre><code>$ sudo apt-get install -y bc fakeroot flex bison libelf-dev libssl-dev dwarves\n\n$ cd kvm-vmi/kvm\n$ cp /boot/config-$(uname -r) .config\n\n# \uc11c\uba85\ud0a4/\ub9ac\ubcf5\ud0a4 \uc81c\uac70, KVM+KVMI \ucf1c\uae30, \ud22c\uba85 Hugepage \ub044\uae30, \uc6b0\ubd84\ud22c \ud638\ud658\n$ ./scripts/config --disable SYSTEM_TRUSTED_KEYS\n$ ./scripts/config --disable SYSTEM_REVOCATION_KEYS\n$ ./scripts/config --module KVM\n$ ./scripts/config --module KVM_INTEL\n$ ./scripts/config --module KVM_AMD\n$ ./scripts/config --enable KVM_INTROSPECTION\n$ ./scripts/config --disable TRANSPARENT_HUGEPAGE\n$ ./scripts/config --set-str CONFIG_LOCALVERSION -kvmi\n$ ./scripts/config --enable PREEMPT\n\n# \uc800\uc7a5\uc7a5\uce58/USB \ucee8\ud2b8\ub864\ub7ec(\ub8e8\ud2b8 \ub514\uc2a4\ud06c \uc778\uc2dd\uc6a9) \ud655\uc2e4\ud788 \ucf1c\ub450\uae30\n$ ./scripts/config --module VMD\n$ ./scripts/config --module BLK_DEV_NVME\n$ ./scripts/config --module SATA_AHCI\n$ ./scripts/config --module USB_XHCI_HCD\n\n# \uc11c\uba85 \ubb38\uc81c \ud574\uacb0\n$ ./scripts/config --disable NET_VENDOR_NETRONOME    # \uc6b0\ubd84\ud22c 22.04\uc6a9 \uba54\ubaa8, 24.04\ub3c4 \uc720\uc0ac\n$ ./scripts/config --disable MODULE_SIG\n$ ./scripts/config --disable MODULE_SIG_ALL\n$ ./scripts/config --undefine MODULE_SIG_KEY\n\n# BTF/\ubaa8\ub4c8 BTF/\ubd84\ud560 BTF \ub044\uae30, DWARF5\ub3c4 \uc548\uc804\ud558\uac8c \ub054 \u2192 DWARF4\ub85c\n$ ./scripts/config --disable DEBUG_INFO_BTF\n$ ./scripts/config --disable DEBUG_INFO_BTF_MODULES\n$ ./scripts/config --disable PAHOLE_HAS_SPLIT_BTF || true\n$ ./scripts/config --disable DEBUG_INFO_DWARF5 || true\n$ ./scripts/config --enable  DEBUG_INFO_DWARF4\n\n$ make olddefconfig\n\n$ make -j\"$(nproc)\" bindeb-pkg WERROR=0 \\\n  KCFLAGS=\"-Wno-error=use-after-free\" \\\n  HOSTCFLAGS=\"-Wno-error=use-after-free\"\n\n$ ls -1 ../linux-image-*.deb ../linux-headers-*.deb\n../linux-headers-5.15.0-rc2-kvmi+_5.15.0-rc2-kvmi+-3_amd64.deb\n../linux-headers-5.4.24-kvmi+_5.4.24-kvmi+-1_amd64.deb\n../linux-image-5.15.0-rc2-kvmi+_5.15.0-rc2-kvmi+-3_amd64.deb\n../linux-image-5.15.0-rc2-kvmi+-dbg_5.15.0-rc2-kvmi+-3_amd64.deb\n../linux-image-5.4.24-kvmi+_5.4.24-kvmi+-1_amd64.deb\n../linux-image-5.4.24-kvmi+-dbg_5.4.24-kvmi+-1_amd64.deb\n\n$ sudo dpkg -i ../linux-image-*-kvmi+_*.deb\n\n$ sudo update-grub\n</code></pre></p> <p>busybox \uc258\uae4c\uc9c0\ub9cc \ub4e4\uc5b4\uac00\uc9d0. \ubb50\uac00 \ubb38\uc81c\ub0d0? Intel VMD(=RST) \uc544\ub798\uc5d0 NVMe\uac00 \ub9e4\ub2ec\ub9b0 \uad6c\uc131\uc774\ub77c\uc11c, \ucee4\ub110\uc774 \uadf8 VMD\uc5d0 \ubd99\uc9c0 \ubabb\ud574 \ub8e8\ud2b8 \ub514\uc2a4\ud06c\ub97c \ubabb \ubcf4\ub294 \uc0c1\ud669.</p> <p>\ube4c\ud2b8\uc778\uc73c\ub85c \uad6c\uc131 <pre><code>cd ~/kvm-vmi/kvm\n\n# \uae30\ubcf8 \uc7a5\uce58 \ud2b8\ub9ac/\ub178\ub4dc\n./scripts/config --enable PCI\n./scripts/config --enable PCIEPORTBUS\n./scripts/config --enable PCI_MSI\n./scripts/config --enable DEVTMPFS\n./scripts/config --enable DEVTMPFS_MOUNT\n./scripts/config --enable BLK_DEV_INITRD\n\n# \uc800\uc7a5\uc7a5\uce58(\ub124 \ub178\ud2b8\ubd81\uc5d0\uc11c NVMe + AHCI + VMD \uac00\ub2a5\uc131 \ubaa8\ub450 \ucee4\ubc84)\n./scripts/config --enable VMD\n./scripts/config --enable NVME_CORE\n./scripts/config --enable BLK_DEV_NVME\n./scripts/config --enable SATA_AHCI\n./scripts/config --enable AHCI_PLATFORM\n\n# \ub8e8\ud2b8 \ud30c\uc77c\uc2dc\uc2a4\ud15c\uc5d0 \ub9de\ucdb0 \ud558\ub098\ub9cc \ube4c\ud2b8\uc778 (\ubcf4\ud1b5 ext4)\n./scripts/config --enable EXT4_FS\n# \ub9cc\uc57d \ub8e8\ud2b8\uac00 btrfs\ub77c\uba74 \uc704 \ub300\uc2e0\n# ./scripts/config --enable BTRFS_FS\n\n# LUKS/LVM\uc774\uba74 \uc774\uac83\ub3c4 \ube4c\ud2b8\uc778\n./scripts/config --enable DM_MOD\n./scripts/config --enable DM_CRYPT\n\n# (\uc120\ud0dd) \ubaa8\ub4c8 \uc555\ucd95 \uc774\uc288 \ud53c\ud558\ub824\uba74 \uc544\uc608 \ubaa8\ub4c8 \uc555\ucd95 \ub044\uae30\n./scripts/config --disable MODULE_COMPRESS\n\n$ grep -E 'CONFIG_(VMD|NVME_CORE|BLK_DEV_NVME|DEVTMPFS|DEVTMPFS_MOUNT|EXT4_FS|BTRFS_FS)=' .config\nCONFIG_VMD=y\nCONFIG_DEVTMPFS=y\nCONFIG_DEVTMPFS_MOUNT=y\nCONFIG_NVME_CORE=y\nCONFIG_BLK_DEV_NVME=y\nCONFIG_EXT4_FS=y\nCONFIG_BTRFS_FS=m\n\nmake olddefconfig\n\nmake -j\"$(nproc)\" bindeb-pkg WERROR=0 \\\n  KCFLAGS=\"-Wno-error=use-after-free\" HOSTCFLAGS=\"-Wno-error=use-after-free\"\n\nsudo dpkg -i ../linux-image-*-kvmi+_*.deb\nsudo update-grub\nsudo reboot\n</code></pre> * \uc774\uac74 \ud574\uacb0\ubc29\ubc95\uc744 \ucc3e\uae30 \uc704\ud574 \ud574\ubd24\ub358 \ubc29\ubc95\uc774\uace0 \ubcc4 \uc758\ubbf8 \uc5c6\uc744 \uac83 \uac19\ub2e4.</p> <p>VMD controller \ub044\uae30 <pre><code>\ubd80\ud305 \uc911 F2\ub85c \ubc14\uc774\uc624\uc2a4 \ub4e4\uc5b4\uac00\uc11c advanced\uc5d0\uc11c main\uc5d0\uc11c ctrl+s \ub204\ub974\uba74 \ud788\ub4e0\uba54\ub274 \ub098\uc634.\n\uac70\uae30\uc11c VMD controller\ub97c \ub044\uba74 NVMe\uac00 \uc9c1\uc811 \ub178\ucd9c\ub418\uace0, \ucee4\ub110\ub3c4 NVMe\ub97c \ubc14\ub85c \ubcf4\uace0 \ubd80\ud305\ub41c\ub2e4.\n</code></pre></p>"},{"location":"6-3-kvmi-v12/#qemu","title":"qemu \uc124\uce58","text":"<pre><code>sudo apt-get install -y libpixman-1-dev pkg-config zlib1g-dev \\\n  libglib2.0-dev dh-autoreconf libspice-server-dev\n\ncd ~/kvm-vmi/qemu\ngit checkout kvmi-v12\n./configure --target-list=x86_64-softmmu --enable-spice --prefix=/usr/local\nmake -j\"$(nproc)\"\nsudo make install    # /usr/local/bin/qemu-system-x86_64\n</code></pre>"},{"location":"6-3-kvmi-v12/#libkvmi","title":"libkvmi \uc124\uce58","text":"<pre><code>cd ~/kvm-vmi/libkvmi\n./bootstrap &amp;&amp; ./configure\nmake -j\"$(nproc)\"\nsudo make install\nsudo ldconfig\n</code></pre>"},{"location":"6-3-kvmi-v12/#vm","title":"vm \uc0dd\uc131","text":"<p>iso \ub2e4\uc6b4\ub85c\ub4dc <pre><code>https://www.microsoft.com/software-download/windows11 \ub4e4\uc5b4\uac00 \uc601\uc5b4(\ubbf8\uad6d) 64\ube44\ud2b8 \ub2e4\uc6b4\ub85c\ub4dc. Win11_24H2_English_x64.iso. \uc708\ub3c4\uc6b0 \uc124\uce58\ub97c \uc704\ud55c DVD \uc5ed\ud560.\n</code></pre></p> <p>vm \uc0dd\uc131 <pre><code>$ virt-manager\n\uc0c8 vm \ub9cc\ub4e4\uae30\nlocal install media - browse - downloads\uc5d0 \uc788\ub294 Win11_24H2_English_x64.iso \uc120\ud0dd. \uc708\ub3c4\uc6b0 11.\n\uba54\ubaa8\ub9ac 16000MB, cpu 10\uac1c\n\uc800\uc7a5\uc18c \ud65c\uc131\ud654. \ub514\uc2a4\ud06c \uc774\ubbf8\uc9c0 160.0GB. \uc774\ub984 win11-2 (\uc704\uce58 /var/lib/libvirt/images/win11-2.qcow2)     # win11-2.qcow2 : \ube48 \ud558\ub4dc\ub514\uc2a4\ud06c.\ncustom \uc120\ud0dd\nOverview\uc5d0\uc11c Q35, UEFI x86_64 : OVMF_CODE_4M.ms.fd \uc120\ud0dd\nCPUs\uc5d0\uc11c host-passthruogh \uccb4\ud06c \ud655\uc778\nAdd hardware - PCI Host Device - 0000:01:00:0\uacfc 0000:01:00:1 \uc120\ud0dd\n\uc644\ub8cc \ud6c4 hdmi \uaf42\uc544\ub193\uace0 \uc124\uce58\n\uacc4\uc815 \uc785\ub825 \ub098\uc624\uba74 shift+f10 \ub204\ub974\uace0 start ms-cxh:localonly. kkongnyang2\uc5d0 \uc554\ud638 4108\n\uc778\ud130\ub137\uc774 \uc5f0\uacb0\ub418\uc5b4 \uc788\uc73c\uba74 \uc708\ub3c4\uc6b0 \ub4dc\ub77c\uc774\ubc84 \uc5c5\ub370\uc774\ud2b8\uae4c\uc9c0 \uc124\uce58 \uacfc\uc815 \uc911\uc5d0 \ud574\uc90c\ndevice manager \ub4e4\uc5b4\uac00 \ub290\ub08c\ud45c \uc5c6\ub294\uc9c0 \ud655\uc778(nvidia\uac00 code43 \uc548\ub728\ub294\uc9c0)\n</code></pre></p>"},{"location":"6-3-kvmi-v12/#_2","title":"\uc2e4\ud589","text":"<pre><code>./hookguest-libkvmi /tmp/introspector\n\ub2e4\ub978 \uc258\uc5d0\uc11c virsh start win11-2\n</code></pre> <p>\u26a0\ufe0f v12\ub294 \uc544\uc9c1 \uc2e4\ud5d8 \ub2e8\uacc4\ub77c\uace0 \ud568. hookguest\uac00 qemu/kvm\uc758 kvmi abi\uc640 \uc11c\ub85c \ub2e4\ub978 \ubc84\uc804\uc774\ub77c api \ud638\ucd9c\uc5d0\uc11c \ubed7\uac8c \ub428.</p>"},{"location":"6-4-kvmi-v7/","title":"6 4 kvmi v7","text":""},{"location":"6-4-kvmi-v7/#kvmi-vmi","title":"KVMI \ubc29\uc2dd\uc73c\ub85c vmi\ub97c \uad6c\ud604\ud574\ubcf4\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-08-12</p>"},{"location":"6-4-kvmi-v7/#_1","title":"&gt; \uc0ac\uc804 \uc900\ube44","text":"<p>bios \uc124\uc815 <pre><code>VT-x, VT-d \ucf1c\uae30\nSecure boot \ub044\uae30(\uc11c\uba85 \ubb38\uc81c \ud68c\ud53c\uc5d0 \uc720\ub9ac. \ubc14\ub85c \uc548\uaebc\uc9c0\uba74 \ubc14\uc774\uc624\uc2a4 \ube44\ubc88 \uc124\uc815\ud55c \ud6c4 \ub048 \ud6c4 \ube44\ubc88 \ub2e4\uc2dc \uc5c6\uc560\uba74 \ub428)\nvmd controller \ub044\uae30(advanced-main\uc5d0\uc11c ctrl+s \ub20c\ub7ec \ud788\ub4e0\uc635\uc158 \ub744\uc6b0\uba74 \ub428)\ndisplay mode : optimus\n</code></pre> * optimus = igpu \uc9c1\uacb0, dgpu \ub3c4\uc6c0 * dgpu only = dgpu \uc9c1\uacb0 * auto select = \uc704 \ub450\uac1c \uc911\uc5d0 \uc790\ub3d9\uc120\ud0dd</p> <p>\ucee4\ub110\uacfc \ud558\ub4dc\uc6e8\uc5b4 \ud638\ud658 \ubbf8\ub9ac \uc0b4\ud53c\uae30 <pre><code># === \uc2dc\uc2a4\ud15c \uc810\uac80 \ud328\ud0a4\uc9c0(\uc5c6\uc73c\uba74) ===\nsudo apt -y install ethtool mokutil || true\n\necho \"===== CPU =====\"\nlscpu | egrep 'Model name|Vendor ID|Architecture|CPU\\\\(s\\\\)|Thread|Core|Socket'\necho; echo \"===== CPU flags (vmx/ept \ud655\uc778) =====\"\ngrep -m1 '^flags' /proc/cpuinfo | tr ' ' '\\n' | egrep -x 'vmx|svm|ept|npt' | sort -u\n\necho; echo \"===== IOMMU/DMAR (VT-d) =====\"\ndmesg | egrep -i 'DMAR|IOMMU|VT-d' | head -n 50\n\necho; echo \"===== \ubd80\ud305/\uc2dc\ud050\uc5b4\ubd80\ud2b8 =====\"\n[ -d /sys/firmware/efi ] &amp;&amp; echo \"Boot: UEFI\" || echo \"Boot: Legacy\"\nmokutil --sb-state 2&gt;/dev/null || echo \"mokutil not available\"\n\necho; echo \"===== \ucee4\ub110/OS =====\"\nuname -a\ngrep -E 'PRETTY_NAME|VERSION=' /etc/os-release\n\necho; echo \"===== \uba54\uc778\ubcf4\ub4dc/BIOS =====\"\nsudo dmidecode -t baseboard -t bios | egrep -i 'Vendor:|Product Name:|Version:|Release Date:' || true\n\necho; echo \"===== GPU =====\"\nlspci -nnk | grep -A3 -Ei 'vga|3d|display'\n\necho; echo \"===== NIC(\uc774\ub354\ub137/\ubb34\uc120) =====\"\nlspci -nnk | grep -A3 -Ei 'ethernet|network'\n\necho; echo \"===== \uc778\ud130\ud398\uc774\uc2a4\ubcc4 \ub4dc\ub77c\uc774\ubc84 =====\"\nfor i in $(ls /sys/class/net | grep -v lo); do\n  echo \"== $i ==\"; sudo ethtool -i \"$i\" 2&gt;/dev/null || true\ndone\n\n===== CPU =====\nArchitecture:                         x86_64\nVendor ID:                            GenuineIntel\nModel name:                           Intel(R) Core(TM) i5-14500HX\nThread(s) per core:                   2\nCore(s) per socket:                   14\nSocket(s):                            1\n\n===== CPU flags (vmx/ept \ud655\uc778) =====\nept\nvmx\n\n===== IOMMU/DMAR (VT-d) =====\ndmesg: read kernel buffer failed: Operation not permitted\n\n===== \ubd80\ud305/\uc2dc\ud050\uc5b4\ubd80\ud2b8 =====\nBoot: UEFI\nSecureBoot disabled\n\n===== \ucee4\ub110/OS =====\nLinux acer 6.14.0-27-generic #27~24.04.1-Ubuntu SMP PREEMPT_DYNAMIC Tue Jul 22 17:38:49 UTC 2 x86_64 x86_64 x86_64 GNU/Linux\nPRETTY_NAME=\"Ubuntu 24.04.3 LTS\"\nVERSION=\"24.04.3 LTS (Noble Numbat)\"\n\n===== \uba54\uc778\ubcf4\ub4dc/BIOS =====\n    Vendor: Insyde Corp.\n    Version: V1.14\n    Release Date: 09/19/2024\n    Product Name: EQE_RTX\n    Version: V1.14\n\n===== GPU =====\n00:02.0 VGA compatible controller [0300]: Intel Corporation Raptor Lake-S UHD Graphics [8086:a788] (rev 04)\n    Subsystem: Acer Incorporated [ALI] Raptor Lake-S UHD Graphics [1025:1731]\n    Kernel driver in use: i915\n    Kernel modules: i915, xe\n--\n01:00.0 VGA compatible controller [0300]: NVIDIA Corporation AD107M [GeForce RTX 4060 Max-Q / Mobile] [10de:28e0] (rev a1)\n    Subsystem: Acer Incorporated [ALI] AD107M [GeForce RTX 4060 Max-Q / Mobile] [1025:1731]\n    Kernel driver in use: nvidia\n    Kernel modules: nvidiafb, nouveau, nvidia_drm, nvidia\n\n===== NIC(\uc774\ub354\ub137/\ubb34\uc120) =====\n00:14.3 Network controller [0280]: Intel Corporation Raptor Lake-S PCH CNVi WiFi [8086:7a70] (rev 11)\n    Subsystem: Rivet Networks Device [1a56:1672]\n    Kernel driver in use: iwlwifi\n    Kernel modules: iwlwifi\n00:15.0 Serial bus controller [0c80]: Intel Corporation Raptor Lake Serial IO I2C Host Controller #0 [8086:7a4c] (rev 11)\n--\n44:00.0 Ethernet controller [0200]: Realtek Semiconductor Co., Ltd. Killer E3000 2.5GbE Controller [10ec:3000] (rev 06)\n    Subsystem: Acer Incorporated [ALI] Killer E3000 2.5GbE Controller [1025:1731]\n    Kernel driver in use: r8169\n    Kernel modules: r8169\n\n===== \uc778\ud130\ud398\uc774\uc2a4\ubcc4 \ub4dc\ub77c\uc774\ubc84 =====\n== enp68s0 ==\ndriver: r8169\nversion: 6.14.0-27-generic\nfirmware-version: rtl8125b-2_0.0.2 07/13/20\nexpansion-rom-version: \nbus-info: 0000:44:00.0\nsupports-statistics: yes\nsupports-test: no\nsupports-eeprom-access: no\nsupports-register-dump: yes\nsupports-priv-flags: no\n== wlp0s20f3 ==\ndriver: iwlwifi\nversion: 6.14.0-27-generic\nfirmware-version: 89.202a2f7b.0 so-a0-gf-a0-89.uc\nexpansion-rom-version: \nbus-info: 0000:00:14.3\nsupports-statistics: yes\nsupports-test: no\nsupports-eeprom-access: no\nsupports-register-dump: no\nsupports-priv-flags: no\n</code></pre> * kvm-vmi\uc5d0\uc11c \uc644\ubcbd\ud558\uac8c \uad6c\uc131\ud574\ub193\uc740 v7 \uae30\uc900\uc73c\ub85c\ub294 5.4 \ucee4\ub110\uc774 \ube4c\ub4dc\ub420\ud150\ub370 \ub0b4 \ub124\ud2b8\uc6cc\ud06c \uce69\uc14b\uc774 \ub108\ubb34 \ucd5c\uc2e0\uc774\ub77c \ub4dc\ub77c\uc774\ubc84 \ubbf8\uc874\uc7ac. dkms \ubc31\ud3ec\ud2b8 \ube4c\ub4dc\ub97c \ud574\uc57c \ud558\ub294\ub370 \ubb34\uc120 \ub79c\uc120\uc740 \ubcf5\uc7a1\ud568. \ub530\ub77c\uc11c \uc720\uc120\ub79c\uc120 Realtek Killer E3000 (10ec:3000)\uc744 \uc704\ud55c r8125 \ub4dc\ub77c\uc774\ubc84\ub97c \ubbf8\ub9ac \uc900\ube44. </p> <p>iommu \ud0a4\uae30 <pre><code>$ sudo dmesg | grep -i -e iommu -e dmar\n\ubb50\ub77c\uace0 \ub728\uc9c0\ub9cc IOMMU enable\uc740 \uc5c6\uc74c\n$ sudo sed -i 's/^\\(GRUB_CMDLINE_LINUX_DEFAULT=\"[^\"]*\\)\"/\\1 intel_iommu=on iommu=pt\"/' /etc/default/grub\n$ sudo update-grub\n$ sudo reboot\n$ sudo dmesg | grep -i -e iommu -e dmar\n\uc544\uae4c\ub791 \ub2e4\ub974\uac8c IOMMU enable \uc788\uc74c\n</code></pre></p> <p>vfio \ubaa8\ub4c8 \uc790\ub3d9 \ub85c\ub4dc <pre><code>$ lsmod | grep vfio\n$ echo -e \"vfio\\nvfio_pci\\nvfio_iommu_type1\\nvfio_virqfd\" | sudo tee /etc/modules-load.d/vfio.conf\n$ sudo update-initramfs -u\n$ sudo reboot\n$ lsmod | grep vfio\nvfio_pci               16384  0\nvfio_pci_core          94208  1 vfio_pci\nirqbypass              12288  2 vfio_pci_core,kvm\nvfio_iommu_type1       49152  0\nvfio                   69632  3 vfio_pci_core,vfio_iommu_type1,vfio_pci\niommufd               118784  1 vfio\n</code></pre> * \ub9cc\uc57d \uc790\ub3d9\uc774 \uc544\ub2cc \uc218\ub3d9\uc73c\ub85c \ud0ac\uac70\uba74 \ub9e4\ubc88 sudo modprobe vfio vfio_pci vfio_iommu_type1 vfio_virqfd</p> <p>r8125 \ub4dc\ub77c\uc774\ubc84 \ub2e4\uc6b4\ubc1b\uc544\ub193\uae30 <pre><code>mkdir -p ~/drivers/r8125\nhttps://www.realtek.com/Download/List?cate_id=584 \ub4e4\uc5b4\uac00 2.5G Ethernet LINUX driver r8125 (r8125-9.016.00.tar.bz2) \ub2e4\uc6b4. \uc704 \ud3f4\ub354\uc5d0 \uc62e\uaca8\ub193\uae30\n</code></pre></p>"},{"location":"6-4-kvmi-v7/#kvm-vmi-v7","title":"&gt; kvm-vmi v7","text":"<p>kvm-vmi? vmi\ub97c \uc2e4\ud589\ud560 \uc218 \uc788\ub3c4\ub85d \ucee4\ub110(kvm), QEMU(qemu), libkvmi, libvmi \uac01 \ub808\ud3ec \ubc84\uc804\uc744 \ub9de\ucdb0 \ubaa8\uc544\ub454 \ub808\ud3ec. \uae30\uc874\uc5d0 \uc788\ub294 qemu/kvm\uc740 \uae30\ub2a5\ub3c4 \uc801\uace0 \ud638\ud658 \ubb38\uc81c\uac00 \ud130\uc9c0\ub2c8 \uc774 \ub808\ud3ec\uc5d0 \uc788\ub294 \uc77c\ubc18 generic \ucee4\ub110\uc774 \uc544\ub2cc kvmi+ \uc774 \ucd94\uac00\ub41c kvm \ucee4\ub110\uc744 \ub9cc\ub4e4\uace0 qemu\ub97c \uc124\uce58\ud55c\ub2e4.</p> <p>\ud544\uc218 \ud328\ud0a4\uc9c0 \uc124\uce58 <pre><code>sudo apt update\nsudo apt install -y build-essential git cmake pkg-config \\\n  libvirt-daemon-system libvirt-clients qemu-utils virt-manager ovmf bridge-utils \\\n  libglib2.0-dev libpixman-1-dev zlib1g-dev libspice-server-dev \\\n  check libjson-c-dev libtool autoconf automake bison flex \\\n  libelf-dev libssl-dev dwarves bc fakeroot\nsudo apt install -y \\\n  build-essential git fakeroot bc flex bison libelf-dev libssl-dev \\\n  libncurses-dev dwarves xz-utils\nsudo apt install -y \\\n  libvirt-daemon-system libvirt-clients virt-manager \\\n  ovmf swtpm virtiofsd \\\n  bridge-utils dnsmasq\nsudo usermod -aG libvirt $USER\n</code></pre></p> <p>kvm-vmi \uc18c\uc2a4 \uac00\uc838\uc624\uae30 <pre><code>git clone --recursive https://github.com/KVM-VMI/kvm-vmi.git\n</code></pre></p> <p>kvm(\ucee4\ub110) \uc124\uc815 <pre><code>cd kvm-vmi/kvm\n\n# \uc0b0\ucd9c\ubb3c \ucd08\uae30\ud654\nmake clean\n# config \uc644\uc804 \ucd08\uae30\ud654\nmake mrproper\n\n# x86_64 \uae30\ubcf8\uac12\uc5d0\uc11c \uc2dc\uc791\nmake x86_64_defconfig\n\n# \uc6b0\ubd84\ud22c \ud638\ud658 \uc2a4\uc704\uce58(\uac00\uc774\ub4dc \uae30\uc7ac)\n./scripts/config --enable PREEMPT\n./scripts/config --disable NET_VENDOR_NETRONOME\n\n# \uae30\ubcf8/\ubd80\ud305 \ud544\uc218\n./scripts/config --enable BLK_DEV_INITRD\n./scripts/config --enable DEVTMPFS --enable DEVTMPFS_MOUNT\n./scripts/config --enable PCI --enable PCIEPORTBUS --enable PCI_MSI\n./scripts/config --set-str CONFIG_LOCALVERSION -kvmi\n\n# \uc2a4\ud1a0\ub9ac\uc9c0 (\ub8e8\ud2b8: NVMe)\n./scripts/config --enable NVME_CORE\n./scripts/config --enable BLK_DEV_NVME\n# SATA \uc7a5\uce58\uac00 \uc788\uc73c\uba74:\n./scripts/config --module SATA_AHCI\n# x86\uc5d0 \ubcf4\ud1b5 \ubd88\ud544\uc694\n./scripts/config --disable AHCI_PLATFORM\n# VMD\ub294 BIOS\uc5d0\uc11c \uaebc\ub1a8\uc73c\ub2c8 \ubd88\ud544\uc694\n./scripts/config --disable VMD\n\n# \ud30c\uc77c\uc2dc\uc2a4\ud15c\n./scripts/config --enable EXT4_FS\n./scripts/config --enable CRYPTO_CRC32C   # ext4/jbd2 \uccb4\ud06c\uc12c \uac00\uc18d\n\n# KVMI\n./scripts/config --module KVM\n./scripts/config --module KVM_INTEL\n./scripts/config --enable KVM_INTROSPECTION\n./scripts/config --disable TRANSPARENT_HUGEPAGE\n\n# UEFI(\uc120\ud0dd\uc774\uc9c0\ub9cc \ucf1c\ub3c4 \ubb34\ud574)\n./scripts/config --enable EFI_PARTITION\n./scripts/config --enable EFI_STUB\n\n# \ubd88\ud544\uc694/\ubb38\uc81c \uc18c\uc9c0 \ub4dc\ub77c\uc774\ubc84 \uc81c\uac70\n./scripts/config --disable NET_VENDOR_NETRONOME\n./scripts/config --disable NFP\n# r8169\uc740 r8125\ub85c \ub300\uccb4 \uc608\uc815\uc774\ubbc0\ub85c \ub044\uba74 \uae54\ub054\n./scripts/config --disable R8169\n# \uc624\ub514\uc624\ub294 \ud544\uc694\uc2dc \ubaa8\ub4c8\ub85c\n./scripts/config --module SND_HDA_INTEL\n\n# \ubcc0\uacbd \ubc18\uc601\nmake olddefconfig\n</code></pre> * ssd\uac00 \uc778\uc2dd\ub418\uc9c0 \uc54a\uace0 busybox\ub85c \ub5a8\uc5b4\uc838 \ube4c\ud2b8\uc778\uc73c\ub85c \uad6c\uc131\ud558\uc600\ub2e4.</p> <p>\ube4c\ub4dc(.deb \uc0dd\uc131) \ubc0f \uc124\uce58 <pre><code># CPU \ucf54\uc5b4\uc218\ub9cc\ud07c \ubcd1\ub82c \ube4c\ub4dc\nmake -j\"$(nproc)\" bindeb-pkg WERROR=0 \\\n  KCFLAGS=\"-Wno-error=use-after-free\" \\\n  HOSTCFLAGS=\"-Wno-error=use-after-free\"\n\n# \ube4c\ub4dc \uc0b0\ucd9c\ubb3c\uc740 \ubd80\ubaa8 \ub514\ub809\ud130\ub9ac\uc5d0 \uc0dd\uc131\ub428\ncd ..\nls -1 *.deb\nlinux-headers-5.4.24-kvmi+_5.4.24-kvmi+-1_amd64.deb\nlinux-image-5.4.24-kvmi+_5.4.24-kvmi+-1_amd64.deb\nlinux-libc-dev_5.4.24-kvmi+-1_amd64.deb\n\n# \uc124\uce58\nsudo dpkg -i linux-image-*-kvmi+_*.deb linux-headers-*-kvmi+_*.deb\nsudo update-grub\n</code></pre></p> <p>initramfs\ub780? \ubd80\ud2b8\ub85c\ub354\uac00 \ucee4\ub110\uacfc \ud568\uaed8 \uba54\ubaa8\ub9ac\ub85c \uc62c\ub9ac\ub294 \uc791\uc740 \ub8e8\ud2b8 \ud30c\uc77c\uc2dc\uc2a4\ud15c. cpio \uc544\uce74\uc774\ube0c\uc774\uace0, \ubcf4\ud1b5 gzip/lz4/zstd\ub85c \uc555\ucd95\ub418\uc5b4 \uc788\ub2e4. \uc548\uc5d0\ub294 \ucd08\uae30 \uc0ac\uc6a9\uc790 \uacf5\uac04 busybox, \uc800\uc7a5\uc7a5\uce58/\ud30c\uc77c\uc2dc\uc2a4\ud15c \ub4dc\ub77c\uc774\ubc84 \ubaa8\ub4c8, udev \uaddc\uce59, \uc554\ud638\ud654(LUKS)/RAID/LVM \uc2a4\ud06c\ub9bd\ud2b8 \ub4f1\uc774 \ub4e4\uc5b4 \uc788\ub2e4. \ucee4\ub110\uc774 \uba3c\uc800 \uc774 initramfs\ub97c \ub8e8\ud2b8\ub85c \ub9c8\uc6b4\ud2b8\ud574 \ud544\uc694\ud55c \ubaa8\ub4c8\uc744 \ub85c\ub4dc\ud558\uace0 \uc2e4\uc81c \ub514\uc2a4\ud06c\uc758 \uc9c4\uc9dc \ub8e8\ud2b8(/)\ub97c \ucc3e\uc740 \ub4a4 \ubcf8 \ubd80\ud305\uc744 \uc774\uc5b4\uac04\ub2e4.</p> <p>initramfs \ud655\uc778 <pre><code># \ud655\uc778\nfile /boot/initrd.img-5.4.24-kvmi+    # zstd\ub294 \uc608\uc804 \ucee4\ub110\uc5d0\uc11c \ubabb\uc77d\uc74c gzip compressed data \uc5ec\uc57c \ud568. \ud639\uc740 \uc544\uc608 ASCII cpio archive\ub85c \uc555\ucd95 \ubbf8\uc801\uc6a9 initramfs \uc5ec\ub3c4 \uad1c\ucc2e\n\n# \ub9cc\uc57d \uadf8\ub807\uc9c0 \uc54a\ub2e4\uba74\n# \uc124\uc815\uc774 \ucf1c\uc838 \uc788\ub294\uc9c0 \ud655\uc778\ngrep -E 'CONFIG_BLK_DEV_INITRD|CONFIG_RD_GZIP|CONFIG_RD_LZ4|CONFIG_RD_ZSTD' /boot/config-5.4.24-kvmi+\nCONFIG_BLK_DEV_INITRD=y\nCONFIG_RD_GZIP=y\nCONFIG_RD_LZ4=y\n\n# \uc774\uac83\ub9c8\uc800 \uaebc\uc838 \uc788\uc73c\uba74\n./scripts/config --enable BLK_DEV_INITRD --enable RD_GZIP --enable RD_LZ4 --enable RD_XZ --enable RD_LZO\n\ub85c \uc7ac\ube4c\ub4dc\n\n# initramfs-tools \uc555\ucd95 \uc124\uc815\uc744 gzip\uc73c\ub85c\nsudo sed -i 's/^COMPRESS=.*/COMPRESS=gzip/' /etc/initramfs-tools/initramfs.conf\n\n# 5.4.24-kvmi+ \uc6a9 \uc0c8 initramfs \uc0dd\uc131(-c \uc0c8\ub85c \uc0dd\uc131)\nsudo update-initramfs -c -k 5.4.24-kvmi+\n\n# \ub2e4\uc2dc \ud655\uc778\nfile /boot/initrd.img-5.4.24-kvmi+\n\nsudo update-grub\nreboot\n</code></pre></p> <p>\ud14d\uc2a4\ud2b8 \ubaa8\ub4dc\ub85c \uace0\uc815 <pre><code># \ud604\uc7ac 5.4\ub85c \ubd80\ud305\ud55c TTY\uc5d0\uc11c\nsudo systemctl set-default multi-user.target   # \ub2e4\uc74c \ubd80\ud305\ubd80\ud130 \ud14d\uc2a4\ud2b8 \ubaa8\ub4dc\nsudo systemctl disable --now gdm3              # \uadf8\ub798\ud53d \ub85c\uadf8\uc778 \ub9e4\ub2c8\uc800 \uc911\uc9c0\n# \ub098\uc911\uc5d0 GUI\ub85c \ub418\ub3cc\ub9b4 \ub550\nsudo systemctl set-default graphical.target &amp;&amp; sudo systemctl enable --now gdm3\n</code></pre> * 5.4 \ucee4\ub110\uc774 Raptor Lake iGPU(i915)\ub97c \ub2e4\ub8f0 \uc218 \uc5c6\uc5b4 gui \ubaa8\ub4dc\ub294 \ubb34\ub9ac\uc774\ub2e4. \ubc31\ubcf4\ub4dc\ub85c \uac00\uc838\uc624\uae30\uc5d4..</p> <p>\uc900\ube44\ud574\ub454 r8125 \uc124\uce58 <pre><code>cd ~/drivers/r8125\ntar xf r8125-*.tar.*\ncd r8125-*/\nsudo ./autorun.sh || { sudo make clean &amp;&amp; sudo make &amp;&amp; sudo make install; }\n\necho \"blacklist r8169\" | sudo tee /etc/modprobe.d/blacklist-r8169.conf\nsudo update-initramfs -u -k 5.4.24-kvmi+\nsudo reboot\n</code></pre></p> <p>\ubd80\ud305 \ud6c4 \ud655\uc778 <pre><code>uname -r                                   # 5.4.24-kvmi+ \uc778\uc9c0\nlspci -nnk -d 10ec:3000                    # Kernel driver in use: r8125\nsudo ethtool -i $(ip -o -4 route show default | awk '{print $5}')\n</code></pre></p> <p>\u26a0\ufe0f \ud14d\uc2a4\ud2b8 \ubaa8\ub4dc\uac00 \ub108\ubb34 \ubd88\ud3b8\ud574\uc11c \ud3ec\uae30</p>"},{"location":"6-5-xen-fail/","title":"6 5 xen fail","text":"<p>bios \uc124\uc815 <pre><code>VT-x, VT-d \ucf1c\uae30\nSecure boot \ub044\uae30(\uc11c\uba85 \ubb38\uc81c \ud68c\ud53c\uc5d0 \uc720\ub9ac. \ubc14\ub85c \uc548\uaebc\uc9c0\uba74 \ubc14\uc774\uc624\uc2a4 \ube44\ubc88 \uc124\uc815\ud55c \ud6c4 \ub048 \ud6c4 \ube44\ubc88 \ub2e4\uc2dc \uc5c6\uc560\uba74 \ub428)\nvmd controller \ub044\uae30(advanced-main\uc5d0\uc11c ctrl+s \ub20c\ub7ec \ud788\ub4e0\uc635\uc158 \ub744\uc6b0\uba74 \ub428)\ndisplay mode : optimus\n</code></pre> * optimus = igpu \uc9c1\uacb0, dgpu \ub3c4\uc6c0 * dgpu only = dgpu \uc9c1\uacb0 * auto select = \uc704 \ub450\uac1c \uc911\uc5d0 \uc790\ub3d9\uc120\ud0dd</p> <p>24.04 \uc124\uce58\uc2dc \ub4dc\ub77c\uc774\ubc84 \ub450\uac1c \ub2e4 \ubbf8\uccb4\ud06c <pre><code>$ lspci -nnk | grep -A3 -Ei 'vga|3d|display'\n00:02.0 VGA compatible controller [0300]: Intel Corporation Raptor Lake-S UHD Graphics [8086:a788] (rev 04)\n    Subsystem: Acer Incorporated [ALI] Raptor Lake-S UHD Graphics [1025:1731]\n    Kernel driver in use: i915\n    Kernel modules: i915, xe\n--\n01:00.0 VGA compatible controller [0300]: NVIDIA Corporation AD107M [GeForce RTX 4060 Max-Q / Mobile] [10de:28e0] (rev a1)\n    Subsystem: Acer Incorporated [ALI] AD107M [GeForce RTX 4060 Max-Q / Mobile] [1025:1731]\n    Kernel driver in use: nouveau\n    Kernel modules: nvidiafb, nouveau\n</code></pre></p> <p>\ud328\ud0a4\uc9c0 \uc124\uce58 <pre><code>$ sudo apt update\n$ sudo apt install -y xen-system-amd64 ovmf qemu-system-x86\n</code></pre></p> <p>1\ucc28 \uc2dc\ub3c4 <pre><code>xen \ubd80\ud305\ud558\uba74\uc11c e\nsystemd.unit=multi-user.target module_blacklist=nvidia,nvidia_drm,nvidia_modeset nouveau.modeset=0 \ucd94\uac00\ud558\uace0 f10\n</code></pre> * \uc548\ucf1c\uc9d0</p> <p>2\ucc28 \uc2dc\ub3c4 <pre><code>$ sudo nano /etc/gdm3/custom.conf\nWaylandEnable=false\n$ sudo systemctl restart gdm\n\uc544\uae4c\ucc98\ub7fc \ubd80\ud305\n</code></pre> * \uc548\ucf1c\uc9d0</p> <p>3\ucc28 \uc2dc\ub3c4 <pre><code>$ sudo journalctl -k -b -1 -n 300 --no-pager | less\n\uc624\ub514\uc624 \ub4dc\ub77c\uc774\ubc84\uac00 \uc624\ub7ab\ub3d9\uc548 \uc2dc\uac04\ub04c\ub2e4 \uc548\ub4e4\uc5b4\uac04 \ub85c\uadf8 \ud655\uc778\n$ echo 'options snd-intel-dspcfg dsp_driver=1' | sudo tee /etc/modprobe.d/alsa-base.conf\n$ sudo update-grub\n$ sudo update-initramfs -u\n\uc544\uae4c\ucc98\ub7fc \ubd80\ud305\n</code></pre> * \uc548\ucf1c\uc9d0</p> <p>4\ucc28 \uc2dc\ub3c4 <pre><code>$ sudo journalctl -k -b -1 -n 300 --no-pager | less\n\ub0b4 igpu\uc778 a788\uc774 i915\ub97c \uac70\ubd80\ud558\ub294\uac70 \ud655\uc778. xe\ub85c \uad50\uccb4\ud558\ub77c\ud568\n$ echo \"options xe force_probe=a788\" | sudo tee /etc/modprobe.d/xe-force.conf\noptions xe force_probe=a788\n$ echo \"options i915 force_probe=!a788\" | sudo tee /etc/modprobe.d/i915-noforce.conf\nbash: !a788: event not found\n$ echo 'options i915 force_probe=!a788' | sudo tee /etc/modprobe.d/i915-noforce.conf\n$ echo -e \"blacklist nvidia\\nblacklist nvidia_drm\\nblacklist nvidia_modeset\\nblacklist nouveau\" \\\n| sudo tee /etc/modprobe.d/blacklist-nvidia.conf\nblacklist nvidia\nblacklist nvidia_drm\nblacklist nvidia_modeset\nblacklist nouveau\n$ sudo nano /etc/default/grub\ni915.force_probe=!a788 xe.force_probe=a788\n$ sudo tee /etc/modprobe.d/blacklist-audio.conf &gt;/dev/null &lt;&lt;'EOF'\n# SOF(PCI/Intel) \uacc4\uc5f4 \uc804\ubd80 \ucc28\ub2e8\nblacklist snd_sof_pci\nblacklist snd_sof\nblacklist snd_sof_intel_hda_common\nblacklist snd_sof_intel_hda\nblacklist snd_sof_pci_intel_tgl\nblacklist snd_sof_pci_intel_mtl\nblacklist snd_sof_pci_intel_lnl\n# HDA \uc778\ud154 \ub4dc\ub77c\uc774\ubc84/\ucf54\ub371 \ucc28\ub2e8(\uc644\uc804 \ubb34\uc74c\uc774 \ubaa9\uc801\uc77c \ub54c)\nblacklist snd_hda_intel\nblacklist snd_hda_codec_hdmi\n# (\uc120\ud0dd) \uc0ac\uc6b4\ub4dc\uc640\uc774\uc5b4\ub3c4 \ud568\uaed8 \ucc28\ub2e8\nblacklist soundwire_intel\nEOF\n$ sudo update-grub\n$ sudo update-initramfs -u\n\uc544\uae4c\ucc98\ub7fc \ubd80\ud305\n</code></pre> * \uc548\ucf1c\uc9d0</p> <p>5\ucc28 \uc2dc\ub3c4 <pre><code>$ sudo journalctl -k -b -1 -n 300 --no-pager | less\n\uad50\uccb4\ud55c xe \ub610\ud55c \ub0b4 igpu\uc778 a788\uc774 \uac70\ubd80\ud558\ub294\uac78 \ud655\uc778\n$ lspci -nn -d 8086: -k | sed -n '/VGA/,+2p'\n00:02.0 VGA compatible controller [0300]: Intel Corporation Raptor Lake-S UHD Graphics [8086:a788] (rev 04)\n    Subsystem: Acer Incorporated [ALI] Raptor Lake-S UHD Graphics [1025:1731]\n    Kernel driver in use: xe\n$ sudo rm -f /etc/modprobe.d/xe-force.conf /etc/modprobe.d/i915-noforce.conf\n# i915\ub97c \uac15\uc81c \ud504\ub85c\ube0c + PSR \ub044\uae30(\ubcf4\uc218)\n$ echo 'options i915 force_probe=a788 enable_psr=0' | sudo tee /etc/modprobe.d/i915-force.conf\n$ sudo nano /etc/default/grub\n# GRUB_CMDLINE_LINUX_DEFAULT= \uc5d0 \ub2e4\uc74c\uc744 \ud3ec\ud568\n#   intel_iommu=on,igfx_off\n$ sudo update-grub\n$ sudo update-initramfs -u\n\uc544\uae4c\ucc98\ub7fc \ubd80\ud305\n</code></pre> * \uc548\ucf1c\uc9d0</p> <p>6\ucc28 \uc2dc\ub3c4 <pre><code>$ sudo journalctl -k -b -1 -n 300 --no-pager | less\n\ubc31\ub77c\uc774\ud2b8 \ubb38\uc81c \ud655\uc778\n$ lspci -nn -d 8086: -k | sed -n '/VGA/,+2p'\n00:02.0 VGA compatible controller [0300]: Intel Corporation Raptor Lake-S UHD Graphics [8086:a788] (rev 04)\n    Subsystem: Acer Incorporated [ALI] Raptor Lake-S UHD Graphics [1025:1731]\n    Kernel driver in use: i915\n$ ls -1 /sys/class/backlight\nnvidia_wmi_ec_backlight\n$ sudo nano /etc/default/grub\nacpi_backlight=native video.use_native_backlight=1 i915.enable_dpcd_backlight=1 i915.enable_psr=0\n</code></pre> * \uc548\ucf1c\uc9d0</p> <p>\ubb50\uac00 \ubb38\uc81c\ub0d0? xen \ud558\uc774\ud37c\ubc14\uc774\uc800\uc5d0\uc11c\ub294 \ubcf4\uc548/\uaca9\ub9ac\ub97c \uc704\ud574 \uba54\ubaa8\ub9ac\ub97c \ubcf4\uc218\uc801\uc73c\ub85c \uc7a1\uc74c. \ubca0\uc5b4\uba54\ud0c8\uc5d0\uc11c\ub294 a788\uc774 \uc694\uccad\ud558\ub294 dma api\uac00 iommu\uc5d0\uc11c \ubc14\ub85c \uc218\uc6a9\ub418\ub294\ub370 xen \ud558\uc774\ud37c\ubc14\uc774\uc800\uc5d0\uc11c\ub294 swiotlb\ub97c \ud1b5\ud574 \ubc14\uc6b4\uc2a4\ud558\uae30\uc5d0 a788\uac00 \uc694\uccad\ud558\ub294 \ud06c\uae30/\uc5f0\uc18d\uc131/\uc815\ub82c/\uc77c\uad00\uc131\uc744 \ub9cc\uc871\ud558\uc9c0 \ubabb\ud568.</p>"},{"location":"6-6-xen/","title":"6 6 xen","text":""},{"location":"6-6-xen/#xen-vmi","title":"xen \ubc29\uc2dd\uc73c\ub85c vmi\ub97c \uad6c\ud604\ud574\ubcf4\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-08-08</p> <p>bios \uc124\uc815 <pre><code>VT-x, VT-d \ucf1c\uae30\nSecure boot \ub044\uae30(\uc11c\uba85 \ubb38\uc81c \ud68c\ud53c\uc5d0 \uc720\ub9ac. \ubc14\ub85c \uc548\uaebc\uc9c0\uba74 \ubc14\uc774\uc624\uc2a4 \ube44\ubc88 \uc124\uc815\ud55c \ud6c4 \ub048 \ud6c4 \ube44\ubc88 \ub2e4\uc2dc \uc5c6\uc560\uba74 \ub428)\nvmd controller \ub044\uae30(advanced-main\uc5d0\uc11c ctrl+s \ub20c\ub7ec \ud788\ub4e0\uc635\uc158 \ub744\uc6b0\uba74 \ub428)\ndisplay mode : auto select\n</code></pre> * optimus = igpu \uc9c1\uacb0, dgpu \ub3c4\uc6c0 * dgpu only = dgpu \uc9c1\uacb0 * auto select = nvidia \ub4dc\ub77c\uc774\ubc84\uac00 mux\ub97c \uc870\uc815\ud574 \uc704 \ub450\uac1c \uc911\uc5d0 \uc790\ub3d9\uc120\ud0dd</p> <p>\uc124\uce58 \uc2dc \ub4dc\ub77c\uc774\ubc84 \ub450\uac1c \ub2e4 \ubbf8\uccb4\ud06c</p> <p>$ lspci -nnk | grep -A3 -Ei 'vga|3d|display|Audio' 00:02.0 VGA compatible controller [0300]: Intel Corporation Raptor Lake-S UHD Graphics [8086:a788] (rev 04)     Subsystem: Acer Incorporated [ALI] Raptor Lake-S UHD Graphics [1025:1731]     Kernel driver in use: i915     Kernel modules: i915, xe -- 00:1f.3 Multimedia audio controller [0401]: Intel Corporation Raptor Lake High Definition Audio Controller [8086:7a50] (rev 11)     Subsystem: Acer Incorporated [ALI] Device [1025:1731]     Kernel driver in use: sof-audio-pci-intel-tgl     Kernel modules: snd_hda_intel, snd_soc_avs, snd_sof_pci_intel_tgl 00:1f.4 SMBus [0c05]: Intel Corporation Raptor Lake-S PCH SMBus Controller [8086:7a23] (rev 11)     Subsystem: Acer Incorporated [ALI] Device [1025:1731] -- 01:00.0 VGA compatible controller [0300]: NVIDIA Corporation AD107M [GeForce RTX 4060 Max-Q / Mobile] [10de:28e0] (rev a1)     Subsystem: Acer Incorporated [ALI] AD107M [GeForce RTX 4060 Max-Q / Mobile] [1025:1731]     Kernel driver in use: nouveau     Kernel modules: nvidiafb, nouveau 01:00.1 Audio device [0403]: NVIDIA Corporation Device [10de:22be] (rev a1)     Subsystem: Acer Incorporated [ALI] Device [1025:1731]     Kernel driver in use: snd_hda_intel     Kernel modules: snd_hda_intel</p> <p>sudo apt install -y xen-system-amd64 ovmf qemu-system-x86</p> <p>echo 'GRUB_CMDLINE_XEN=\"iommu=1 iommu=verbose dom0_mem=4096M,max:4096M\"' | sudo tee /etc/default/grub.d/xen.cfg</p> <p>echo 'GRUB_CMDLINE_LINUX_XEN_REPLACE=\"xen-pciback.hide=(01:00.0)(01:00.1) modprobe.blacklist=nvidia,nvidia_drm,nvidia_modeset,nouveau\"' \\ | sudo tee -a /etc/default/grub.d/xen.cfg</p> <p>sudo update-grub</p> <p>$ sudo xl info | head host                   : acer release                : 6.14.0-27-generic version                : #27~24.04.1-Ubuntu SMP PREEMPT_DYNAMIC Tue Jul 22 17:38:49 UTC 2 machine                : x86_64 nr_cpus                : 20 max_cpu_id             : 19 nr_nodes               : 1 cores_per_socket       : 10 threads_per_core       : 2 cpu_mhz                : 2803.195</p> <p>~$ sudo xl list [sudo] password for kkongnyang2:  Name                                        ID   Mem VCPUs  State   Time(s) Domain-0                                     0  4096    20     r-----     415.7</p> <p>cat /sys/hypervisor/type xen</p> <p>kkongnyang2@acer:~$ lsmod | grep xen_pciback || sudo modprobe xen_pciback kkongnyang2@acer:~$ lspci -nnk | grep -A3 -Ei 'vga|3d|display|Audio' 00:02.0 VGA compatible controller [0300]: Intel Corporation Raptor Lake-S UHD Graphics [8086:a788] (rev 04)     Subsystem: Acer Incorporated [ALI] Raptor Lake-S UHD Graphics [1025:1731]     Kernel driver in use: i915     Kernel modules: i915, xe -- 00:1f.3 Multimedia audio controller [0401]: Intel Corporation Raptor Lake High Definition Audio Controller [8086:7a50] (rev 11)     Subsystem: Acer Incorporated [ALI] Device [1025:1731]     Kernel driver in use: sof-audio-pci-intel-tgl     Kernel modules: snd_hda_intel, snd_soc_avs, snd_sof_pci_intel_tgl 00:1f.4 SMBus [0c05]: Intel Corporation Raptor Lake-S PCH SMBus Controller [8086:7a23] (rev 11)     Subsystem: Acer Incorporated [ALI] Device [1025:1731] -- 01:00.0 VGA compatible controller [0300]: NVIDIA Corporation AD107M [GeForce RTX 4060 Max-Q / Mobile] [10de:28e0] (rev a1)     Subsystem: Acer Incorporated [ALI] AD107M [GeForce RTX 4060 Max-Q / Mobile] [1025:1731]     Kernel driver in use: pciback     Kernel modules: nvidiafb, nouveau 01:00.1 Audio device [0403]: NVIDIA Corporation Device [10de:22be] (rev a1)     Subsystem: Acer Incorporated [ALI] Device [1025:1731]     Kernel driver in use: snd_hda_intel     Kernel modules: snd_hda_intel</p> <p>kkongnyang2@acer:~$ DRVDIR=$(ls -d /sys/bus/pci/drivers/pciback /sys/bus/pci/drivers/xen-pciback 2&gt;/dev/null | head -n1) kkongnyang2@acer:~$ echo \"$DRVDIR\" /sys/bus/pci/drivers/pciback kkongnyang2@acer:~$ echo 0000:01:00.1 | sudo tee /sys/bus/pci/devices/0000:01:00.1/driver/unbind 0000:01:00.1 kkongnyang2@acer:~$ echo \"10de 22be\" | sudo tee \"$DRVDIR/new_id\" 10de 22be tee: /sys/bus/pci/drivers/pciback/new_id: File exists kkongnyang2@acer:~$ echo 0000:01:00.1 | sudo tee \"$DRVDIR/bind\" 0000:01:00.1 kkongnyang2@acer:~$ lspci -nnk | grep -A3 -Ei 'vga|3d|display|Audio' 00:02.0 VGA compatible controller [0300]: Intel Corporation Raptor Lake-S UHD Graphics [8086:a788] (rev 04)     Subsystem: Acer Incorporated [ALI] Raptor Lake-S UHD Graphics [1025:1731]     Kernel driver in use: i915     Kernel modules: i915, xe -- 00:1f.3 Multimedia audio controller [0401]: Intel Corporation Raptor Lake High Definition Audio Controller [8086:7a50] (rev 11)     Subsystem: Acer Incorporated [ALI] Device [1025:1731]     Kernel driver in use: sof-audio-pci-intel-tgl     Kernel modules: snd_hda_intel, snd_soc_avs, snd_sof_pci_intel_tgl 00:1f.4 SMBus [0c05]: Intel Corporation Raptor Lake-S PCH SMBus Controller [8086:7a23] (rev 11)     Subsystem: Acer Incorporated [ALI] Device [1025:1731] -- 01:00.0 VGA compatible controller [0300]: NVIDIA Corporation AD107M [GeForce RTX 4060 Max-Q / Mobile] [10de:28e0] (rev a1)     Subsystem: Acer Incorporated [ALI] AD107M [GeForce RTX 4060 Max-Q / Mobile] [1025:1731]     Kernel driver in use: pciback     Kernel modules: nvidiafb, nouveau 01:00.1 Audio device [0403]: NVIDIA Corporation Device [10de:22be] (rev a1)     Subsystem: Acer Incorporated [ALI] Device [1025:1731]     Kernel driver in use: pciback     Kernel modules: snd_hda_intel kkongnyang2@acer:~$ sudo xl pci-assignable-list 0000:01:00.0  0000:01:00.1 </p> <p>https://www.microsoft.com/ko-kr/software-download/windows10 \ub4e4\uc5b4\uac00 \uc601\uc5b4(\ubbf8\uad6d) 64\ube44\ud2b8 \ub2e4\uc6b4\ub85c\ub4dc.</p> <p>kkongnyang2@acer:~$ sudo install -d -o root -g root -m 755 /var/lib/xen/images kkongnyang2@acer:~$ sudo install -d -o root -g root -m 755 /var/lib/xen/iso</p> <p>kkongnyang2@acer:~$ sudo qemu-img create -f qcow2 /var/lib/xen/images/win10.qcow2 60G Formatting '/var/lib/xen/images/win10.qcow2', fmt=qcow2 cluster_size=65536 extended_l2=off compression_type=zlib size=64424509440 lazy_refcounts=off refcount_bits=16 kkongnyang2@acer:~$ sudo mv ~/Downloads/Win10_22H2_English_x64v1.iso /var/lib/xen/iso/Win10.iso</p> <p>kkongnyang2@acer:~$ sudo chown root:root /var/lib/xen/iso/Win10.iso /var/lib/xen/images/win10.qcow2 kkongnyang2@acer:~$ sudo chmod 644 /var/lib/xen/iso/Win10.iso kkongnyang2@acer:~$ sudo chmod 644 /var/lib/xen/images/win10.qcow2 kkongnyang2@acer:~$ sudo chmod 755 /var/lib/xen /var/lib/xen/iso /var/lib/xen/images</p> <p>$ sudo nano /etc/xen/win10-seabios.cfg name = \"win10-seabios\" type = \"hvm\" memory = 4096 vcpus  = 2</p> <p>bios  = \"seabios\" boot  = \"dc\"</p>"},{"location":"6-6-xen/#dm","title":"DM \uacbd\ub85c \uace0\uc815 (\ub458 \uc911 \uc2e4\uc81c \uc874\uc7ac\ud558\ub294 \uacbd\ub85c \ud558\ub098\ub9cc)","text":"<p>device_model_version  = \"qemu-xen\" device_model_override = \"/usr/libexec/xen-qemu-system-i386\"</p>"},{"location":"6-6-xen/#device_model_override-usrlibexecxen-qemu-system-i386","title":"device_model_override = \"/usr/libexec/xen-qemu-system-i386\"","text":"<p>vga = \"stdvga\" videoram = 32 graphics = \"vnc\" vnc = 1 vncunused = 1 vnclisten = \"127.0.0.1\"</p> <p>vif = []</p> <p>disk = [   'format=qcow2,vdev=hda,access=rw,target=/var/lib/xen/images/win10.qcow2',   'format=raw,vdev=hdc,devtype=cdrom,access=ro,target=/var/lib/xen/iso/Win10.iso' ]</p> <p>$ sudo xl -vvv create /etc/xen/win10-seabios.cfg $ sudo apt install -y tigervnc-viewer $ vncviewer 127.0.0.1:5900          # \ud639\uc740 sudo xl vncviwer win10-seabios                                     # \ud3ec\ud2b8 = 5900 + vncdisplay</p> <p>$ sudo xl list Name                                        ID   Mem VCPUs  State   Time(s) Domain-0                                     0  4096    20     r-----    6300.0 win10-seabios                               22  4096     1     r-----       4.3</p> <p>sudo nano /etc/xen/win10-seabios-poweron.cfg     name = \"win10-seabios\" type = \"hvm\" memory = 4096 vcpus  = 2</p> <p>bios  = \"seabios\" boot  = \"c\"</p> <p>device_model_version  = \"qemu-xen\" device_model_override = \"/usr/libexec/xen-qemu-system-i386\"</p> <p>vga = \"stdvga\" videoram = 32 graphics = \"vnc\" vnc = 1 vncunused = 1 vnclisten = \"127.0.0.1\"</p> <p>vif = []</p> <p>disk = [   'format=qcow2,vdev=hda,access=rw,target=/var/lib/xen/images/win10.qcow2' ]</p> <p>sudo xl create /etc/xen/win10-seabios-poweron.cfg</p> <p>$ ip -br link lo               UNKNOWN        00:00:00:00:00:00   enp68s0          UP             38:a7:46:0f:3b:be   wlp0s20f3        UP             2c:7b:a0:8d:53:ba  <p>$ sudo nmcli connection add type bridge ifname xenbr0 con-name xenbr0 Connection 'xenbr0' (73ed640e-e780-434e-ac81-454bbb63a13f) successfully added.</p> <p>sudo nmcli con mod xenbr0 ipv4.method auto ipv6.method ignore bridge.stp no bridge.forward-delay 0</p> <p>$ sudo nmcli connection add type bridge-slave ifname enp68s0 master xenbr0 Connection 'bridge-slave-enp68s0' (3b3f8c28-d977-4851-9e61-f94cdb2d323e) successfully added.</p> <p>$ sudo nmcli connection down \"$(nmcli -t -f NAME,TYPE c show --active | awk -F: '$2==\"ethernet\"{print $1; exit}')\" 2&gt;/dev/null || true</p> <p>kkongnyang2@acer:~$ sudo nmcli device disconnect enp68s0 Device 'enp68s0' successfully disconnected.</p> <p>kkongnyang2@acer:~$ sudo nmcli con up bridge-slave-enp68s0 Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/18)</p> <p>kkongnyang2@acer:~$ sudo nmcli con up xenbr0 Connection successfully activated (master waiting for slaves) (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/19)</p> <p>kkongnyang2@acer:~$ nmcli device status DEVICE             TYPE      STATE                                  CONNECTION          xenbr0             bridge    connected                              xenbr0              wlp0s20f3          wifi      connected                              KT_GiGA_5G_1D39     enp68s0            ethernet  connected                              bridge-slave-enp68s0  xenbr-nat          bridge    connecting (getting IP configuration)  xenbr-na            lo                 loopback  connected (externally)                 lo                  p2p-dev-wlp0s20f3  wifi-p2p  disconnected                           --                   </p> <p>$ sudo nano /etc/xen/win10-seabios-poweron.cfg vif = [ 'bridge=xenbr0,model=e1000,script=vif-bridge,mac=52:54:00:12:34:56' ]</p> <p>$ sudo xl create /etc/xen/win10-seabios-poweron.cfg $ vncviewer 127.0.0.1:5900</p> <p>auto select\uc640 optimus \ucc28\uc774 \uc9c0\uae08\uae4c\uc9c0\ub294 optimus\ub294 \ubc31\ub77c\uc774\ud2b8 \ubc1d\uae30 \uc870\uc808\uc774 \uc548\ub418\ub294\uac70\ubc16\uc5d0 \uc5c6\uc74c. \ub458\ub2e4 \uc798 \ubd80\ud305\ub428</p>"},{"location":"6-CE-tutorial/","title":"6 CE tutorial","text":""},{"location":"6-CE-tutorial/#cheat-engine","title":"cheat engine \ud29c\ud1a0\ub9ac\uc5bc\uc744 \uc5f0\uc2b5\ud574\ubcf4\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-07-14</p>"},{"location":"6-CE-tutorial/#ce-tutorial-15","title":"CE tutorial 1~5","text":"<p>\uc8fc\uc18c \ud0d0\uc0c9 <pre><code>newscan \ub204\ub974\uae30\uc131\n\ucc3d\uc5d0 initial \uac12 \uc785\ub825 \ud6c4 firstscan \ub204\ub974\uae30\n\uac12 \ubcc0\ud654\uc2dc\ud0a4\uae30\n\ucc3d\uc5d0 second \uac12 \uc785\ub825 \ud6c4 nextscan \ub204\ub974\uae30\n\ubaa9\ub85d \ucd94\ub824\uc9c0\uba74 \ud074\ub9ad\ud574\uc11c \uc544\ub798 \uc791\uc5c5\ubc14\uc5d0 \ub0b4\ub9ac\uae30\n\uac70\uae30\uc11c \uac12 \uc870\uc791\n</code></pre> \ucf54\ub4dc \ubb34\ud6a8\ud654 <pre><code>what writes \ub4e4\uc5b4\uac00\uc11c \ub514\uc2a4\uc5b4\uc148\ube14\ub7ec \ubcf4\uae30. \ud574\ub2f9 \uc904 \ucf54\ub4dc\ub97c replace with code that does nothing\uc73c\ub85c \ubc14\uafb8\uba74 \uccb4\ub825\uac12\uc744 \uc4f0\ub294 \ucf54\ub4dc\uac00 \ubb34\ud6a8\ud654\ub3fc\uc11c \uc791\ub3d9 \uc548\ud55c\ub2e4.\n</code></pre></p>"},{"location":"6-CE-tutorial/#_1","title":"\ube4c\ub4dc\uc640 \ub7f0 \uc774\ud574\ud558\uae30","text":"<p>\ube4c\ub4dc = \uc18c\uc2a4 \ud30c\uc77c\uc744 \uc2e4\ud589 \ud30c\uc77c\ub85c \ucef4\ud30c\uc77c. \ub2e8 \ud55c\ubc88. \ub7f0 = \uadf8 \uc2e4\ud589 \ud30c\uc77c\uc774 \uba54\ubaa8\ub9ac\uc5d0 \uc62c\ub77c\uc640\uc11c \ud504\ub85c\uc138\uc2a4\ub85c \ub3cc\uc544\uac10.</p> <p>\ube4c\ub4dc\ub294 \uc18c\uc2a4 \ud30c\uc77c\uc758 \ubaa8\ub4e0 \ud568\uc218\ub97c \uc5b4\uc148\ube14\ub9ac\uc5b4\ub85c \ub9cc\ub4e4\uace0 .text\uc640 .data \ub4f1 \uc139\uc158\uc744 \ub098\ub220 \uc800\uc7a5\ud55c\ub2e4. \uc5b4\ucc28\ud53c \uc804\ubd80 \uac00\uc0c1\uc8fc\uc18c\uae34 \ud574\ub3c4 \ud568\uc218 \uac04\uc758 \uc624\ud504\uc14b\uc740 \uc644\ubcbd\ud558\uac8c \uace0\uc815\ub41c\ub2e4. \uadf8\ub807\uae30\uc5d0 press_button() \ud568\uc218\uc5d0\uc11c hp_edit() \ud568\uc218\ub85c, struct player \ub370\uc774\ud130\ub85c, \uc774 \uc0ac\uc774\uc5d0\ub294 \uc815\ud574\uc9c4 \uac70\ub9ac\uac00 \uc788\uc5b4 \uadf8\ub807\uac8c \ud638\ucd9c\uc774 \uac00\ub2a5\ud558\ub2e4. \uadf8\uac78 \uc624\ud504\uc14b\uc774\ub77c \ubd80\ub978\ub2e4.</p> <p><pre><code># foo() \uc548\uc5d0\uc11c bar() \ud638\ucd9c (x86-64 PIE)\ncall  [rip + 0x34]   ; \u2190 0x34\ub294 bar \uae4c\uc9c0\uc758 \uac70\ub9ac\n\n# \ub9cc\uc57d \uc9c4\uc9dc \uc678\ubd80\uc5d0 \uc788\uc73c\uba74?(\ub77c\uc774\ube0c\ub7ec\ub9ac \ub4f1)\n# \uc678\ubd80 \uc2ec\ubcfc bar() \ud638\ucd9c\ncall  QWORD PTR [rip + .got.plt.bar]  ; GOT \uc2ac\ub86f\uc5d0 patch\ub41c \uc808\ub300\uc8fc\uc18c\ub97c \uc77d\uc74c\n</code></pre> <pre><code>0x000055f4_9c8a0000  \u2500\u2500 [\ud14d\uc2a4\ud2b8]  \u2190 PIE \ubca0\uc774\uc2a4 (ASLR\ub85c \ub9e4 \uc2e4\ud589\ub9c8\ub2e4 \ubcc0\ub3d9)\n                     \u251c\u2500 [rodata]\n                     \u251c\u2500 [data]     \u2190 g_player\n                     \u251c\u2500 [bss]\n                     \u251c\u2500 (heap)     \u2190 malloc() \uad6c\uc870\uccb4\ub4e4 \u2026 \u2191 \uc131\uc7a5\n0x00007f3d_40000000  \u2500\u2500 [libc.so]  \u2190 \uacf5\uc720 \ub77c\uc774\ube0c\ub7ec\ub9ac \ubca0\uc774\uc2a4\n                     \u251c\u2500 \uae30\ud0c0 .so \u2026\n                     \u251c\u2500 (\uc775\uba85 mmap/JIT \uc601\uc5ed)\n0x00007ffe_fffe0000  \u2500\u2500 [stack]    \u2190 \uc2a4\ub808\ub4dc\ub9c8\ub2e4 \uc0c8\ub85c, \uc704\uc5d0\uc11c \u2193 \uc131\uc7a5\n</code></pre></p> <p>\uc6b0\ub9ac\uac00 \uc774\uac78 \ub7f0\ud558\uba74 \uc0c8\ub85c \uc21c\ucc28\uc801\uc73c\ub85c \ucf54\ub4dc\ub4e4\uc774 \uc0dd\uae30\ub294 \uac8c \uc544\ub2c8\ub77c \uc774 \ube4c\ub4dc \uc2e4\ud589 \ud30c\uc77c \uc548\uc5d0\uc11c \uc704\uce58\ub9cc \uc62e\uaca8\uac00\uba70 \uac01 \uc904\uc744 cpu\ub85c \uc791\ub3d9\uc2dc\ud0a4\ub294 \uac83\uc774\ub2e4. \ubaa8\ub4e0 \ud589\ub3d9\uc740 \uc774\ubbf8 \uc644\ubcbd\ud558\uac8c \uaddc\uc728\ub85c \uc9c0\uc815\ub418\uc5b4 \uc788\ub2e4. \ud558\ub4dc\uc6e8\uc5b4 \uc778\ud130\ub7fd\ud2b8\uac00 \ucee4\ub110 \ub2e8\uc5d0\uc11c \uc791\ub3d9\ub418\uba74 \uadf8\uac8c \uc5b4\ub290 \uc8fc\uc18c\ub85c \ud5a5\ud558\uace0 \uadf8 \ub2e4\uc74c\uc740 \uc5b4\ub514\ub85c \uc815\ud574\uc838 \uc788\ub294\uc9c0\uc758 \ubb38\uc81c\uc774\ub2e4. \ubb3c\ub860 \uc778\ud130\ub7fd\ud2b8\uc5d0 \uc758\ud574 \uc0c8\ub85c \ud560\ub2f9\ub418\ub294 \ub370\uc774\ud130\ub4e4\ub3c4 \uc788\uae34 \ud558\ub2e4. \uc774\uac83\ub4e4\uc740 \ud799, \uc2a4\ud0dd\ub4e4\ub85c \uc313\uc778\ub2e4.</p> <p>\uc989, \ube4c\ub4dc\ub294 \uc644\ubcbd\ud788 \uace0\uc815\ub41c \ud37c\uc990, \ub7f0\uc740 \ubca0\uc774\uc2a4 \uc8fc\uc18c\ub97c \uae30\ubc18\uc73c\ub85c \uadf8 \ud37c\uc990 \uc804\uccb4\ub97c \uadf8\ub300\ub85c \uc62c\ub9ac\uace0, \uc0ac\uc6a9\uc790 \uc778\ud130\ub7fd\ud2b8\uc5d0 \uc758\ud574 \ucd94\uac00 \ub370\uc774\ud130\uac00 \ub354 \ud560\ub2f9\ub418\ub294 \uac83.</p> <pre><code>\u250c\u2500[\ube4c\ub4dc \ub2e8\uacc4]\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u2460 \ubaa8\ub4e0 \ucf54\ub4dc\u00b7\uc804\uc5ed\u00b7\uc0c1\uc218 \u2192 \ud55c \ud37c\uc990\ucc98\ub7fc \u201c\uc138\uadf8\uba3c\ud2b8 + \uc624\ud504\uc14b\u201d \uace0\uc815 \u2502\n\u2502    (.text / .rodata / .data / .bss)                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2193 execve()\n\u250c\u2500[\ub7f0\ud0c0\uc784: \ud504\ub85c\uc138\uc2a4 \uc2dc\uc791]\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u2461 \ucee4\ub110\u00b7ld.so\uac00 \ubca0\uc774\uc2a4 \uc8fc\uc18c(ASLR)\ub9cc \uc815\ud574 mmap       \u2502\n\u2502    \u2500\u2500&gt; \u201c\ud37c\uc990\u201d \uc804\uccb4\ub97c \ud55c \ubc88\uc5d0 \uac00\uc0c1\uacf5\uac04\uc5d0 \uc62c\ub9bc        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2193 \uac8c\uc784 \uc9c4\ud589\n\u250c\u2500[\ub7f0\ud0c0\uc784: \ub3d9\uc801 \ub3d9\uc791]\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u2462 \uc0ac\uc6a9\uc790 \uc785\ub825\u00b7\ub124\ud2b8\uc6cc\ud06c \uc774\ubca4\ud2b8 \ub4f1 \u2192 \ud799/\uc2a4\ud0dd/mmap\uc5d0 \u2502\n\u2502    \uc0c8 \uac1d\uccb4\u00b7\ubc84\ud37c\ub97c **\ud544\uc694\ud560 \ub54c\ub9c8\ub2e4** \ucd94\uac00           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\ucc38\uace0\ub85c \ubaa8\ub4e0 \ud504\ub85c\uc138\uc2a4\ub4e4\uc740 \uba54\ubaa8\ub9ac \ub4b7\ubd80\ubd84\uc5d0 \ucee4\ub110\uc744 \uacf5\ud1b5\uc73c\ub85c \uac00\uc9c0\uace0 \uc788\ub2e4.</p>"},{"location":"6-CE-tutorial/#ce-tutorial-69","title":"CE tutorial 6~9","text":"<p>\uac8c\uc784 \uc9c4\ud589 \ub3c4\uc911 \uc0c8 \ud50c\ub808\uc774\uc5b4\uc758 hp\uc640 ammo\ub97c \uc5b4\ub5bb\uac8c \ud560\ub2f9\ud560\uae4c?</p> <p>struct player *p = malloc(sizeof *p);   // (1) rax \u2190 \uc0c8 \ud799 \uc8fc\uc18c g_local_player   = p;                   // (2) \ucf54\ub4dc\uac00 \uc804\uc5ed \ubcc0\uc218\uc5d0 \uc800\uc7a5</p> <p>\uc774\ub7f0 \uad6c\uc870\ub97c \ud1b5\ud574 \ud560\ub2f9\ud55c\ub2e4. \ub530\ub77c\uc11c \uc6b0\ub9ac\ub294 \ud50c\ub808\uc774\uc5b4 \ub9c8\ub2e4 \uac12\uc774 \uc801\ud78c \uc8fc\uc18c\ub97c \uc77c\uc77c\ud788 \ucc3e\uc544\ub2e4\ub2d0\uac8c \uc544\ub2c8\ub77c, \uc800 \ud560\ub2f9\ud558\uace0 \ud3ec\uc778\ud130\ud558\ub294 (\ubca0\uc774\uc2a4 \uc8fc\uc18c \uae30\uc900\uc73c\ub85c)\uace0\uc815\ub41c \uc9c4\uc6d0\uc9c0 \uc790\uccb4\ub97c \ucc3e\uc544\uc57c \ud55c\ub2e4.</p> <pre><code>[game.bin+0x1BCF30]   \u2192 0x0000006002A000   (\uc804\uc5ed \ud3ec\uc778\ud130, \uc624\ud504\uc14b \uace0\uc815)\n                                    \u2502\n                                    \u251c\u2500 hp  = *(+0x00)\n                                    \u251c\u2500 ammo= *(+0x04)\n                                    \u2514\u2500 pos  = *(+0x08) \u2026\n</code></pre> <p>\uc6b0\ub9ac\ub294 \uc800 \uac12\uc774 \ub2f4\uae34 \uc8fc\uc18c\ub97c \ub204\uac00 access \ud558\ub294\uc9c0 \uc9c4\uc6d0\uc9c0\ub97c \ucc3e\uc744 \uac83\uc774\ub2e4. \ud29c\ud1a0\ub9ac\uc5bc\uc5d0\uc11c change value\ub77c\ub294 \ubc84\ud2bc\uc744 \ub20c\ub7ec\uc11c \uac12\uc744 \ud560\ub2f9\ud558\uace0 \uc4f0\uae30 \uba85\ub839\uc744 \ub0b4\ub838\ub2e4 \ud588\uc744 \ub54c \uc774\ub97c \ub530\ub77c\uac00\ubcf4\uc790.</p> <p>\uba3c\uc800 \uc6a9\uc5b4 \uc815\ub9ac. \ubca0\uc774\uc2a4 \uc8fc\uc18c\ub294 \ub7f0\ud560\ub54c \uc815\ud574\uc9c0\ub294 \uc601\uc810 \uc870\uc808 \uac19\uc740 \uac83\uc774\ub2e4. game.bin \ud3ec\uc778\ud130\ub294 \uac12 \ubd80\ubd84\uc5d0 \uc218\uce58\ub97c \uc785\ub825\ud558\ub294\uac8c \uc544\ub2c8\ub77c \uc8fc\uc18c\ub97c \uc785\ub825\ud558\ub294 4\ubc14\uc774\ud2b8(64\ube44\ud2b8 os\uba74 8\ubc14\uc774\ud2b8)\ub2e4. 0x0000006002A000\ub77c\ub294 \uc8fc\uc18c\uac12\uc744 \uc801\uc5b4\uc900\ub2e4. \uc624\ud504\uc14b\uc740 \uace0\uc815\ub41c \ud37c\uc990\uc5d0\uc11c\uc758 \uac70\ub9ac\ub97c \ub73b\ud55c\ub2e4. +\ub4a4\uc5d0 \uc801\ud78c \uac78 \uc758\ubbf8\ud55c\ub2e4.</p> <p>\ub9cc\uc57d \ube4c\ub4dc \ub54c \uc774\ubbf8 \uc704\uce58\uac00 \uc815\ud574\uc9c4 \uc815\uc801 \ub370\uc774\ud130\uba74 \ud3ec\uc778\ud130\ub97c \uc4f8 \ud544\uc694\ub3c4 \uc5c6\uc774 \uac70\ub9ac\ub85c \ubc14\ub85c \uc77d\uc73c\uba74 \ub41c\ub2e4.</p> <p>\ud558\ud5a5\uc2dd (\uac12\uc5d0\uc11c\ubd80\ud130 \uccb4\uc778 \ub530\ub77c\uac00\uae30) <pre><code>Find out what writes to this address -&gt; \uc4f0\uae30 \ud0c0\uc785 \uba85\ub839\ub9cc\nFind out what accesses this address -&gt; \ubaa8\ub4e0 \ud0c0\uc785 \uba85\ub839(\ucc38\uc870 \ub4f1\ub4f1)\n\n# \uac12\uc774 \ub2f4\uae34 \uc8fc\uc18c \ud0d0\uc0c9\n# 15C4508. what writes\n# \uccb4\ub825\uac12 16F\ub97c 15C44F0 + 18 \uc704\uce58\uc5d0 \uc801\uc73c\ub77c\ub294 \ucf54\ub4dc \ubc1c\uacac\n\"Tutorial-x86_64.exe\"+4910A:\n10004910A - 89 46 18  - mov [rsi+18],eax &lt;&lt;\nRAX=000000000000016F\nRSI=00000000015C44F0\n\n# 15C44F0\ub97c \ud3ec\uc778\ud305 \ud558\ub294 \uc8fc\uc18c \ud0d0\uc0c9\n# 1642E30. what access\n# 1642E30 \uc704\uce58\uc5d0 \uc788\ub358 \uac12 15C44F0\uc744 \ubd88\ub7ec\uc624\ub294 \ucf54\ub4dc \ubc1c\uacac\n\"Tutorial-x86_64.exe\"+490C8:\n1000490C8 - 48 8B 36  - mov rsi,[rsi] &lt;&lt;\nRAX=0000000001642E30\nRSI=00000000015C44F0\n\n# 1642E30\uc744 \ud3ec\uc778\ud305 \ud558\ub294 \uc8fc\uc18c \ud0d0\uc0c9\n# 162A838. what access\n# 162A820 + 18 \uc704\uce58\uc5d0 \uc788\ub358 \uac12 1642E30\uc744 \ubd88\ub7ec\uc624\ub294 \ucf54\ub4dc \ubc1c\uacac\n\"Tutorial-x86_64.exe\"+4907C:\n10004907C - 48 8B 76 18  - mov rsi,[rsi+18] &lt;&lt;\nRAX=000000000162A820\nRSI=0000000001642E30\n\n# 162A820\uc744 \ud3ec\uc778\ud305 \ud558\ub294 \uc8fc\uc18c \ud0d0\uc0c9\n# 162A5B0. what access\n# 162A5A0 + 10 \uc704\uce58\uc5d0 \uc788\ub358 \uac12 162A820\uc744 \ubd88\ub7ec\uc624\ub294 \ucf54\ub4dc \ubc1c\uacac\n\"Tutorial-x86_64.exe\"+49034:\n100049034 - 48 8B 76 10  - mov rsi,[rsi+10] &lt;&lt;\nRAX=000000000162A5A0\nRSI=000000000162A820\n\n# 162A5A0\uc744 \ud3ec\uc778\ud305 \ud558\ub294 \uc8fc\uc18c \ud0d0\uc0c9\n# \"tutorial-x86_64.exe\"+34ECA0.\n\n10034ECA0 -&gt; 162A5A0 + 10 -&gt; 162A820 + 18 -&gt; 1642E30 -&gt; 15C44F0 + 18 -&gt; 16F\n\n# change address \ub204\ub974\uace0 tutorial-x86_64.exe \ubd80\ud130 \uccb4\uc778 \uc5f0\uacb0\ud574\uc8fc\uba74 \ub428\n</code></pre> </p> <p>\ucf54\ub4dc \uc778\uc81d\uc158 <pre><code>\ub514\uc2a4\uc5b4\uc148\ube14\ub9ac\uc5d0\uc11c ctrl+A \ub20c\ub7ec \uc5b4\uc148\ube14\ub7ec \ucc3d \uc5f4\uae30. code injection\uc744 \ud074\ub9ad\ud558\uace0 \uc6d0\ud558\ub294 \ubd80\ubd84\uc758 \ub0b4\uc6a9 \uc218\uc815\n</code></pre></p> <p>\uc0c1\ud5a5\uc2dd (\uba54\ubaa8\ub9ac \uc804\uc218 \uc2a4\uce94) <pre><code>pointer scan for this address \uc790\ub3d9 \uc2a4\uce90\ub108 \uc774\uc6a9.\n\uac12 \uc8fc\uc18c\ub97c \ucc3e\uc740 \ud6c4 \uc6b0\ud074 \ub204\ub974\uace0 \ud574\ub2f9 \uc2a4\uce90\ub108 \ud074\ub9ad. max level\uc740 \ubcf4\ud1b5 5\ub85c , max offset\uc740 0x3FF \uc815\ub3c4\ub85c \uc124\uc815. .ptr \ud30c\uc77c\uc5d0 \ud6c4\ubcf4 \ub9ac\uc2a4\ud2b8\uac00 \uc800\uc7a5\ub418\uba74 \uac8c\uc784 \uc7ac\uc2e4\ud589 \ud6c4 pointer scan \ub204\ub974\uace0 rescan memory \ud558\uba74 \uc815\ub9d0 static\uc778 \ud6c4\ubcf4\ub9cc \ub0a8\ub294\ub2e4. \uadf8\uac83\ub4e4\uc744 \uc791\uc5c5\ubc14\ub85c \uc62e\uae34\ub2e4.\n</code></pre></p>"},{"location":"7-base-address/","title":"7 base address","text":""},{"location":"7-base-address/#cheat-engine","title":"cheat engine\uc73c\ub85c \uac01 \ud56d\ubaa9 \uc8fc\uc18c\ub97c \ucc3e\uc790","text":"<p>\uc791\uc131\uc790: kkongnyang2 \uc791\uc131\uc77c: 2025-07-14</p> <p>battle.net \ub2e4\uc6b4 \ud6c4 \uc124\uce58, \uc624\ubc84\uc6cc\uce58 \uc124\uce58 cheat engine window 10 7.5 \uc778\ud130\ub137\uc5d0\uc11c \ub2e4\uc6b4 \ud6c4 \uc124\uce58</p>"},{"location":"9-main-thread/","title":"9 main thread","text":""},{"location":"9-main-thread/#_1","title":"&gt;","text":"<p>github \uc624\ud508\uc18c\uc2a4 - LibVMI\uacfc PyVMI \uc608\uc81c. Python \ubc14\uc778\ub529\uc73c\ub85c \ud504\ub85c\uc138\uc2a4 \ub9ac\uc2a4\ud2b8\uc640 \uba54\ubaa8\ub9ac \uc77d\uae30 \ub370\ubaa8. https://github.com/maxking/pyvmi_example?utm_source=chatgpt.com</p> <p>github \uc624\ud508\uc18c\uc2a4 - r2vmi\uc640 IntroVirt. LibVMI + Radare2 \ud50c\ub7ec\uadf8\uc778/KVM \uc804\uc6a9 \ud655\uc7a5\uacfc VMI \ud504\ub808\uc784\uc6cc\ud06c https://github.com/Wenzel/r2vmi?utm_source=chatgpt.com https://github.com/IntroVirt/IntroVirt?utm_source=chatgpt.com</p> <p>github \uc624\ud508\uc18c\uc2a4 - pixelbot https://github.com/AliShazly/pixelbot?utm_source=chatgpt.com</p> <p>\uce58\ud2b8 \uc18c\uc2a4 P. Karkallis, J. Blasco, G. Suarez-Tangil, and S. Pastrana. Detecting video-game injectors exchanged in game cheating communities. In Computer Security \u2013 ESORICS 2021: 26th European Symposium on Research in Computer Security, Darmstadt, Germany, October 4\u20138, 2021, Proceedings, Part I, page 305\u2013324, Berlin, Heidelberg, 2021. Springer-Verlag.</p>"},{"location":"9-main-thread/#_2","title":"&gt; \uac8c\uc2a4\ud2b8 \uce21 \ubcf4\uc548 \uc81c\uac70","text":"<p>\uc548\ud2f0\uce58\ud2b8\uac00 Hyper-V \ucee4\ub110 \ub808\uc774\ub7ec\ub97c \uac10\uc9c0\ud558\uba74 \ubc14\ub85c \ube14\ub8e8\uc2a4\ud06c\ub9b0.</p> <p>step 1. \uc124\uc815 \u203a \uc571 \u203a \uc120\ud0dd\uc801 \uae30\ub2a5 <pre><code>    Hyper-V\n    Windows Hypervisor Platform\n    Virtual Machine Platform\n    Windows Sandbox\n    Windows Subsystem for Linux\n    \u2192 \uc804\ubd80 \uccb4\ud06c \ud574\uc81c(\uc81c\uac70) \u25b8 \uc7ac\ubd80\ud305\n</code></pre></p> <p>step 2. \uc124\uc815 <pre><code>    core isolation \u2192 Memory Integrity OFF\n    Optional: bcdedit /set hypervisorlaunchtype off\n</code></pre></p>"}]}