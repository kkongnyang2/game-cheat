
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../10-anti-cheat/">
      
      
      <link rel="icon" href="../logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>1 ow - Game-Cheat</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../soft-era.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="apple" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Game-Cheat" class="md-header__button md-logo" aria-label="Game-Cheat" data-md-component="logo">
      
  <img src="../logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Game-Cheat
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              1 ow
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="apple" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Soft Era"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Soft Era" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20.71 4.63-1.34-1.34c-.37-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.04 0-1.41M7 14a3 3 0 0 0-3 3c0 1.31-1.16 2-2 2 .92 1.22 2.5 2 4 2a4 4 0 0 0 4-4 3 3 0 0 0-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="soft" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Apple Classic"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Apple Classic" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20.71 4.63-1.34-1.34c-.37-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.04 0-1.41M7 14a3 3 0 0 0-3 3c0 1.31-1.16 2-2 2 .92 1.22 2.5 2 4 2a4 4 0 0 0 4-4 3 3 0 0 0-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  1 ow

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../10-anti-cheat/" class="md-tabs__link">
        
  
  
    
  
  10 anti cheat

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../11-openra/" class="md-tabs__link">
        
  
  
    
  
  11 openra

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../2-mem/" class="md-tabs__link">
        
  
  
    
  
  2 mem

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../3-cheats/" class="md-tabs__link">
        
  
  
    
  
  3 cheats

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../4-VMI/" class="md-tabs__link">
        
  
  
    
  
  4 VMI

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../5-CE-tutorial/" class="md-tabs__link">
        
  
  
    
  
  5 CE tutorial

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../6-device/" class="md-tabs__link">
        
  
  
    
  
  6 device

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../7-vmi-run/" class="md-tabs__link">
        
  
  
    
  
  7 vmi run

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../8-base-address/" class="md-tabs__link">
        
  
  
    
  
  8 base address

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../9-main-thread/" class="md-tabs__link">
        
  
  
    
  
  9 main thread

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Game-Cheat" class="md-nav__button md-logo" aria-label="Game-Cheat" data-md-component="logo">
      
  <img src="../logo.svg" alt="logo">

    </a>
    Game-Cheat
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    1 ow
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    1 ow
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      오버워치 구조를 알아보자
    </span>
  </a>
  
    <nav class="md-nav" aria-label="오버워치 구조를 알아보자">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      목표: 게임 구조 탐색
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 설치 파이프라인
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 엔진
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 클라우드 스트리밍 서비스
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-anti-cheat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10 anti cheat
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../11-openra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11 openra
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../2-mem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2 mem
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../3-cheats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 cheats
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../4-VMI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 VMI
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../5-CE-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 CE tutorial
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../6-device/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 device
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../7-vmi-run/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7 vmi run
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../8-base-address/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8 base address
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../9-main-thread/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9 main thread
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      오버워치 구조를 알아보자
    </span>
  </a>
  
    <nav class="md-nav" aria-label="오버워치 구조를 알아보자">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      목표: 게임 구조 탐색
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 설치 파이프라인
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 엔진
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 클라우드 스트리밍 서비스
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>1 ow</h1>

<h2 id="_1">오버워치 구조를 알아보자</h2>
<h3 id="_2">목표: 게임 구조 탐색</h3>
<p>작성자: kkongnyang2 작성일: 2025-07-06</p>
<hr />
<p>오버워치는 엔진, 설치, 툴체인으로 이루어져 있다.</p>
<h3 id="_3">&gt; 설치 파이프라인</h3>
<p>파이프라인은 소스 asset에서 실행가능 asset으로 변환하거나, 캐싱, 분산 빌드, 패키징 등을 한다.</p>
<div class="highlight"><pre><span></span><code>[Source Assets] ─▶ pull --sourcepull ─▶ SQLite ‘local asset DB’
                 ▲                             │
                 │ (Structured-Data Generator) │
                 │                             ▼
[Builder per Type] ◀─ DataBuild --compile ──▶ [Compiled Asset Store]
</code></pre></div>
<p>genrator: json 유사 선언(SDLang)으로 타입-안전 C++/C# 클래스, 에디터 리플렉션 코드 자동생성. 산출물 위치는 Generated/<TypeName>.h/.cpp로 추정.</p>
<p>builer: asset 타입별(메시, 머티리얼, 영웅 스크립트) DLL. 입력 SHA-1 해시와 CompilerID 조합으로 결과를 캐싱해, 이미 컴파일된 동일 입력은 전역 Compiled Asset Repository에서 그냥 당겨온다. 분산 빌드는 내부 빌드팜 30노드 기준 12h -&gt; 4h 이다. 완성 자산을 기능 단위 Package로 묶고, 지역, 플랫폼별 암호화 규칙을 붙여 런처가 온-디맨드 스트리밍을 한다. 산출물 위치는 Compiled/<hash>/<guid>.bin로 추정.</p>
<p><div class="highlight"><pre><span></span><code>1) Battle.net → /versions  → buildConfig, cdnConfig, keyRing
2) buildConfig → root, encoding, install, download 해시 목록 확인
3) cdnConfig  → 사용 가능한 CDN 도메인·아카이브 분할 규칙 확인
4) 필요한 .idx / .data 조각 GET
5) 인덱스 갱신 → 게임 실행 → shmem 업데이트
</code></pre></div><br />
TACT 프로토콜이 ①~③을 담당하고, 실제 .data 조각 전송은 HTTPS GET으로 이뤄집니다.</p>
<div class="highlight"><pre><span></span><code>Overwatch/
├─ Engine/                 # 런타임 코어
│   ├─ Core/               # 메모리, Job, Math, ECS Core
│   ├─ Graphics/           # DX12/Vulkan 렌더러
│   ├─ Physics/
│   ├─ Audio/
│   └─ Platform/
├─ Game/                   # ECS 시스템·컴포넌트·스킴
│   ├─ Heroes/
│   │   └─ Tracer/
│   ├─ Abilities/
│   └─ PvE/
├─ Network/                # 프레임 스냅샷, 롤백, 예측
├─ Tools/
│   ├─ TED/                # 월드·스크립트 에디터 GUI
│   ├─ DataBuild/          # 메인 파이프라인 실행파일
│   │   └─ Builders/       # *.Builder.dll per asset-type
│   ├─ Generators/         # Structured-Data codegen
│   ├─ BranchManager/
│   └─ PackageManager/
├─ CI/
│   └─ DataBuildCI/
├─ Content/                # ‘소스’ 자산(PSD, FBX, WAV…)
└─ BuildScripts/           # CMake/SCons + 퍼블리셔 스크립트
</code></pre></div>
<p>실제로 우리가 내려받는 파일은 실행 파일과 라이브러리,  CASC 데이터 아카이브, 인덱스, 런처 메타데이터가 다이다.</p>
<p>실행 파일: C/C++로 컴파일된 클라이언트, 런처 코드. Overwatch/Overwatch.exe<br />
라이브러리: <em>.dll<br />
CASC: Content Addressable Storage Container로, 블리자드가 MPQ를 대체해 사용하는 패키지 포맷으로, 파일 덩어리를 '콘텐츠 해시' 기준으로 저장, 스트리밍한다. 영웅 모델, 사운드, 맵 등 asset이 암호화된 채로 저장되어 있다. 설치기(Battle.net) &lt;-&gt; 게임 실행 시 동일 구조를 공유해 증분 패치가 빠르다. Overwatch/data/casc/data/…<br />
인덱스: CASC 블록-해시와 실제 위치를 매핑한다. …/casc/indices/</em>.idx<br />
런처 메타데이터: 버전, CDN 위치, 해시 목록 (TACT 프로토콜). *.build.info, *.product.db</p>
<p>설치나 업데이트 흐름은 다음과 같다.<br />
<div class="highlight"><pre><span></span><code>i. Battle.net 앱에서 &#39;설치&#39; 버튼을 누르면 TACT 프로토콜로 버전, 해시 목록을 받아옴
ii. 클라이언트는 CDN에서 컴파일된 실행 파일과 CASC 조각을 내려받음
iii. 받은 조각은 Overwatch/data/casc 아래에 저장되고, 인덱스, 저널(*.idx,shmem) 파일에 위치가 기록됨
iv. 실행 시 런처가 무결성 검사(해시-&gt;블록 확인) 후 실행.
</code></pre></div></p>
<p>그리고 이조차 오버워치 1과 2에 차이를 보인다.</p>
<table>
<thead>
<tr>
<th>항목</th>
<th>Overwatch (2016)</th>
<th>Overwatch 2 (2022\~)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>엔진 코어</strong></td>
<td>Team 4 독자 ECS 엔진 v1.0</td>
<td><strong>v1.5 – 동일 코드베이스를 확장</strong><br>· 멀티스레드 렌더 파이프라인<br>· 물리·파티클 최대치 상향<br>· <strong>동적 조명·PBR 재질</strong> 추가</td>
</tr>
<tr>
<td><strong>맵/자산 규모</strong></td>
<td>평균 100 × 100 m, 6v6 전제</td>
<td><strong>PvE용 3\~5배 대형 맵</strong>, 스크립트형 이벤트, 동적 기상 효과</td>
</tr>
<tr>
<td><strong>DataBuild 파이프라인</strong></td>
<td>203 타입, 분산 빌드 30 노드/4 h</td>
<td><strong>≈250 타입</strong>(+Perk·Cinematic 등), 일부 GPU 전용 빌더-DLL 신설·CUDA 활용</td>
</tr>
<tr>
<td><strong>Generator(SDLang → 코드)</strong></td>
<td>1,700여 구조체</td>
<td><strong>Hero Perks/Progression 등 신규 스키마</strong> 자동생성</td>
</tr>
<tr>
<td><strong>패키징·배포</strong></td>
<td>CASC v2 + TACT, SHA-1 암호화</td>
<td><strong>CASC v3</strong> (AES-CTR 128 bit) · 증분 스트리밍 최적화</td>
</tr>
<tr>
<td><strong>클라이언트 규모(PC)</strong></td>
<td>설치 25 \~ 30 GB</td>
<td>시즌 15 기준 <strong>≈52 GB</strong>, 패치 시 증분 다운로드</td>
</tr>
</tbody>
</table>
<h3 id="_4">&gt; 엔진</h3>
<p>엔진은 게임이 실시간으로 진행되는 코드이다. ECS(Entitiy-Component-System) 기반 시뮬레이션 루프, 렌더러, 물리, 오디오, 플랫폼 래퍼 등으로 구성되어 있다.</p>
<p>이때 엔진의 핵심 특징은 ECS + Network-deterministic 시뮬레이션이라는 것이다. 모든 클라이언트, 서버가 틱 단위로 같은 계산을 재현하도록 설계되어 입력만 동기화하면 결과가 일치한다.</p>
<p>ECS? Entity/Component/System 세가지 축.<br />
Entity: 고유 ID, 생명주기, 폭발 구역, 영웅 한명, 투사체 등 데이터나 논리가 없는 것들. 메모리에서 32-bit 핸들(인덱스+세대) 배열이다.<br />
Component: 순수 데이터(POD)로 위치(transform), HP(health), 총알수(weaponstate). 메모리에서 SoA(Structure of Arrays)로 캐시 친화이다.<br />
System: 매 틱마다 필요 Component 셋을 가진 Entity 스트림을 스캔해 로직을 실행한다. MovementSystem(transform+Physics), WeaponSystem(weaponstate+input) 등이다. 메모리에서 다중 스레드/Job 큐로 병렬 처리한다.</p>
<p>전통석인 상속 계층(OOP)과는 확실히 다른 분리로 코드 복잡도가 낮다.</p>
<p>네트워크 결정론? 모든 참가자가 같은 초기 상태에서 같은 시점별 입력 시퀀스만 공유하면, 각자의 PC에서 돌린 결과가 바이트 단위까지 동일하게 재현된다.</p>
<p>즉 클라이언트는 매 틱(63hz 즉 15.9ms) 입력값 수바이트를 꾸준히 보낸다. 63 Hz 'high-bandwidth' 서버가 이를 받는다. 서버는 모두의 Command[N]을 모아 권위 시뮬레이션을 돌린다. 그 결과를 delta 스냅샷으로 각 클라이언트에 배포한다. 클라이언트는 자신이 미리 돌린 로컬 예측과 비교해 필요하면 미세 롤백/보정만 수행한다.</p>
<p>따라서 자신의 움직임은 입력 시점에 돌아가고 다른 플레이어는 살짝 과거(약 50ms)를 재생하고 있는 것이다. 서버의 스냅샷을 기준으로 말하면 내 캐릭은 앞으로 1/2 RTT정도 앞서 달리고, 상대 캐릭터는 과거 1/2 RTT정도를 재생하는 것이다.</p>
<p>참고/ 결정론을 유지하기 위해 고정 틱 레이트, 부동소수점과 연산 순서 통제, 무작위 요소는 전역 시드 PRNG 사용, 컴포넌트 순서 고정, command에 Tick ID 포함.</p>
<p>클라이언트-&gt;서버 command 패킷 형식</p>
<table>
<thead>
<tr>
<th>필드</th>
<th>압축·비트수</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tickId</code></td>
<td>16 bit</td>
<td>이 명령이 적용될 ECS 틱(63 Hz면 0.0159 s)</td>
</tr>
<tr>
<td><code>buttons</code></td>
<td>16 bit</td>
<td>LMB / Shift / Ability 1·2·Ult 등 ― 비트플래그</td>
</tr>
<tr>
<td><code>moveX, moveY</code></td>
<td>각각 8 bit</td>
<td>WASD 축, -127\~127 정규화</td>
</tr>
<tr>
<td><code>yaw, pitch</code></td>
<td>각각 13 bit</td>
<td>0-360°, 0-±89° 양자화</td>
</tr>
<tr>
<td><code>heroPayload</code></td>
<td>가변</td>
<td>(예) 메이 얼음벽 높이, 자리야 충전량…</td>
</tr>
<tr>
<td><strong>중복 명령</strong></td>
<td>Δ-압축</td>
<td>직전 3 틱 입력을 diff 형태로 추가해 패킷 손실 대비</td>
</tr>
</tbody>
</table>
<p>실제 기준 11-15B 정도로 매우 작음<br />
헤더에는 seq/ack 번호와 서버 스냅샷 ack(내가 N번째 결과까지 받았다)가 함께 들어 있다.</p>
<p>물리적 전송 계층 <br />
프로토콜은 battle.net 실시간 스트림으로 UDP+자체 재전송/암호화 레이어.<br />
주 사용 포트는 UDP 5060,5062,6250,3478,3479,12000~64000 과 TCP 1119,3724,6113.<br />
보안은 세션 핸드셰이크 뒤 AES-CTR 키 링으로 외부 추출 차단.</p>
<p>서버 측 처리 흐름.<br />
<div class="highlight"><pre><span></span><code>for every tick N:
    cmds = gatherCommandsFromClients(N)      // 없으면 N-1 입력 재사용
    runAllECSSystems(cmds)                   // 결정론 시뮬레이션
    delta = makeSnapshotDelta(prev, current)
    sendSnapshotToEachClient(delta, ack=N)   // 완성된 스냅샷을 UDP로 전송
</code></pre></div></p>
<p>서버-&gt;클라이언트 스냅샷 형식</p>
<p>100 ~ 200 바이트. 바이트 스트림 전체가 AES-CTR로 암호화돼 있다.<br />
A층 헤더. 6-8B</p>
<table>
<thead>
<tr>
<th>필드</th>
<th>비트수</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>snapshotSeq</code></td>
<td>16</td>
<td>이번 스냅샷의 연속 번호</td>
</tr>
<tr>
<td><code>baselineSeq</code></td>
<td>16</td>
<td>“이 번호까지는 클라가 받았다고 확정”— 델타의 기준 틱</td>
</tr>
<tr>
<td><code>ackBits</code></td>
<td>32</td>
<td>최근 32개 스냅샷 수신 확인 비트-필드</td>
</tr>
<tr>
<td><code>flags</code></td>
<td>8</td>
<td>압축(LZ4), 전체스냅샷 여부 등</td>
</tr>
</tbody>
</table>
<p>B층 entity 테이블. 5-40B<br />
Create/Update/Delete 비트 마스크 + 엔티티 ID 가변길이 VLQ <br />
ID는 EntityIndex &lt;&lt; 6 | GenerationBits(6) 형태를 7bit VLQ로 압축.</p>
<p>C층 Component Δ블록(entity별로 1~100B).</p>
<table>
<thead>
<tr>
<th>순서</th>
<th>내용</th>
<th>인코딩 방식·비트수 예</th>
</tr>
</thead>
<tbody>
<tr>
<td>① <code>updateMask</code></td>
<td>이 엔티티에서 바뀐 컴포넌트 비트필드</td>
<td>최대 16 비트</td>
</tr>
<tr>
<td>② 컴포넌트 인덱스</td>
<td>바뀐 것만 순차 기록</td>
<td>가변(Δ-VLQ)</td>
</tr>
<tr>
<td>③ <strong>필드별 Δ</strong></td>
<td>값마다 개별 양자화</td>
<td>예) <strong>위치</strong> X/Y/Z → 16·16·14 bit<br><strong>Yaw/Pitch</strong> → 13·9 bit<br><strong>HP</strong> → 10 bit (0-1023)</td>
</tr>
</tbody>
</table>
<p>즉 한번에 표현하자면<br />
[UDP]  <AES-CTR>  |Header|E-Tbl|ΔComp(Entity #17)|ΔComp(Entity #42)|…<br />
                ▲ 압축(LZ4) ▲</p>
<p>클라이언트 수신-&gt;롤백/재적용<br />
로컬 예측 결과와 비교해 차이가 나면 롤백.</p>
<h3 id="api">&gt; API</h3>
<p>api? 소프트웨어끼리 약속한 대화 규칙이다. 어떤 프로그램이 다른 기능을 호출하거나 제어할 수 있도록 이름, 입력, 반환, 동작이 문서화된 인터페이스.</p>
<p>오버워치에서 사용하는 api?</p>
<table>
<thead>
<tr>
<th>구역</th>
<th>무엇을 캡처할 수 있나</th>
<th>암/복호화 가능성</th>
<th>추천 도구·방법</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>① <strong>Battle.net HTTP API</strong><br>(로그인·OAuth·매치메이커·패치 메타)</td>
<td>HTTPS - TLS 1.3</td>
<td>TLS―브라우저와 동일.<br>클라에 <strong>Pinning 없음</strong> → <code>SSLKEYLOGFILE</code> + Wireshark로 복호화 가능 (윈도우 Schannel 기반)</td>
<td><br>1. 환경변수 <code>SSLKEYLOGFILE=%USERPROFILE%\tls.keys</code> 설정<br>2. Wireshark ▸ TLS ▸ (Pre-)Master-Secret log 경로 지정<br>3. 필터 <code>tcp.port==443 &amp;&amp; tls.handshake.extensions_server_name contains "battle.net"</code></td>
<td></td>
</tr>
<tr>
<td>② <strong>TACT/CDN 다운로드</strong><br>(CASC *.data, *.idx, root/encoding)</td>
<td>순수 HTTP GET</td>
<td><strong>평문</strong><br>(블록 자체는 BLTE 압축·AES 가능)</td>
<td><br>– Wireshark <code>http.host contains "level3.blizzard.com"</code><br>– <code>tactmon</code>, <code>curl -O</code> 로 재현<br>– 이후 로컬 파일을 <strong>CascView / TACTLib</strong>로 분석</td>
<td></td>
</tr>
<tr>
<td>③ <strong>게임플레이 UDP 스트림</strong><br>(Command ↔ Snapshot)</td>
<td>전용 UDP (기본 63 Hz)<br>포트 <strong>5060, 5062, 6250, 12000-64000</strong></td>
<td><strong>AES-CTR 전구간 암호화</strong><br>키는 런타임 메모리 안(OW2 = Key-Ring) → 외부에서 복호화 불가</td>
<td><br>– Wireshark <code>udp.port &gt;= 12000 &amp;&amp; udp.port &lt;= 64000</code><br>– “Follow → UDP Stream”으로 <strong>패킷 길이·RTT·손실</strong> 통계만 확인<br>– Payload 해석은 사실상 불가능 (키 추출·메모리 후킹 필요)</td>
<td></td>
</tr>
<tr>
<td>④ <strong>클라이언트 로그·로컬 상태</strong></td>
<td><code>Overwatch/Logs/*.log</code> &amp; CASC <code>data/shmem</code>, <code>.idx</code></td>
<td>평문</td>
<td>텍스트 뷰어·010 Editor</td>
<td></td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>1) TLS 키 로깅
setx SSLKEYLOGFILE &quot;%USERPROFILE%\tls.keys&quot;

1) 관리자 권한으로 Wireshark 실행
    - Capture filter: host 137.*.***.*** or udp
    - TLS ‣ (Pre-)Master-Secret log: %USERPROFILE%\tls.keys

 2) Overwatch2 실행 → 로그인 → 한 판 플레이

 3) Wireshark
    a) HTTP 스트림: tcp.port==443 &amp;&amp; tls.app_data
       ­→ Follow TCP Stream → JSON Body 확인
    b) UDP 스트림: udp.port&gt;=12000 &amp;&amp; udp.port&lt;=64000
      ­→ Statistics ▸ I/O Graph 로 틱 주기·손실률 확인
</code></pre></div>
<p>스냅샷 패킷 내부를 까볼 수 있나?</p>
<div class="highlight"><pre><span></span><code>OW1 – 일부 키가 공개돼 있어 CascView + OverTool 로 제한적 디코딩 가능.

OW2 (CASC v3 + Key-Ring) – AES-CTR 키가 서버에서 동적 교환 → 외부 추출 난도 ↑.
따라서 Wireshark로는 헤더 길이·Sequence/ACK 필드만 보이고,
엔티티 Table·컴포넌트 Δ-블록은 전부 암호화된 바이트 스트림입니다.
</code></pre></div>
<h3 id="_5">&gt; 클라우드 스트리밍 서비스</h3>
<p>DTLS-UDP 채널에 컨트롤 패킷만 실려 간다. SRTP 채널은 반대로 서버가 인코딩한 영상, 오디오 스트림을 내려보낸다.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "content.code.copy", "header.autohide"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>