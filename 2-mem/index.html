
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../11-openra/">
      
      
        <link rel="next" href="../3-cheats/">
      
      
      <link rel="icon" href="../logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>2 mem - Game-Cheat</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../soft-era.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="apple" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Game-Cheat" class="md-header__button md-logo" aria-label="Game-Cheat" data-md-component="logo">
      
  <img src="../logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Game-Cheat
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2 mem
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="apple" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Soft Era"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Soft Era" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20.71 4.63-1.34-1.34c-.37-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.04 0-1.41M7 14a3 3 0 0 0-3 3c0 1.31-1.16 2-2 2 .92 1.22 2.5 2 4 2a4 4 0 0 0 4-4 3 3 0 0 0-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="soft" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Apple Classic"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Apple Classic" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20.71 4.63-1.34-1.34c-.37-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.04 0-1.41M7 14a3 3 0 0 0-3 3c0 1.31-1.16 2-2 2 .92 1.22 2.5 2 4 2a4 4 0 0 0 4-4 3 3 0 0 0-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../1-ow/" class="md-tabs__link">
        
  
  
    
  
  1 ow

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../10-anti-cheat/" class="md-tabs__link">
        
  
  
    
  
  10 anti cheat

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../11-openra/" class="md-tabs__link">
        
  
  
    
  
  11 openra

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  2 mem

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../3-cheats/" class="md-tabs__link">
        
  
  
    
  
  3 cheats

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../4-VMI/" class="md-tabs__link">
        
  
  
    
  
  4 VMI

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../5-CE-tutorial/" class="md-tabs__link">
        
  
  
    
  
  5 CE tutorial

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../6-device/" class="md-tabs__link">
        
  
  
    
  
  6 device

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../7-vmi-run/" class="md-tabs__link">
        
  
  
    
  
  7 vmi run

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../8-base-address/" class="md-tabs__link">
        
  
  
    
  
  8 base address

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../9-main-thread/" class="md-tabs__link">
        
  
  
    
  
  9 main thread

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Game-Cheat" class="md-nav__button md-logo" aria-label="Game-Cheat" data-md-component="logo">
      
  <img src="../logo.svg" alt="logo">

    </a>
    Game-Cheat
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../1-ow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1 ow
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-anti-cheat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    10 anti cheat
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../11-openra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    11 openra
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    2 mem
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    2 mem
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      메모리를 공부해보자
    </span>
  </a>
  
    <nav class="md-nav" aria-label="메모리를 공부해보자">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      목표: 메모리 공부
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 전체 메모리 보기
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 프로세스 레벨로 메모리 확인
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 커널 레벨 물리 메모리
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 물리 덤프
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../3-cheats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    3 cheats
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../4-VMI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4 VMI
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../5-CE-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5 CE tutorial
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../6-device/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    6 device
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../7-vmi-run/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    7 vmi run
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../8-base-address/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    8 base address
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../9-main-thread/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    9 main thread
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      메모리를 공부해보자
    </span>
  </a>
  
    <nav class="md-nav" aria-label="메모리를 공부해보자">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      목표: 메모리 공부
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 전체 메모리 보기
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 프로세스 레벨로 메모리 확인
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 커널 레벨 물리 메모리
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      &gt; 물리 덤프
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>2 mem</h1>

<h2 id="_1">메모리를 공부해보자</h2>
<h3 id="_2">목표: 메모리 공부</h3>
<p>작성자: kkongnyang2 작성일: 2025-07-06</p>
<hr />
<h3 id="_3">&gt; 전체 메모리 보기</h3>
<p>step 1. 실시간 사용량<br />
<div class="highlight"><pre><span></span><code>~$ top
top - 16:45:55 up 38 min,  1 user,  load average: 0.89, 1.03, 0.93
Tasks: 284 total,   1 running, 283 sleeping,   0 stopped,   0 zombie
%Cpu(s):  3.5 us,  1.0 sy,  0.0 ni, 95.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
MiB Mem :   7742.6 total,   1928.0 free,   2904.1 used,   2910.5 buff/cache
MiB Swap:   2048.0 total,   2048.0 free,      0.0 used.   4062.3 avail Mem 

    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND  
   3547 kkongny+  20   0 3008464 477472 118420 S  19.3   6.0   4:23.30 Isolate+ 
   1169 kkongny+  20   0 5301912 289408 135616 S   5.6   3.7   3:01.53 gnome-s+ 
   3448 kkongny+  20   0  367208  63532  51328 S   2.3   0.8   0:58.19 Utility+ 
   2589 kkongny+  20   0   11.8g 521776 242904 S   2.0   6.6   6:08.27 firefox  
   5196 kkongny+  20   0  594156  56948  43620 S   1.7   0.7   0:00.42 gnome-t+ 
    963 kkongny+   9 -11 1792844  27632  22000 S   1.0   0.3   0:19.37 pulseau+ 
    586 root      20   0    2816   1792   1792 S   0.7   0.0   0:01.57 acpid    
    427 root     -51   0       0      0      0 S   0.3   0.0   0:00.11 irq/173+ 
    517 systemd+  20   0   14836   6784   6016 S   0.3   0.1   0:02.96 systemd+ 
   4743 kkongny+  20   0 1161.6g 182960 128680 S   0.3   2.3   0:12.15 code     
   4900 kkongny+  20   0 1161.5g 183948  79488 S   0.3   2.3   0:40.57 code     
   5231 kkongny+  20   0   14532   4480   3584 R   0.3   0.1   0:00.04 top      
      1 root      20   0  166960  11584   8128 S   0.0   0.1   0:01.10 systemd  
      2 root      20   0       0      0      0 S   0.0   0.0   0:00.00 kthreadd 
      3 root      20   0       0      0      0 S   0.0   0.0   0:00.00 pool_wo+ 
      4 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 kworker+ 
      5 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 kworker+ 
</code></pre></div><br />
step 2. 아예 프로그램처럼 보여주기<br />
<div class="highlight"><pre><span></span><code>~$ htop
~$ F2로 숨길항목 조정
~$ F6 정렬을 MEM% 로
~$ F4 필터로 /usr/bin/qemu 특정 프로세스 계열만 확인 가능
~$ q로 끄기
</code></pre></div><br />
step 3. 스냅샷/스크립트<br />
<div class="highlight"><pre><span></span><code>~$ ps -eo pid,ppid,user,comm,rss,vsz --sort=-rss | head     #rss(실메모리) vsz(가상)
    PID    PPID USER     COMMAND           RSS    VSZ
   2589    1169 kkongny+ firefox         594364 12629332
   4884    4749 kkongny+ code            563836 1219649316
   3547    2589 kkongny+ Isolated Web Co 550156 3038512
   3455    2589 kkongny+ Isolated Web Co 347484 2922224
   1169     950 kkongny+ gnome-shell     297092 5567980
   1539     950 kkongny+ snap-store      209600 1045388
   4900    4743 kkongny+ code            187248 1217878856
   3946    2589 kkongny+ Isolated Web Co 187084 2635356
   4743     950 kkongny+ code            183576 1218076356
</code></pre></div><br />
step 4. 전공자용 정확한 합계<br />
<div class="highlight"><pre><span></span><code>~$ smem -r
</code></pre></div></p>
<h3 id="_4">&gt; 프로세스 레벨로 메모리 확인</h3>
<p>step 1. 프로세스 정보 개요<br />
<div class="highlight"><pre><span></span><code>~$ pmap -x 2589
2589:   /snap/firefox/6436/usr/lib/firefox/firefox
Address           Kbytes     RSS   Dirty Mode  Mapping
000001fa00500000    1024     684     684 rw---   [ anon ]
000002d1ed600000    1024     292     292 rw---   [ anon ]
000002f3c6200000    1024     144     144 rw---   [ anon ]
0000050269000000    1024    1024    1024 rw---   [ anon ]
0000050c95900000    1024      64      64 rw---   [ anon ]
0000056dbae00000    1024    1024    1024 rw---   [ anon ]
00000693c5200000    1024    1024    1024 rw---   [ anon ]
000006b766100000    1024     236     236 rw---   [ anon ]
</code></pre></div><br />
* address: 매핑의 시작 가상주소<br />
* kbytes: 매핑 전체 크기. 1024KB/4KB = 256 페이지<br />
* RSS: 지금 실제 물리램에 있는 크기. Kbytes보다 작음<br />
* Dirty: 해당 매핑에서 수정된 양. [anon] 익명이면 전부 원본없는 수정이기 때문에 RSS와 양이 똑같음. 그러나 디스크에서 ro만 한거면 0. 언제든 버려도 됨. 디스크에서 rw한거면 수정될때만 증가함.<br />
* Mapping: 파일 경로</p>
<p>step 2. 원본<br />
<div class="highlight"><pre><span></span><code>~$ cat /proc/2589/maps
1fa00500000-1fa00600000 rw-p 00000000 00:00 0                            [anon:js-gc-heap]
2d1ed600000-2d1ed700000 rw-p 00000000 00:00 0                            [anon:js-gc-heap]
2f3c6200000-2f3c6300000 rw-p 00000000 00:00 0                            [anon:js-gc-heap]
50269000000-50269100000 rw-p 00000000 00:00 0                            [anon:js-gc-heap]
</code></pre></div><br />
가상주소 범위 별 자세한 정보. 권한, 파일 안에서의 오프셋, 디스크 major:minor, inode 번호, 출처 순이다.<br />
이건 파일이 아니라 딱히 그런 정보가 없다.</p>
<p>step 3. 통계<br />
<div class="highlight"><pre><span></span><code>~$ cat /proc/2589/smaps_rollup
1fa00500000-7ffc125cf000 ---p 00000000 00:00 0                           [rollup]
Rss:              745608 kB
Pss:              492933 kB
Pss_Dirty:        389358 kB
Pss_Anon:         377596 kB
Pss_File:         103506 kB
Pss_Shmem:         11830 kB
Shared_Clean:     302352 kB
Shared_Dirty:       9888 kB
Private_Clean:     48448 kB
Private_Dirty:    384920 kB
Referenced:       745608 kB
Anonymous:        377596 kB
KSM:                   0 kB
LazyFree:              0 kB
AnonHugePages:         0 kB
ShmemPmdMapped:        0 kB
FilePmdMapped:         0 kB
Shared_Hugetlb:        0 kB
Private_Hugetlb:       0 kB
Swap:                  0 kB
SwapPss:               0 kB
Locked:                0 kB
</code></pre></div><br />
step 4. gdb<br />
<div class="highlight"><pre><span></span><code>~$ sudo gdb -p 2589
(gdb) x/32xb 0x00001fa00500000      # 총 32개. 16진수 표현. 하나당 1B 단위.
0x1fa00500000:  0x00    0x00    0x00    0x00    0x00    0x00    0x00    0x00
0x1fa00500008:  0x00    0xc0    0xe2    0xd6    0xee    0x7f    0x00    0x00
0x1fa00500010:  0x01    0xff    0x00    0x00    0x00    0x00    0x00    0x00
0x1fa00500018:  0x00    0x00    0xb0    0x0a    0xf8    0x07    0x00    0x00
</code></pre></div><br />
x = 메모리 확인 명령<br />
x / [개수][형식][단위] 주소<br />
이 의미를 알기 위해서는 (1) 리틀엔디안 재배열 (2) 그 값이 정수·포인터·길이·비트플래그 중 무엇인지<br />
<div class="highlight"><pre><span></span><code>(gdb) x/4gx 0x1fa00500000        # 총 4개. 하나당 giant word(8B) 단위. 16진수 표현.
0x1fa00500000: 0x0000000000000000    ← 워드 0
0x1fa00500008: 0x00007feed6e2c000    ← 워드 1
0x1fa00500010: 0x000000000000ff01    ← 워드 2
0x1fa00500018: 0x00007f80ab000000    ← 워드 3
</code></pre></div><br />
워드 1·3 은 48 bit 유저 공간 포인터처럼 생긴 값(0x0000 7f<strong>…</strong>) → 메모리 어딘가를 가리키는 주소일 가능성.<br />
워드 2 (0xff01)는 길이+플래그 비트류 메타데이터 패턴과 비슷.</p>
<h3 id="_5">&gt; 커널 레벨 물리 메모리</h3>
<p>step 1. 커널 모듈 목록<br />
<div class="highlight"><pre><span></span><code>~$ sudo cat /proc/modules
ccm 20480 6 - Live 0xffffffffc1408000
rfcomm 102400 4 - Live 0xffffffffc1be7000
snd_ctl_led 24576 0 - Live 0xffffffffc145d000
ledtrig_audio 12288 1 snd_ctl_led, Live 0xffffffffc1453000
snd_soc_skl_hda_dsp 24576 7 - Live 0xffffffffc1445000
snd_soc_hdac_hdmi 45056 1 snd_soc_skl_hda_dsp, Live 0xffffffffc1434000
</code></pre></div><br />
step 2. 슬랩 캐시(inode, task_struct 같은 고정 크기 객체마다 전용 캐시)<br />
<div class="highlight"><pre><span></span><code>~$ sudo cat /proc/slabinfo | head
[sudo] password for kkongnyang2: 
slabinfo - version: 2.1
# name            &lt;active_objs&gt; &lt;num_objs&gt; &lt;objsize&gt; &lt;objperslab&gt; &lt;pagesperslab&gt; : tunables &lt;limit&gt; &lt;batchcount&gt; &lt;sharedfactor&gt; : slabdata &lt;active_slabs&gt; &lt;num_slabs&gt; &lt;sharedavail&gt;
kvm_async_pf           0      0    136   30    1 : tunables    0    0    0 : slabdata      0      0      0
kvm_vcpu               0      0   9152    3    8 : tunables    0    0    0 : slabdata      0      0      0
kvm_mmu_page_header      0      0    184   22    1 : tunables    0    0    0 : slabdata      0      0      0
x86_emulator           0      0   2656   12    8 : tunables    0    0    0 : slabdata      0      0      0
i915_dependency      256    256    128   32    1 : tunables    0    0    0 : slabdata      8      8      0
execute_cb             0      0     64   64    1 : tunables    0    0    0 : slabdata      0      0      0
i915_request         530    552    704   23    4 : tunables    0    0    0 : slabdata     24     24      0
drm_i915_gem_object    753    896   1152   28    8 : tunables    0    0    0 : slabdata     32     32      0
</code></pre></div><br />
step 3. vmalloc 영역 (kmalloc은 물리 연속 할당, vmalloc은 가상 연속 할당)<br />
<div class="highlight"><pre><span></span><code>~$ sudo cat /proc/vmallocinfo
0xffffbcba80000000-0xffffbcba80005000   20480 irq_init_percpu_irqstack+0x114/0x1b0 vmap
0xffffbcba80005000-0xffffbcba80007000    8192 x86_acpi_os_ioremap+0xe/0x20 phys=0x0000000084189000 ioremap
0xffffbcba80007000-0xffffbcba80009000    8192 x86_acpi_os_ioremap+0xe/0x20 phys=0x0000000084292000 ioremap
</code></pre></div></p>
<p>step 4. 물리 메모리 맵<br />
<div class="highlight"><pre><span></span><code>~$ sudo cat /proc/iomem
00000000-00000fff : Reserved
00001000-0009efff : System RAM
0009f000-000fffff : Reserved
  000a0000-000bffff : PCI Bus 0000:00
  000e0000-000fffff : PCI Bus 0000:00
    000f0000-000fffff : System ROM
00100000-793fafff : System RAM
  54200000-557fffff : Kernel code
  55800000-5659ffff : Kernel rodata
  56600000-56a54eff : Kernel data
  56f62000-573fffff : Kernel bss
793fb000-79415fff : Reserved
79416000-7ade8fff : System RAM
7ade9000-7ade9fff : Reserved
7adea000-7f239fff : System RAM
7f23a000-84063fff : Reserved
84064000-84193fff : ACPI Tables
84194000-84293fff : ACPI Non-volatile Storage
  84293298-84293397 : USBC000:00
84294000-8554dfff : Reserved
8554e000-8554efff : System RAM
8554f000-897fffff : Reserved
  87800000-897fffff : Graphics Stolen Memory
89800000-dfffffff : PCI Bus 0000:00
  8c000000-a20fffff : PCI Bus 0000:01
    8c000000-a20fffff : PCI Bus 0000:02
      8c000000-a1efffff : PCI Bus 0000:04
      a1f00000-a1ffffff : PCI Bus 0000:39
        a1f00000-a1f0ffff : 0000:39:00.0
          a1f00000-a1f0ffff : xhci-hcd
      a2000000-a20fffff : PCI Bus 0000:03
        a2000000-a203ffff : 0000:03:00.0
          a2000000-a203ffff : thunderbolt
        a2040000-a2040fff : 0000:03:00.0
  a2200000-a22fffff : PCI Bus 0000:3a
    a2200000-a2203fff : 0000:3a:00.0
      a2200000-a2203fff : nvme
e0000000-efffffff : PCI ECAM 0000 [bus 00-ff]
  e0000000-efffffff : pnp 00:07
fc800000-fe7fffff : PCI Bus 0000:00
  fd000000-fd69ffff : pnp 00:05
  fd6a0000-fd6affff : INT34BB:00
    fd6a0000-fd6affff : INT34BB:00 INT34BB:00
  fd6b0000-fd6cffff : pnp 00:05
  fd6d0000-fd6dffff : INT34BB:00
    fd6d0000-fd6dffff : INT34BB:00 INT34BB:00
  fd6e0000-fd6effff : INT34BB:00
    fd6e0000-fd6effff : INT34BB:00 INT34BB:00
  fd6f0000-fdffffff : pnp 00:05
  fe000000-fe010fff : Reserved
    fe010000-fe010fff : 0000:00:1f.5
      fe010000-fe010fff : 0000:00:1f.5 0000:00:1f.5
  fe038000-fe038fff : pnp 00:09
  fe200000-fe7fffff : pnp 00:05
fec00000-fec00fff : Reserved
  fec00000-fec003ff : IOAPIC 0
fed00000-fed03fff : Reserved
  fed00000-fed003ff : HPET 0
    fed00000-fed003ff : PNP0103:00
fed10000-fed17fff : pnp 00:07
fed18000-fed18fff : pnp 00:07
fed19000-fed19fff : pnp 00:07
fed20000-fed3ffff : pnp 00:07
fed40000-fed44fff : MSFT0101:00
  fed40000-fed44fff : MSFT0101:00
fed45000-fed8ffff : pnp 00:07
fed90000-fed90fff : dmar0
fed91000-fed91fff : dmar1
fee00000-fee00fff : Reserved
ff000000-ffffffff : pnp 00:05
100000000-2747fffff : System RAM
274800000-277ffffff : RAM buffer
4000000000-7fffffffff : PCI Bus 0000:00
  4000000000-400fffffff : 0000:00:02.0
  4010000000-4010000fff : 0000:00:15.0
    4010000000-40100001ff : lpss_dev
      4010000000-40100001ff : i2c_designware.0 lpss_dev
    4010000200-40100002ff : lpss_priv
    4010000800-4010000fff : idma64.0
      4010000800-4010000fff : idma64.0 idma64.0
  6000000000-6021ffffff : PCI Bus 0000:01
    6000000000-6021ffffff : PCI Bus 0000:02
      6000000000-6021ffffff : PCI Bus 0000:04
  6022000000-6022ffffff : 0000:00:02.0
  6023000000-60230fffff : 0000:00:1f.3
    6023000000-60230fffff : Audio DSP
  6023100000-602310ffff : 0000:00:14.0
    6023100000-602310ffff : xhci-hcd
  6023110000-6023117fff : 0000:00:04.0
    6023110000-6023117fff : proc_thermal
  6023118000-602311bfff : 0000:00:1f.3
    6023118000-602311bfff : Audio DSP
  602311c000-602311ffff : 0000:00:14.3
    602311c000-602311ffff : iwlwifi
  6023120000-6023121fff : 0000:00:14.2
  6023122000-60231220ff : 0000:00:1f.4
  6023123000-6023123fff : 0000:00:16.0
    6023123000-6023123fff : mei_me
  6023125000-6023125fff : 0000:00:14.2
  6023126000-6023126fff : 0000:00:12.0
    6023126000-6023126fff : Intel PCH thermal driver
</code></pre></div></p>
<h3 id="_6">&gt; 물리 덤프</h3>
<p>RAM 그 자체를 파일로 보관</p>
<p>A. Crash dump (패닉 시 자동 vmcore)<br />
<div class="highlight"><pre><span></span><code>~$ sudo apt install linux-crashdump          # kdump-tools + makedumpfile
~$ sudo systemctl enable --now kdump         # 서비스 활성화
~$ sudo kdump-config show                    # crashkernel=X 확인. 없으면 /etc/default/grub.d/kdump-tools.cfg 추가해야함
~$ echo 1 | sudo tee /proc/sys/kernel/sysrq
~$ echo c | sudo tee /proc/sysrq-trigger     # VM에서만! 즉시 패닉
재부팅 하면 /var/crash/$(date +%Y%)/vmcore 가 있음.
~$ sudo apt install crash
~$ sudo crash /usr/lib/debug/boot/vmlinux-$(uname -r) /var/crash/*/vmcore
crash&gt; bt          # 패닉 스택
crash&gt; ps          # 전 프로세스 상태
</code></pre></div></p>
<p>B. Live dump (LiME으로 메모리 구조 연구)<br />
<div class="highlight"><pre><span></span><code>sudo apt install build-essential linux-headers-$(uname -r)
git clone https://github.com/504ensicsLabs/LiME.git
cd LiME/src
make -C /lib/modules/$(uname -r)/build M=$(pwd) modules
# LiME은 format=raw|lime|padded 및 net=&lt;host:port&gt;(SSH 대신 UDP 스트림) 지원. 
sudo insmod lime.ko &quot;path=/tmp/memdump.lime format=lime&quot;
ls -lh /tmp/memdump.lime    # 전체 RAM 크기만큼
git clone https://github.com/volatilityfoundation/volatility3
python3 -m pip install -r volatility3/requirements.txt
python3 volatility3/vol.py -f /tmp/memdump.lime windows.info     # 예시 플러그인
</code></pre></div></p>
<p>C. /proc/kcore (커널 전체를 gdb로)<br />
<div class="highlight"><pre><span></span><code>sudo sysctl -w kernel.kptr_restrict=0   # 주소 마스킹 해제. 일반인에게도 커널 주소를 그대로 노출
sudo gdb /usr/lib/debug/vmlinux-$(uname -r) /proc/kcore
(gdb) info mem
(gdb) x/16gx 0xffffffffff600000        # vdso 예시
</code></pre></div><br />
시스템 RAM + I/O 공간을 ELF64로 노출하며 크기가 RAM 크기와 동일</p>
<p>D. /dev/mem (물리 주소 직접)<br />
최신 커널은 config_strict_devmem=y로 1MB 이후 영역 접근을 차단한다. 따라서 부트시 iomem=relaxed를 grub 커널 라인에 추가하거나, 커스텀 커널에서 strict_devmem=n으로 빌드해야한다. <br />
<div class="highlight"><pre><span></span><code>sudo dd if=/dev/mem of=efi_fw.bin bs=1M skip=0 count=1
hexdump -C efi_fw.bin | head
</code></pre></div></p>
<p>E. 가상머신 메모리 덤프<br />
<div class="highlight"><pre><span></span><code>sudo virsh dump --memory-only --live vm1 /var/tmp/vm1.dump      # 게스트 중단 없이
혹은
(qemu) dump-guest-memory /tmp/vm1.dump                            # QEMU monitor
sudo crash vmlinux-guest /var/tmp/vm1.dump
</code></pre></div></p>
<p>주의사항.<br />
kernel.randomize_va_space, kptr_restrict, dmesg_restrict를 풀면 편하나, 반드시 실험용에서만.<br />
프로세스가 실행중인 메모리를 읽으면 멈춤(HALT)은 없지만, 쓰기는 데이터 손상 위험</p>
<p>kerenl.randomize_va_space<br />
2 = 풀 랜덤화<br />
1 = 보수적<br />
0 = ASLR off</p>
<p>kernel.kptr_restrict<br />
2 = root 포함 전원 마스킹<br />
1 = 일반 사용자 마스킹<br />
0 = 아무나 풀 주소 보여주기</p>
<p>kernel.demsg_restrict<br />
1 = root/CAP_SYSLOG만<br />
0 = 모두 허용          # 커널 로그에 메모리 주소나 토큰이 찍힐 수 있음</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "content.code.copy", "header.autohide"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>